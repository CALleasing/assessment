{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/drift/Documents/ReactNative/cal-assessment/src/screens/StaffCommentScreen.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { Button, Card } from 'react-native-paper';\nimport { CheckBox } from 'react-native-elements';\nimport axiox from 'axios';\nimport { COLORS, SIZES } from \"../constants/theme\";\nimport moment from 'moment';\nimport 'moment/locale/th';\nimport { MAIN_URL, USER } from \"../constants/variables\";\n\nvar StaffCommentScreen = function StaffCommentScreen(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var userId = USER.userid;\n  var managerID = route.params.managerID;\n  var year = route.params.year;\n  var part = route.params.part;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      answer = _useState2[0],\n      setAnswer = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loadingPage = _useState6[0],\n      setLoadingPage = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      allAnswer = _useState8[0],\n      setAllAnswer = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      questionWithAnswer = _useState10[0],\n      setQuestionWithAnswer = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      question = _useState12[0],\n      setQuestion = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      checked = _useState14[0],\n      setChecked = _useState14[1];\n\n  var _useState15 = useState(''),\n      _useState16 = _slicedToArray(_useState15, 2),\n      selectedColor = _useState16[0],\n      setSelectedColor = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      list = _useState18[0],\n      setList = _useState18[1];\n\n  var _useState19 = useState(0),\n      _useState20 = _slicedToArray(_useState19, 2),\n      checkIndex = _useState20[0],\n      setCheckIndex = _useState20[1];\n\n  useEffect(function () {\n    USER.position === \"ผู้จัดการ\" ? getAllQuestion() : getAllQuestionWithAnswer();\n  }, []);\n\n  var getAllQuestionWithAnswer = function getAllQuestionWithAnswer() {\n    setLoading(true);\n    axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + managerID + '/' + userId).then(function (res) {\n      setQuestionWithAnswer(res.data);\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoading(false);\n    });\n  };\n\n  var getAllQuestion = function getAllQuestion() {\n    setLoadingPage(true);\n    axiox.get(MAIN_URL + '/question/comment/' + year + '/' + part).then(function (res) {\n      setQuestion(res.data);\n      setLoadingPage(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoadingPage(false);\n    });\n  };\n\n  var getAllAnswer = function getAllAnswer() {\n    setLoading(true);\n    axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/department/' + USER.department).then(function (res) {\n      setAllAnswer(res.data);\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoading(false);\n    });\n  };\n\n  var getAnswerWithManagerId = function getAnswerWithManagerId(_ref2) {\n    var number = _ref2.number;\n    setLoading(true);\n    axiox.get(MAIN_URL + '/answer/comment/manager/' + year + '/' + part + '/' + userId + '/' + number).then(function (res) {\n      console.log(res.data);\n      setAnswer(res.data);\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoading(false);\n    });\n  };\n\n  var postAnswer = function postAnswer(_ref3) {\n    var dataSend = _ref3.dataSend,\n        number = _ref3.number;\n    setLoading(true);\n    axiox.post(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + userId + '/' + number, dataSend).then(function (res) {\n      alert(\"บันทึกข้อมูลสำเร็จ\");\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n      alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n      setLoading(false);\n    });\n  };\n\n  var renderManagerCheck = function renderManagerCheck() {\n    var renderItem = function renderItem(_ref4) {\n      var item = _ref4.item,\n          index = _ref4.index;\n      return React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: selectedColor === index ? {\n          borderRadius: 10,\n          backgroundColor: 'green',\n          padding: 10,\n          margin: 10\n        } : {\n          borderRadius: 10,\n          borderColor: 'gray',\n          borderWidth: .3,\n          backgroundColor: '#F8F8FF',\n          padding: 10,\n          margin: 10\n        },\n        onPress: function onPress() {\n          setAnswer([]);\n          setSelectedColor(index);\n          setCheckIndex(index);\n          getAnswerWithManagerId({\n            number: item.number\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: selectedColor === index ? {\n          color: 'white',\n          fontSize: 16\n        } : {\n          color: 'black',\n          fontSize: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }\n      }, index + 1, \".  \", item.qt)), checkIndex === index ? !loading ? answer.length != 0 ? React.createElement(View, {\n        style: {\n          padding: 16,\n          margin: 8,\n          borderRadius: 10,\n          borderWidth: .3,\n          borderColor: 'gray'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 33\n        }\n      }, React.createElement(FlatList, {\n        data: answer,\n        extraData: answer,\n        keyExtractor: function keyExtractor(item, index) {\n          return \"\" + index;\n        },\n        renderItem: renderComment,\n        ListHeaderComponent: React.createElement(Text, {\n          style: {\n            marginBottom: 16,\n            alignSelf: 'center',\n            fontSize: 14\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 45\n          }\n        }, \"\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 37\n        }\n      })) : selectedColor != '' ? React.createElement(View, {\n        style: {\n          padding: 16,\n          margin: 8,\n          borderRadius: 10,\n          borderWidth: .3,\n          borderColor: 'gray'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 37\n        }\n      }, React.createElement(Text, {\n        style: {\n          alignSelf: 'center'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 41\n        }\n      }, \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19\")) : null : React.createElement(ActivityIndicator, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 29\n        }\n      }) : null);\n    };\n\n    var renderComment = function renderComment(_ref5) {\n      var item = _ref5.item,\n          index = _ref5.index;\n      return React.createElement(View, {\n        style: {\n          marginVertical: 8\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 17\n        }\n      }, item.reveal === 0 ? React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 25\n        }\n      }, item.name, \" \", item.lastname, \" (\", item.nickname, \") [\", item.department, \"] \", React.createElement(Text, {\n        style: {\n          fontSize: 12,\n          color: 'gray'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 142\n        }\n      }, \" - \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", moment(item.date).format('ll'))) : React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 25\n        }\n      }, \"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D \", React.createElement(Text, {\n        style: {\n          fontSize: 12,\n          color: 'gray'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 91\n        }\n      }, \" - \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", moment(item.date).format('ll'))), React.createElement(View, {\n        style: {\n          marginVertical: 8,\n          borderRadius: 5,\n          borderColor: 'gray',\n          borderWidth: .3\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'green',\n          padding: 8\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 25\n        }\n      }, item.answer)));\n    };\n\n    return loadingPage ? React.createElement(ActivityIndicator, {\n      style: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      size: \"large\",\n      color: \"#0275d8\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }) : question.length != 0 ? React.createElement(View, {\n      style: {\n        marginBottom: 18\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, React.createElement(FlatList, {\n      data: question,\n      extraData: question,\n      keyExtractor: function keyExtractor(item, index) {\n        return \"\" + index;\n      },\n      renderItem: renderItem,\n      ListHeaderComponent: React.createElement(View, {\n        style: {\n          margin: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: {\n          alignSelf: 'center',\n          fontSize: 18\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 37\n        }\n      }, \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2B\\u0E31\\u0E27\\u0E02\\u0E49\\u0E2D\")),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    })) : React.createElement(Text, {\n      style: {\n        fontSize: 16,\n        alignSelf: 'center',\n        marginTop: 50\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 21\n      }\n    }, \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\");\n  };\n\n  var renderUserComment = function renderUserComment() {\n    var renderItem = function renderItem(_ref6) {\n      var item = _ref6.item,\n          index = _ref6.index;\n      return React.createElement(View, {\n        style: {\n          padding: 8,\n          margin: 15,\n          backgroundColor: 'white',\n          borderColor: 'gray',\n          borderWidth: .3\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }\n      }, item.number, \". \", item.qt), React.createElement(TextInput, {\n        style: {\n          backgroundColor: 'white',\n          marginTop: 20,\n          borderWidth: 1,\n          padding: 10,\n          borderRadius: 5,\n          marginVertical: 8,\n          height: 150\n        },\n        placeholder: \"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",\n        placeholderTextColor: \"gray\",\n        multiline: true,\n        numberOfLines: 6,\n        color: \"blue\",\n        fontSize: 16,\n        onChangeText: function onChangeText(text) {\n          answer[index] = text;\n        },\n        defaultValue: item.answer,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }\n      }), React.createElement(Button, {\n        style: {\n          backgroundColor: 'green',\n          borderRadius: 10,\n          marginVertical: 8\n        },\n        mode: \"Contained\",\n        onPress: function onPress() {\n          var dataSend = {\n            manager_id: managerID,\n            reveal: checked,\n            answer: answer[index],\n            date: moment().format('yyyy-MM-DD'),\n            department: USER.department\n          };\n          console.log(dataSend);\n          console.log(\"year\", year);\n          console.log(\"part\", part);\n          console.log(\"number\", item.number);\n          console.log(\"userid\", USER.userid);\n          postAnswer({\n            dataSend: dataSend,\n            number: item.number\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          alignSelf: 'center',\n          color: 'white'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 25\n        }\n      }, \"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\")));\n    };\n\n    return loading ? React.createElement(ActivityIndicator, {\n      style: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      size: \"large\",\n      color: \"#0275d8\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }\n    }) : questionWithAnswer.length != 0 ? React.createElement(FlatList, {\n      data: questionWithAnswer,\n      extraData: questionWithAnswer,\n      keyExtractor: function keyExtractor(item, index) {\n        return \"\" + index;\n      },\n      renderItem: renderItem,\n      ListHeaderComponent: React.createElement(View, {\n        style: {\n          margin: 16,\n          backgroundColor: 'white',\n          paddingBottom: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 16,\n          margin: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 33\n        }\n      }, \"* \\u0E01\\u0E48\\u0E2D\\u0E19\\u0E15\\u0E2D\\u0E1A\\u0E04\\u0E33\\u0E16\\u0E32\\u0E21 \\u0E17\\u0E48\\u0E32\\u0E19\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E43\\u0E2B\\u0E49\\u0E1C\\u0E39\\u0E49\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E17\\u0E23\\u0E32\\u0E1A\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48\"), React.createElement(CheckBox, {\n        title: \"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\",\n        checked: checked,\n        onPress: function onPress() {\n          setChecked(!checked);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 33\n        }\n      })),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 21\n      }\n    }) : React.createElement(Text, {\n      style: {\n        fontSize: 16,\n        alignSelf: 'center',\n        marginTop: 50\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 21\n      }\n    }, \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\");\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      backgroundColor: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }\n  }, USER.position === 'ผู้จัดการ' ? renderManagerCheck(navigation) : renderUserComment(navigation));\n};\n\nvar styles = StyleSheet.create({\n  checkboxContainer: {\n    backgroundColor: 'white',\n    borderColor: 'gray',\n    borderWidth: 3,\n    flexDirection: \"row\",\n    marginBottom: 20\n  },\n  checkbox: {\n    width: 20,\n    height: 20,\n    alignSelf: \"center\"\n  },\n  label: {\n    margin: 8\n  }\n});\nexport default StaffCommentScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/StaffCommentScreen.js"],"names":["React","useState","useEffect","Button","Card","CheckBox","axiox","COLORS","SIZES","moment","MAIN_URL","USER","StaffCommentScreen","navigation","route","userId","userid","managerID","params","year","part","answer","setAnswer","loading","setLoading","loadingPage","setLoadingPage","allAnswer","setAllAnswer","questionWithAnswer","setQuestionWithAnswer","question","setQuestion","checked","setChecked","selectedColor","setSelectedColor","list","setList","checkIndex","setCheckIndex","position","getAllQuestion","getAllQuestionWithAnswer","get","then","res","data","catch","err","console","log","getAllAnswer","department","getAnswerWithManagerId","number","postAnswer","dataSend","post","alert","renderManagerCheck","renderItem","item","index","borderRadius","backgroundColor","padding","margin","borderColor","borderWidth","color","fontSize","qt","length","renderComment","marginBottom","alignSelf","marginVertical","reveal","fontWeight","name","lastname","nickname","date","format","left","right","top","bottom","alignItems","justifyContent","marginTop","renderUserComment","height","text","manager_id","paddingBottom","flex","styles","StyleSheet","create","checkboxContainer","flexDirection","checkbox","width","label"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, FlatList, StyleSheet, TouchableOpacity, ActivityIndicator } from 'react-native';\nimport { Button, Card } from 'react-native-paper';\nimport { CheckBox } from 'react-native-elements'\n\nimport axiox from 'axios';\nimport { COLORS, SIZES } from '../constants/theme';\n\nimport moment from 'moment';\nimport 'moment/locale/th';\nimport { MAIN_URL, USER } from '../constants/variables';\n\nconst StaffCommentScreen = ({ navigation, route }) => {\n\n    // let sheetID = route.params.sheetID;\n    let userId = USER.userid;\n    // console.log(userId)\n    let managerID = route.params.managerID;\n    let year = route.params.year;\n    let part = route.params.part;\n\n    const [answer, setAnswer] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [loadingPage, setLoadingPage] = useState(false);\n\n    const [allAnswer, setAllAnswer] = useState([]);\n    const [questionWithAnswer, setQuestionWithAnswer] = useState([]);\n    const [question, setQuestion] = useState([]);\n    // var checkArray = [];\n    const [checked, setChecked] = useState(false);\n    // const [itemSelected, setItemSeleced] = useState(0);\n    const [selectedColor, setSelectedColor] = useState('');\n    const [list, setList] = useState([]);\n    const [checkIndex, setCheckIndex] = useState(0);\n    // console.log(USER.position)\n\n    useEffect(() => {\n        // setLoading(true);\n        // console.log(USER.position)\n        USER.position === \"ผู้จัดการ\" ? getAllQuestion() : getAllQuestionWithAnswer()\n\n    }, []);\n\n    const getAllQuestionWithAnswer = () => {\n        setLoading(true);\n        // console.log(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + managerID + '/' + userId)\n        // console.log(\"getAllQuestionWithAnswer\");\n        axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + managerID + '/' + userId)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n\n                setQuestionWithAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n                // res.data.map(item => {\n                //     checkArray.push({\n                //         check: false\n                //     });\n                // console.log(checked)\n                // })\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    };\n\n    const getAllQuestion = () => {\n        setLoadingPage(true);\n        axiox.get(MAIN_URL + '/question/comment/' + year + '/' + part)\n            .then(res => {\n                // console.log(res.data);\n                // console.log(\"ALL DATA\", res.data);\n                setQuestion(res.data)\n\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoadingPage(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoadingPage(false);\n\n            });\n    }\n\n    const getAllAnswer = () => {\n        setLoading(true);\n        // console.log(\"getAll\")\n        axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/department/' + USER.department)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                // console.log(\"ALL DATA\", res.data);\n                setAllAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    };\n\n    const getAnswerWithManagerId = ({ number }) => {\n        setLoading(true);\n\n        // console.log(\"get\", userId)\n        axiox.get(MAIN_URL + '/answer/comment/manager/' + year + '/' + part + '/' + userId + '/' + number)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n                setAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const postAnswer = ({ dataSend, number }) => {\n        setLoading(true);\n        axiox.post(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + userId + '/' + number, dataSend)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                // console.log(res.data);\n                alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const renderManagerCheck = () => {\n        const renderItem = ({ item, index }) => {\n            // console.log(item)\n            return (\n                <View>\n                    <TouchableOpacity\n                        style={selectedColor === index ? { borderRadius: 10, backgroundColor: 'green', padding: 10, margin: 10, } : { borderRadius: 10, borderColor: 'gray', borderWidth: .3, backgroundColor: '#F8F8FF', padding: 10, margin: 10, }}\n                        onPress={() => {\n                            setAnswer([]);\n                            setSelectedColor(index);\n                            setCheckIndex(index);\n                            // console.log(item.number)\n                            getAnswerWithManagerId({ number: item.number });\n                        }}\n                    >\n                        <Text style={selectedColor === index ? { color: 'white', fontSize: 16 } : { color: 'black', fontSize: 16 }}>{index + 1}.  {item.qt}\n\n                            {/* {\n                            item.reveal != 1 ?\n                                <Text style={{ fontSize: 14, color: 'blue' }}> {item.qt} {item.lastname} ({item.nickname}) ( แผนก/สาขา {item.department} )</Text>\n                                :\n                                <Text style={{ fontSize: 14, color: 'blue' }}> ไม่เปิดเผยชื่อ</Text>\n                        } */}\n                        </Text>\n                    </TouchableOpacity>\n                    {checkIndex === index ?\n                        !loading ?\n                            answer.length != 0 ?\n                                <View style={{ padding: 16, margin: 8, borderRadius: 10, borderWidth: .3, borderColor: 'gray' }}>\n                                    <FlatList\n                                        data={answer}\n                                        extraData={answer}\n                                        keyExtractor={(item, index) => `${index}`}\n                                        renderItem={renderComment}\n                                        ListHeaderComponent={\n                                            <Text style={{ marginBottom: 16, alignSelf: 'center', fontSize: 14 }}>ความคิดเห็นทั้งหมด</Text>\n                                        }\n                                    />\n                                </View>\n                                :\n                                selectedColor != '' ?\n                                    <View style={{ padding: 16, margin: 8, borderRadius: 10, borderWidth: .3, borderColor: 'gray' }}>\n                                        <Text style={{ alignSelf: 'center' }}>ไม่มีความคิดเห็น</Text>\n                                    </View>\n                                    :\n                                    null\n                            :\n                            <ActivityIndicator />\n\n                        :\n                        null\n                    }\n                </View>\n            )\n        }\n\n        const renderComment = ({ item, index }) => {\n            return (\n                <View style={{ marginVertical: 8 }}>\n                    {item.reveal === 0 ?\n                        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>{item.name} {item.lastname} ({item.nickname}) [{item.department}] <Text style={{ fontSize: 12, color: 'gray' }}> - วันที่ {moment(item.date).format('ll')}</Text></Text>\n                        :\n                        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>ไม่เปิดเผยชื่อ <Text style={{ fontSize: 12, color: 'gray' }}> - วันที่ {moment(item.date).format('ll')}</Text></Text>\n                    }\n                    <View style={{ marginVertical: 8, borderRadius: 5, borderColor: 'gray', borderWidth: .3 }}>\n                        <Text style={{ color: 'green', padding: 8 }}>{item.answer}</Text>\n                    </View>\n                </View>\n            );\n        };\n\n        return (\n            loadingPage ?\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                question.length != 0 ?\n                    <View style={{ marginBottom: 18 }}>\n                        <FlatList\n                            data={question}\n                            extraData={question}\n                            keyExtractor={(item, index) => `${index}`}\n                            renderItem={renderItem}\n                            ListHeaderComponent={\n                                <View style={{ margin: 16 }}>\n                                    <Text style={{ alignSelf: 'center', fontSize: 18 }}>เลือกหัวข้อ</Text>\n                                </View>\n\n                            }\n                        />\n                    </View>\n                    :\n                    <Text style={{ fontSize: 16, alignSelf: 'center', marginTop: 50 }}>ไม่มีข้อมูล</Text>\n        )\n    }\n\n    const renderUserComment = () => {\n        const renderItem = ({ item, index }) => {\n            return (\n                <View style={{ padding: 8, margin: 15, backgroundColor: 'white', borderColor: 'gray', borderWidth: .3 }}>\n                    <Text style={{ fontSize: 16 }}>{item.number}. {item.qt}</Text>\n                    {/* <Text style={{ color: 'red' }}>*ผู้จัดการของแผนกคุณเท่านั้นที่จะเห็นคำตอบ แต่จะไม่รู้ว่าใครเป็นคนตอบ</Text> */}\n\n                    <TextInput\n                        style={{ backgroundColor: 'white', marginTop: 20, borderWidth: 1, padding: 10, borderRadius: 5, marginVertical: 8, height: 150 }}\n                        // textContentType='telephoneNumber'\n                        placeholder=\"คำตอบ\"\n                        placeholderTextColor=\"gray\"\n                        multiline\n                        numberOfLines={6}\n                        color='blue'\n                        fontSize={16}\n                        onChangeText={text => {\n                            answer[index] = text;\n                        }}\n                        defaultValue={item.answer}\n                    />\n\n                    <Button\n                        style={{\n                            backgroundColor: 'green',\n                            borderRadius: 10,\n                            marginVertical: 8\n                        }}\n                        mode=\"Contained\"\n                        onPress={() => {\n\n                            const dataSend = {\n                                manager_id: managerID,\n                                reveal: checked,\n                                answer: answer[index],\n                                date: moment().format('yyyy-MM-DD'),\n                                department: USER.department\n                            }\n                            console.log(dataSend)\n                            console.log(\"year\", year)\n                            console.log(\"part\", part)\n                            console.log(\"number\", item.number)\n                            console.log(\"userid\", USER.userid)\n                            postAnswer({ dataSend, number: item.number });\n                        }}\n                    >\n                        <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบ</Text>\n                    </Button>\n                </View>\n            )\n        }\n\n        return (\n            loading ?\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                questionWithAnswer.length != 0 ?\n                    <FlatList\n                        data={questionWithAnswer}\n                        extraData={questionWithAnswer}\n                        keyExtractor={(item, index) => `${index}`}\n                        renderItem={renderItem}\n                        ListHeaderComponent={\n                            <View style={{ margin: 16, backgroundColor: 'white', paddingBottom: 16 }}>\n                                <Text style={{ fontSize: 16, margin: 16 }}>* ก่อนตอบคำถาม ท่านต้องการเปิดเผยชื่อให้ผู้จัดการทราบหรือไม่</Text>\n                                <CheckBox\n                                    title='ไม่เปิดเผยชื่อ'\n                                    checked={checked}\n                                    onPress={() => {\n                                        setChecked(!checked)\n                                        // console.log(checked);\n                                    }}\n                                />\n                            </View>\n                        }\n                    />\n                    :\n                    <Text style={{ fontSize: 16, alignSelf: 'center', marginTop: 50 }}>ไม่มีข้อมูล</Text>\n        )\n    }\n\n    return (\n        <View style={{ flex: 1, backgroundColor: 'white' }}>\n\n            {USER.position === 'ผู้จัดการ' ?\n                renderManagerCheck(navigation)\n                :\n                renderUserComment(navigation)\n            }\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    checkboxContainer: {\n        backgroundColor: 'white',\n        borderColor: 'gray',\n        borderWidth: 3,\n        flexDirection: \"row\",\n        marginBottom: 20,\n    },\n    checkbox: {\n\n        width: 20,\n        height: 20,\n        alignSelf: \"center\",\n    },\n    label: {\n        margin: 8,\n    },\n})\n\nexport default StaffCommentScreen;"]},"metadata":{},"sourceType":"module"}