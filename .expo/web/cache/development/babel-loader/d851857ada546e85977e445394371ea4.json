{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/drift/Documents/ReactNative/cal-assessment/src/screens/QuestionnaireManagerScreen.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Button, Card } from 'react-native-paper';\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport { WebView } from 'react-native-webview';\nimport { Video, Audio } from 'expo-av';\nimport Dialog from \"react-native-dialog\";\nimport axiox from 'axios';\nimport { COLORS } from \"../constants/theme\";\nimport moment from 'moment';\nimport 'moment/locale/th';\nimport { LOGIN } from \"../constants/variables\";\n\nvar QuestionnaireManagerScreen = function QuestionnaireManagerScreen(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var userId = LOGIN.userid;\n  var year = route.params.year;\n  var part = route.params.part;\n  var answer;\n  var video = React.useRef(null);\n\n  var play = function play() {\n    return video.current && video.current.playAsync();\n  };\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      status = _React$useState2[0],\n      setStatus = _React$useState2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isVideo = _useState2[0],\n      setIsVideo = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      managerList = _useState4[0],\n      setManagerList = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      questionNumber = _useState6[0],\n      setQuestionNumber = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      answerText = _useState8[0],\n      setAnswerText = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isAnswerError = _useState10[0],\n      setAnserError = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isEditVideo = _useState12[0],\n      setIsEditVideo = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      videoLink = _useState14[0],\n      setVideoLink = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      isLoading = _useState16[0],\n      setLoading = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      dialogConfirmAns = _useState18[0],\n      setDialogConfirmAns = _useState18[1];\n\n  var allAnswers = [];\n\n  var getQuestionnaireManager = function getQuestionnaireManager() {\n    axiox.get('https://program-api.herokuapp.com/' + year + '/' + part + '/manager/' + userId).then(function (res) {\n      var data = res.data;\n      console.log(data);\n      setManagerList(data);\n      {\n        setLoading(false);\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  var postAnswer = function postAnswer() {\n    console.log(answer);\n    axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/manager/' + userId, answer).then(function (res) {\n      console.log(res.data);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  var updateAnswer = function updateAnswer() {\n    console.log(answer);\n    axiox.put('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/manager/' + userId, answer).then(function (res) {\n      console.log(\"response: \", res);\n    }).catch(function (err) {\n      console.error(err);\n    });\n  };\n\n  useEffect(function () {\n    setLoading(true);\n    getQuestionnaireManager();\n  }, []);\n\n  var renderQuestionnaireManager = function renderQuestionnaireManager(_ref2) {\n    var navigation = _ref2.navigation;\n\n    var renderItem = function renderItem(_ref3) {\n      var item = _ref3.item,\n          index = _ref3.index;\n      allAnswers[index] = item.answer;\n      return React.createElement(View, {\n        style: {\n          margin: 8,\n          borderWidth: 1,\n          borderRadius: 5,\n          elevation: 5,\n          padding: 8,\n          backgroundColor: '#fff'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 16,\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }\n      }, item.number, \". \", item.qt), item.answer === undefined ? React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }\n      }, React.createElement(TextInput, {\n        style: {\n          borderWidth: 1,\n          borderRadius: 5,\n          padding: 10,\n          marginVertical: 8,\n          height: 100\n        },\n        placeholder: \"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",\n        placeholderTextColor: \"gray\",\n        multiline: true,\n        numberOfLines: 6,\n        color: \"blue\",\n        fontSize: 16,\n        onChangeText: function onChangeText(text) {\n          setAnswerText(text);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 29\n        }\n      }), React.createElement(Button, {\n        style: {\n          backgroundColor: 'gray',\n          borderRadius: 10,\n          marginVertical: 8\n        },\n        mode: \"Contained\",\n        onPress: function onPress() {\n          setDialogConfirmAns(true);\n          setQuestionNumber(item.number);\n\n          if (answerText != \"\") {\n            var answerObject = {\n              user_id: LOGIN.userid,\n              date: moment().format('yyyy-MM-DD'),\n              answer: answerText,\n              number: item.number,\n              qt: item.qt,\n              year: year\n            };\n            setAnserError(false);\n            setAnswerText(\"\");\n            answer = answerObject;\n            item.answer = answerText;\n            postAnswer();\n          } else {\n            setAnserError(true);\n          }\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          alignSelf: 'center',\n          color: 'white'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 33\n        }\n      }, \"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\"))) : React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }\n      }, React.createElement(TextInput, {\n        style: {\n          borderWidth: 1,\n          borderRadius: 5,\n          padding: 10,\n          marginVertical: 8,\n          height: 100\n        },\n        placeholder: \"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",\n        placeholderTextColor: \"gray\",\n        multiline: true,\n        numberOfLines: 6,\n        color: \"blue\",\n        fontSize: 16,\n        onChangeText: function onChangeText(text) {\n          setAnswerText(text);\n        },\n        defaultValue: allAnswers[index],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 29\n        }\n      }), React.createElement(Button, {\n        style: {\n          backgroundColor: 'green',\n          borderRadius: 10,\n          marginVertical: 8\n        },\n        mode: \"Contained\",\n        onPress: function onPress() {\n          setDialogConfirmAns(true);\n          setQuestionNumber(item.number);\n\n          if (answerText != \"\") {\n            var answerObject = {\n              user_id: LOGIN.userid,\n              date: moment().format('yyyy-MM-DD'),\n              answer: answerText,\n              number: item.number,\n              qt: item.qt,\n              year: year\n            };\n            setAnserError(false);\n            answer = answerObject;\n            item.answer = answerText;\n            updateAnswer();\n            setAnswerText(\"\");\n          } else {\n            setAnserError(true);\n          }\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          alignSelf: 'center',\n          color: 'white'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 33\n        }\n      }, \"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\\u0E2D\\u0E35\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\"))));\n    };\n\n    if (isLoading === false && managerList.length === 0) {\n      return React.createElement(View, {\n        style: {\n          alignItems: 'center',\n          marginTop: 48\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 24,\n          color: 'red',\n          justifyContent: 'center'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 21\n        }\n      }, \"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\"));\n    } else {\n      return React.createElement(FlatList, {\n        data: managerList,\n        extraData: managerList,\n        keyExtractor: function keyExtractor(item) {\n          return \"\" + item;\n        },\n        renderItem: renderItem,\n        ListHeaderComponent: function ListHeaderComponent() {\n          return React.createElement(View, {\n            style: {\n              backgroundColor: '#D3D3D3'\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 29\n            }\n          }, React.createElement(View, {\n            style: {\n              padding: 8,\n              backgroundColor: COLORS.primary,\n              width: '100%'\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 33\n            }\n          }, React.createElement(Text, {\n            style: {\n              alignSelf: 'center',\n              color: 'white',\n              fontSize: 20\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 37\n            }\n          }, \"\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19 \\u0E1C\\u0E39\\u0E49\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E16\\u0E32\\u0E21\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\")), React.createElement(Text, {\n            style: {\n              marginVertical: 4,\n              alignSelf: 'center',\n              color: 'red',\n              fontSize: 14\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 33\n            }\n          }, \"*** \\u0E01\\u0E14\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\\u0E17\\u0E38\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E01\\u0E48\\u0E2D\\u0E19\\u0E08\\u0E30\\u0E17\\u0E33\\u0E02\\u0E49\\u0E2D\\u0E43\\u0E2B\\u0E21\\u0E48 ***\"));\n        },\n        stickyHeaderIndices: [0],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 17\n        }\n      });\n    }\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 9\n    }\n  }, renderQuestionnaireManager({\n    navigation: navigation\n  }), managerList.length != 0 && (managerList[0].videoURL === undefined || managerList[0].videoURL === \"\") ? React.createElement(View, {\n    style: {\n      margin: 16\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 17\n    }\n  }, React.createElement(Button, {\n    style: {\n      backgroundColor: COLORS.primary,\n      borderRadius: 10,\n      marginVertical: 8\n    },\n    mode: \"Contained\",\n    onPress: function onPress() {\n      setIsEditVideo(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: {\n      alignSelf: 'center',\n      color: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 25\n    }\n  }, \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\"))) : managerList.length != 0 && managerList[0].videoURL != \"\" ? React.createElement(View, {\n    style: {\n      margin: 16,\n      flexDirection: 'row',\n      justifyContent: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 21\n    }\n  }, React.createElement(Button, {\n    style: {\n      flex: 1,\n      backgroundColor: COLORS.primary,\n      borderRadius: 10,\n      marginVertical: 8,\n      marginRight: 4\n    },\n    mode: \"Contained\",\n    onPress: function onPress() {\n      navigation.navigate('VideoWebView', {\n        videoURL: managerList[0].videoURL\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: {\n      alignSelf: 'center',\n      color: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 29\n    }\n  }, \"\\u0E14\\u0E39\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\")), React.createElement(Button, {\n    style: {\n      flex: 1,\n      backgroundColor: COLORS.primary,\n      borderRadius: 10,\n      marginVertical: 8,\n      marginLeft: 4\n    },\n    mode: \"Contained\",\n    onPress: function onPress() {\n      setIsEditVideo(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: {\n      alignSelf: 'center',\n      color: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 29\n    }\n  }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\"))) : null, React.createElement(Dialog.Container, {\n    visible: dialogConfirmAns,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }\n  }, React.createElement(Dialog.Title, {\n    style: {\n      fontSize: 20,\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 17\n    }\n  }, \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\"), React.createElement(Dialog.Description, {\n    style: {\n      fontSize: 18,\n      padding: 16\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 17\n    }\n  }, \"\\u0E2B\\u0E32\\u0E01\\u0E17\\u0E33\\u0E01\\u0E32\\u0E23\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E43\\u0E2B\\u0E49\\u0E04\\u0E25\\u0E34\\u0E01\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2D\\u0E35\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\"), React.createElement(Dialog.Button, {\n    label: \"\\u0E15\\u0E01\\u0E25\\u0E07\",\n    onPress: function onPress() {\n      setDialogConfirmAns(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 17\n    }\n  })), isLoading ? React.createElement(ActivityIndicator, {\n    style: {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    size: \"large\",\n    color: \"#0275d8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 17\n    }\n  }) : null, React.createElement(Dialog.Container, {\n    visible: isEditVideo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 14\n    }\n  }, React.createElement(Dialog.Title, {\n    style: {\n      fontSize: 20,\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 17\n    }\n  }, \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\"), React.createElement(TextInput, {\n    style: {\n      borderWidth: 1,\n      borderRadius: 5,\n      padding: 10,\n      marginHorizontal: 16\n    },\n    placeholder: \":url\",\n    placeholderTextColor: \"gray\",\n    multiline: true,\n    numberOfLines: 6,\n    color: \"blue\",\n    fontSize: 16,\n    onChangeText: function onChangeText(text) {\n      managerList[0].videoURL = text;\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 17\n    }\n  }), React.createElement(Dialog.Button, {\n    label: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",\n    onPress: function onPress() {\n      setIsEditVideo(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 17\n    }\n  }), React.createElement(Dialog.Button, {\n    label: \"\\u0E15\\u0E01\\u0E25\\u0E07\",\n    onPress: function onPress() {\n      var currentObject = {\n        userid: managerList[0].userid,\n        year: managerList[0].year,\n        number: managerList[0].number,\n        qt: managerList[0].qt,\n        answer: managerList[0].answer,\n        videoURL: managerList[0].videoURL,\n        date: moment(managerList[0].date).format('yyyy-MM-DD')\n      };\n      console.log(currentObject);\n      {\n        managerList[0].videoURL === undefined ? axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject).then(function (res) {\n          console.log(res.data);\n        }).catch(function (err) {\n          console.log(err);\n        }) : axiox.put('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject).then(function (res) {\n          console.log(res.data);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n      setIsEditVideo(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 17\n    }\n  })));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  video: {\n    alignSelf: 'center',\n    width: 320,\n    height: 200\n  },\n  buttons: {\n    backgroundColor: 'green',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\nexport default QuestionnaireManagerScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/QuestionnaireManagerScreen.js"],"names":["React","useState","useEffect","Button","Card","Icon","WebView","Video","Audio","Dialog","axiox","COLORS","moment","LOGIN","QuestionnaireManagerScreen","navigation","route","userId","userid","year","params","part","answer","video","useRef","play","current","playAsync","status","setStatus","isVideo","setIsVideo","managerList","setManagerList","questionNumber","setQuestionNumber","answerText","setAnswerText","isAnswerError","setAnserError","isEditVideo","setIsEditVideo","videoLink","setVideoLink","isLoading","setLoading","dialogConfirmAns","setDialogConfirmAns","allAnswers","getQuestionnaireManager","get","then","res","data","console","log","catch","err","postAnswer","post","number","updateAnswer","put","error","renderQuestionnaireManager","renderItem","item","index","margin","borderWidth","borderRadius","elevation","padding","backgroundColor","fontSize","fontWeight","qt","undefined","marginVertical","height","text","answerObject","user_id","date","format","alignSelf","color","length","alignItems","marginTop","justifyContent","primary","width","flex","videoURL","flexDirection","marginRight","navigate","marginLeft","position","left","right","top","bottom","marginHorizontal","currentObject","styles","StyleSheet","create","container","buttons"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, SafeAreaView, FlatList, StyleSheet, ActivityIndicator, ScrollView } from 'react-native';\nimport { Button, Card } from 'react-native-paper';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport { WebView } from 'react-native-webview';\nimport { Video, Audio } from 'expo-av';\n\nimport Dialog from \"react-native-dialog\";\nimport axiox from 'axios';\nimport { COLORS } from '../constants/theme';\n\nimport moment from 'moment';\nimport 'moment/locale/th';\n\nimport { LOGIN } from '../constants/variables';\n\nconst QuestionnaireManagerScreen = ({ navigation, route }) => {\n\n    let userId = LOGIN.userid;\n    let year = route.params.year;\n    let part = route.params.part;\n\n    var answer;\n\n    const video = React.useRef(null);\n    const play = () => video.current && video.current.playAsync()\n    const [status, setStatus] = React.useState({});\n    const [isVideo, setIsVideo] = useState(false);\n\n    const [managerList, setManagerList] = useState([]);\n    const [questionNumber, setQuestionNumber] = useState(0);\n\n    // Answer\n    const [answerText, setAnswerText] = useState(\"\");\n    const [isAnswerError, setAnserError] = useState(false);\n\n    // VideoURL\n    const [isEditVideo, setIsEditVideo] = useState(false);\n    const [videoLink, setVideoLink] = useState(\"\");\n\n    const [isLoading, setLoading] = useState(false);\n    const [dialogConfirmAns, setDialogConfirmAns] = useState(false);\n\n    var allAnswers = [];\n\n    const getQuestionnaireManager = () => {\n        axiox.get('https://program-api.herokuapp.com/' + year + '/' + part + '/manager/' + userId)\n            .then(res => {\n                const data = res.data;\n                console.log(data);\n                setManagerList(data);\n                { setLoading(false) }\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    };\n\n    const postAnswer = () => {\n        console.log(answer);\n        axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/manager/' + userId, answer)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n\n            })\n            .catch(err => {\n                console.log(err)\n            });\n    }\n\n    const updateAnswer = () => {\n        console.log(answer);\n        axiox\n            .put('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/manager/' + userId, answer)\n            .then(res => {\n                console.log(\"response: \", res)\n                // do something about response\n            })\n            .catch(err => {\n                console.error(err)\n            })\n    }\n\n\n    useEffect(() => {\n        setLoading(true);\n        getQuestionnaireManager();\n\n    }, []);\n\n    // Manager API\n\n    const renderQuestionnaireManager = ({ navigation }) => {\n\n        const renderItem = ({ item, index }) => {\n            // const textInfo = \"บันทึกคำตอบแล้ว\\nเมื่อทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง\"\n\n            allAnswers[index] = item.answer;\n\n            return (\n                <View style={{\n                    margin: 8,\n                    borderWidth: 1,\n                    // borderColor: 'gray',\n                    borderRadius: 5,\n                    elevation: 5,\n                    padding: 8,\n                    backgroundColor: '#fff'\n                    // borderColor: COLORS.primary\n                    // \n                }} >\n                    <Text style={{\n                        fontSize: 16,\n                        fontWeight: 'bold',\n\n                    }}>{item.number}. {item.qt}</Text>\n\n                    {item.answer === undefined ?\n                        <View>\n                            <TextInput\n                                style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                // textContentType='telephoneNumber'\n                                placeholder=\"คำตอบ\"\n                                placeholderTextColor=\"gray\"\n                                multiline\n                                numberOfLines={6}\n                                color='blue'\n                                fontSize={16}\n                                onChangeText={text => {\n                                    // setAnserError(false);\n                                    setAnswerText(text)\n                                }}\n                            />\n                            <Button\n                                style={{\n                                    backgroundColor: 'gray',\n                                    borderRadius: 10,\n                                    marginVertical: 8\n                                }}\n                                mode=\"Contained\"\n                                onPress={() => {\n                                    // dialogConfirmAnswer({ index });\n                                    setDialogConfirmAns(true);\n\n                                    setQuestionNumber(item.number);\n                                    if (answerText != \"\") {\n                                        var answerObject = {\n                                            user_id: LOGIN.userid,\n                                            date: moment().format('yyyy-MM-DD'),\n                                            // video_url: videoURLText,\n                                            answer: answerText,\n                                            number: item.number,\n                                            qt: item.qt,\n                                            year: year\n                                        };\n\n                                        setAnserError(false);\n                                        setAnswerText(\"\");\n                                        // setVideoURLText(\"\");\n                                        answer = answerObject;\n                                        item.answer = answerText;\n                                        // setDialogConfirmAns(false);\n                                        postAnswer();\n                                    }\n                                    else {\n                                        setAnserError(true);\n                                    }\n\n                                    // console.log(questionAllStaffList);\n\n                                }}>\n                                <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบ</Text>\n\n                            </Button>\n                        </View>\n\n                        :\n\n                        <View>\n                            <TextInput\n                                style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                // textContentType='telephoneNumber'\n                                placeholder=\"คำตอบ\"\n                                placeholderTextColor=\"gray\"\n                                multiline\n                                numberOfLines={6}\n                                color='blue'\n                                fontSize={16}\n                                // text=\"dfsdfsdf\"\n                                onChangeText={text => {\n                                    // setAnserError(false);\n                                    setAnswerText(text);\n                                }}\n                                defaultValue={allAnswers[index]}\n                            />\n\n                            <Button\n                                style={{\n                                    backgroundColor: 'green',\n                                    borderRadius: 10,\n                                    marginVertical: 8\n                                }}\n                                mode=\"Contained\"\n                                onPress={() => {\n                                    // dialogConfirmAnswer({ index });\n                                    setDialogConfirmAns(true);\n\n                                    setQuestionNumber(item.number);\n                                    if (answerText != \"\") {\n                                        var answerObject = {\n                                            user_id: LOGIN.userid,\n                                            date: moment().format('yyyy-MM-DD'),\n                                            // video_url: videoURLText,\n                                            answer: answerText,\n                                            number: item.number,\n                                            qt: item.qt,\n                                            year: year\n                                        };\n                                        // setDialogAnswer(false);\n                                        setAnserError(false);\n                                       \n                                        answer = answerObject;\n                                        item.answer = answerText;\n                                        updateAnswer();\n                                        setAnswerText(\"\");\n\n                                        // setDialogConfirmAns(false);\n                                        // setAnswer({});\n                                    }\n                                    else {\n                                        setAnserError(true);\n                                    }\n\n                                    // console.log(questionAllStaffList);\n\n                                }}>\n                                <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบอีกครั้ง</Text>\n\n                            </Button>\n                        </View>\n                    }\n\n                </View>\n\n            );\n        }\n\n        if (isLoading === false && managerList.length === 0) {\n            return (\n                <View style={{\n                    alignItems: 'center',\n                    marginTop: 48\n                }}>\n                    <Text style={{\n                        fontSize: 24,\n                        color: 'red',\n                        justifyContent: 'center',\n                    }}>ไม่พบแบบประเมิน</Text>\n                </View>\n            );\n\n        } else {\n\n            return (\n                <FlatList\n                    data={managerList}\n                    extraData={managerList}\n                    keyExtractor={(item) => `${item}`}\n                    renderItem={renderItem}\n                    ListHeaderComponent={() => {\n                        return (\n                            <View style={{ backgroundColor: '#D3D3D3' }}>\n                                <View style={{ padding: 8, backgroundColor: COLORS.primary, width: '100%' }}>\n                                    <Text style={{ alignSelf: 'center', color: 'white', fontSize: 20 }}>\n                                        แบบประเมิน ผู้จัดการถามพนักงาน\n                                    </Text>\n                                </View>\n                                <Text style={{ marginVertical: 4, alignSelf: 'center', color: 'red', fontSize: 14 }}>*** กดส่งคำตอบทุกครั้งก่อนจะทำข้อใหม่ ***</Text>\n                                {/* <Text style={{ marginBottom: 4, alignSelf: 'center', color: 'red', fontSize: 14 }}>เมื่อครบทุกข้อให้คลิก ส่งคำตอบ</Text> */}\n                            </View>\n\n                        );\n                    }}\n                    stickyHeaderIndices={[0]}\n\n                />\n\n            );\n        }\n    }\n\n    return (\n        <SafeAreaView style={{ flex: 1, }}>\n\n            {renderQuestionnaireManager({ navigation })}\n\n            {managerList.length != 0 && (managerList[0].videoURL === undefined || managerList[0].videoURL === \"\") ?\n\n                <View style={{ margin: 16 }}>\n                    <Button style={{\n                        backgroundColor: COLORS.primary,\n                        borderRadius: 10,\n                        marginVertical: 8\n                    }}\n                        mode=\"Contained\"\n                        onPress={() => { setIsEditVideo(true) }}>\n                        <Text style={{ alignSelf: 'center', color: 'white' }}>เพิ่มลิ้งค์วิดีโอ</Text>\n                    </Button>\n                </View>\n\n                :\n                managerList.length != 0 && managerList[0].videoURL != \"\" ?\n                    <View style={{ margin: 16, flexDirection: 'row', justifyContent: 'center' }}>\n                        <Button style={{\n                            flex: 1,\n                            backgroundColor: COLORS.primary,\n                            borderRadius: 10,\n                            marginVertical: 8,\n                            marginRight: 4\n\n                        }}\n                            mode=\"Contained\"\n                            onPress={() => {\n                                // console.log(questionManagerList[0].videoURL);\n                                navigation.navigate('VideoWebView', { videoURL: managerList[0].videoURL })\n\n                            }}>\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>ดูวิดีโอ</Text>\n                        </Button>\n\n                        <Button style={{\n                            flex: 1,\n                            backgroundColor: COLORS.primary,\n                            borderRadius: 10,\n                            marginVertical: 8,\n                            marginLeft: 4\n                        }}\n                            mode=\"Contained\"\n                            onPress={() => { setIsEditVideo(true) }}>\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>แก้ไขลิ้งค์</Text>\n                        </Button>\n                    </View>\n                    :\n                    null\n            }\n\n            {/* Dialog Confirm Answer */}\n            <Dialog.Container visible={dialogConfirmAns}>\n                <Dialog.Title style={{ fontSize: 20, fontWeight: 'bold' }}>บันทึกข้อมูลสำเร็จ</Dialog.Title>\n                <Dialog.Description style={{ fontSize: 18, padding: 16 }}>หากทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง</Dialog.Description>\n\n                <Dialog.Button\n                    label=\"ตกลง\"\n                    onPress={() => {\n\n                        setDialogConfirmAns(false);\n                    }} />\n\n            </Dialog.Container>\n\n            {/* Loading */}\n            {isLoading ?\n\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                null\n            }\n\n             {/* Upload Video */}\n             <Dialog.Container visible={isEditVideo}>\n                <Dialog.Title style={{ fontSize: 20, fontWeight: 'bold' }}>เพิ่มลิ้งค์วิดีโอ</Dialog.Title>\n                {/* <Dialog.Description style={{ fontSize: 18, padding: 16 }}>หากทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง</Dialog.Description> */}\n                <TextInput\n                    style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginHorizontal: 16 }}\n                    // textContentType='telephoneNumber'\n                    placeholder=\":url\"\n                    placeholderTextColor=\"gray\"\n                    multiline\n                    numberOfLines={6}\n                    color='blue'\n                    fontSize={16}\n                    onChangeText={text => {\n                        // setAnserError(false);\n                        // setVideoLink(text)\n                        managerList[0].videoURL = text\n                    }}\n                />\n                <Dialog.Button\n                    label=\"ยกเลิก\"\n                    onPress={() => {\n                        setIsEditVideo(false);\n                    }} />\n\n                <Dialog.Button\n                    label=\"ตกลง\"\n                    onPress={() => {\n                        const currentObject = {\n                            userid: managerList[0].userid,\n                            year: managerList[0].year,\n                            number: managerList[0].number,\n                            qt: managerList[0].qt,\n                            answer: managerList[0].answer,\n                            videoURL: managerList[0].videoURL,\n                            date: moment(managerList[0].date).format('yyyy-MM-DD'),\n\n                        }\n                        console.log(currentObject);\n                        {\n                            managerList[0].videoURL === undefined ?\n                                axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject)\n                                    .then(res => {\n                                        console.log(res.data);\n                                    })\n                                    .catch(err => {\n                                        console.log(err)\n                                    })\n                                :\n                                axiox.put('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject)\n                                    .then(res => {\n                                        // storeData(res.data)\n                                        console.log(res.data);\n\n                                    })\n                                    .catch(err => {\n                                        console.log(err)\n                                    });\n                        }\n                        setIsEditVideo(false);\n                    }} />\n\n\n            </Dialog.Container>\n\n        </SafeAreaView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        // backgroundColor: 'black',\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    video: {\n        alignSelf: 'center',\n        width: 320,\n        height: 200,\n    },\n    buttons: {\n        backgroundColor: 'green',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n})\n\nexport default QuestionnaireManagerScreen;"]},"metadata":{},"sourceType":"module"}