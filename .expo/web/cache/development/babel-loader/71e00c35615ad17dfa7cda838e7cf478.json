{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/drift/Documents/ReactNative/cal-assessment/src/screens/StaffCommentScreen.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { Button, Card } from 'react-native-paper';\nimport { CheckBox } from 'react-native-elements';\nimport axiox from 'axios';\nimport { COLORS, SIZES } from \"../constants/theme\";\nimport moment from 'moment';\nimport 'moment/locale/th';\nimport { MAIN_URL, USER } from \"../constants/variables\";\n\nvar StaffCommentScreen = function StaffCommentScreen(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var userId = USER.userid;\n  var managerID = route.params.managerID;\n  var year = route.params.year;\n  var part = route.params.part;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      answer = _useState2[0],\n      setAnswer = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loadingPage = _useState6[0],\n      setLoadingPage = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      postLoading = _useState8[0],\n      setPostLoading = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      answerForManger = _useState10[0],\n      setAnswerFormanager = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      allAnswer = _useState12[0],\n      setAllAnswer = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      questionWithAnswer = _useState14[0],\n      setQuestionWithAnswer = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      question = _useState16[0],\n      setQuestion = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      checked = _useState18[0],\n      setChecked = _useState18[1];\n\n  var _useState19 = useState(''),\n      _useState20 = _slicedToArray(_useState19, 2),\n      selectedColor = _useState20[0],\n      setSelectedColor = _useState20[1];\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      list = _useState22[0],\n      setList = _useState22[1];\n\n  var _useState23 = useState(0),\n      _useState24 = _slicedToArray(_useState23, 2),\n      checkIndex = _useState24[0],\n      setCheckIndex = _useState24[1];\n\n  useEffect(function () {\n    USER.position === \"ผู้จัดการ\" ? getAnswerWithManagerId() : getAllQuestionWithAnswer();\n  }, []);\n\n  var getAllQuestionWithAnswer = function getAllQuestionWithAnswer() {\n    setLoadingPage(true);\n    axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + managerID + '/' + userId).then(function (res) {\n      setQuestionWithAnswer(res.data);\n      setLoadingPage(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoadingPage(false);\n    });\n  };\n\n  var getAllQuestion = function getAllQuestion() {\n    setLoadingPage(true);\n    axiox.get(MAIN_URL + '/question/comment/' + year + '/' + part).then(function (res) {\n      setQuestion(res.data);\n      setLoadingPage(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoadingPage(false);\n    });\n  };\n\n  var getAllAnswer = function getAllAnswer() {\n    setLoading(true);\n    axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/department/' + USER.department).then(function (res) {\n      setAllAnswer(res.data);\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoading(false);\n    });\n  };\n\n  var getAnswerWithManagerIdAndNumber = function getAnswerWithManagerIdAndNumber(_ref2) {\n    var number = _ref2.number;\n    setLoading(true);\n    axiox.get(MAIN_URL + '/answer/comment/manager/' + year + '/' + part + '/' + userId + '/' + number).then(function (res) {\n      console.log(res.data);\n      setAnswer(res.data);\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoading(false);\n    });\n  };\n\n  var getAnswerWithManagerId = function getAnswerWithManagerId() {\n    setLoading(true);\n    axiox.get(MAIN_URL + '/answer/comment/manager/' + year + '/' + part + '/' + userId).then(function (res) {\n      console.log(res.data);\n      mapAnserToGroup({\n        data: res.data\n      });\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n      setLoading(false);\n    });\n  };\n\n  var mapAnserToGroup = function mapAnserToGroup(data) {\n    var newArray = [];\n    var lastUserid = '';\n    data.map(function (element) {\n      if (lastUserid != '') {\n        if (element.userid === lastUserid) {\n          newArray.push();\n        }\n      }\n    });\n  };\n\n  var postAnswer = function postAnswer(_ref3) {\n    var dataSend = _ref3.dataSend,\n        number = _ref3.number;\n    setLoading(true);\n    axiox.post(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + userId + '/' + number, dataSend).then(function (res) {\n      alert(\"บันทึกข้อมูลสำเร็จ\");\n      setLoading(false);\n    }).catch(function (err) {\n      console.log(err);\n      alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n      setLoading(false);\n    });\n  };\n\n  var renderManagerCheck = function renderManagerCheck() {\n    var renderItem = function renderItem(_ref4) {\n      var item = _ref4.item,\n          index = _ref4.index;\n      return React.createElement(View, {\n        style: {\n          marginHorizontal: 16,\n          marginVertical: 8\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          fontWeight: 'bold',\n          paddingHorizontal: 8\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, item.qt), React.createElement(View, {\n        style: {\n          marginVertical: 8,\n          borderRadius: 5,\n          borderColor: 'gray',\n          borderWidth: .3\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }\n      }, item.reveal === 0 ? React.createElement(Text, {\n        style: {\n          paddingHorizontal: 8,\n          fontSize: 12,\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }\n      }, item.name, \" \", item.lastname, \" (\", item.nickname, \") [\", item.department, \"] \", React.createElement(Text, {\n        style: {\n          fontSize: 12,\n          color: 'gray'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 168\n        }\n      }, \" - \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", moment(item.date).format('ll'))) : React.createElement(Text, {\n        style: {\n          paddingHorizontal: 8,\n          fontSize: 12,\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 29\n        }\n      }, \"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D \", React.createElement(Text, {\n        style: {\n          fontSize: 12,\n          color: 'gray'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 117\n        }\n      }, \" - \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", moment(item.date).format('ll'))), React.createElement(Text, {\n        style: {\n          color: 'green',\n          paddingHorizontal: 16,\n          paddingVertical: 4\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 25\n        }\n      }, item.answer)));\n    };\n\n    var renderComment = function renderComment(_ref5) {\n      var item = _ref5.item,\n          index = _ref5.index;\n      return React.createElement(View, {\n        style: {\n          marginVertical: 8\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 17\n        }\n      }, item.reveal === 0 ? React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 25\n        }\n      }, item.name, \" \", item.lastname, \" (\", item.nickname, \") [\", item.department, \"] \", React.createElement(Text, {\n        style: {\n          fontSize: 12,\n          color: 'gray'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 142\n        }\n      }, \" - \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", moment(item.date).format('ll'))) : React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 25\n        }\n      }, \"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D \", React.createElement(Text, {\n        style: {\n          fontSize: 12,\n          color: 'gray'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 91\n        }\n      }, \" - \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", moment(item.date).format('ll'))), React.createElement(View, {\n        style: {\n          marginVertical: 8,\n          borderRadius: 5,\n          borderColor: 'gray',\n          borderWidth: .3\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'green',\n          padding: 8\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 25\n        }\n      }, item.answer)));\n    };\n\n    return loadingPage ? React.createElement(ActivityIndicator, {\n      style: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      size: \"large\",\n      color: \"#0275d8\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    }) : answerForManger.length != 0 ? React.createElement(View, {\n      style: {\n        marginBottom: 18\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }\n    }, React.createElement(FlatList, {\n      data: answerForManger,\n      extraData: answerForManger,\n      keyExtractor: function keyExtractor(item, index) {\n        return \"\" + index;\n      },\n      renderItem: renderItem,\n      ListHeaderComponent: React.createElement(View, {\n        style: {\n          margin: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: {\n          alignSelf: 'center',\n          fontSize: 14\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 37\n        }\n      }, \"\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\")),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 25\n      }\n    })) : React.createElement(Text, {\n      style: {\n        fontSize: 16,\n        alignSelf: 'center',\n        marginTop: 50\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }\n    }, \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\");\n  };\n\n  var renderUserComment = function renderUserComment() {\n    var renderItem = function renderItem(_ref6) {\n      var item = _ref6.item,\n          index = _ref6.index;\n      return React.createElement(View, {\n        style: {\n          padding: 8,\n          margin: 15,\n          backgroundColor: 'white',\n          borderColor: 'gray',\n          borderWidth: .3\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 21\n        }\n      }, item.number, \". \", item.qt), React.createElement(TextInput, {\n        style: {\n          backgroundColor: 'white',\n          marginTop: 20,\n          borderWidth: 1,\n          padding: 10,\n          borderRadius: 5,\n          marginVertical: 8,\n          height: 150\n        },\n        placeholder: \"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",\n        placeholderTextColor: \"gray\",\n        multiline: true,\n        numberOfLines: 6,\n        color: \"blue\",\n        fontSize: 16,\n        onChangeText: function onChangeText(text) {\n          answer[index] = text;\n        },\n        defaultValue: item.answer,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 21\n        }\n      }), React.createElement(Button, {\n        style: {\n          backgroundColor: 'green',\n          borderRadius: 10,\n          marginVertical: 8\n        },\n        mode: \"Contained\",\n        onPress: function onPress() {\n          var dataSend = {\n            manager_id: managerID,\n            reveal: checked,\n            answer: answer[index],\n            date: moment().format('yyyy-MM-DD'),\n            department: USER.department\n          };\n          console.log(dataSend);\n          console.log(\"year\", year);\n          console.log(\"part\", part);\n          console.log(\"number\", item.number);\n          console.log(\"userid\", USER.userid);\n          postAnswer({\n            dataSend: dataSend,\n            number: item.number\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          alignSelf: 'center',\n          color: 'white'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 25\n        }\n      }, \"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\")));\n    };\n\n    return loadingPage ? React.createElement(ActivityIndicator, {\n      style: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      size: \"large\",\n      color: \"#0275d8\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 17\n      }\n    }) : questionWithAnswer.length != 0 ? React.createElement(FlatList, {\n      data: questionWithAnswer,\n      extraData: questionWithAnswer,\n      keyExtractor: function keyExtractor(item, index) {\n        return \"\" + index;\n      },\n      renderItem: renderItem,\n      ListHeaderComponent: React.createElement(View, {\n        style: {\n          margin: 16,\n          backgroundColor: 'white',\n          paddingBottom: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 16,\n          margin: 16\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 33\n        }\n      }, \"* \\u0E01\\u0E48\\u0E2D\\u0E19\\u0E15\\u0E2D\\u0E1A\\u0E04\\u0E33\\u0E16\\u0E32\\u0E21 \\u0E17\\u0E48\\u0E32\\u0E19\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E43\\u0E2B\\u0E49\\u0E1C\\u0E39\\u0E49\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E17\\u0E23\\u0E32\\u0E1A\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48\"), React.createElement(CheckBox, {\n        title: \"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\",\n        checked: checked,\n        onPress: function onPress() {\n          setChecked(!checked);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 33\n        }\n      })),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 21\n      }\n    }) : React.createElement(Text, {\n      style: {\n        fontSize: 16,\n        alignSelf: 'center',\n        marginTop: 50\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 21\n      }\n    }, \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\");\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      backgroundColor: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 9\n    }\n  }, USER.position === 'ผู้จัดการ' ? renderManagerCheck(navigation) : renderUserComment(navigation));\n};\n\nvar styles = StyleSheet.create({\n  checkboxContainer: {\n    backgroundColor: 'white',\n    borderColor: 'gray',\n    borderWidth: 3,\n    flexDirection: \"row\",\n    marginBottom: 20\n  },\n  checkbox: {\n    width: 20,\n    height: 20,\n    alignSelf: \"center\"\n  },\n  label: {\n    margin: 8\n  }\n});\nexport default StaffCommentScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/StaffCommentScreen.js"],"names":["React","useState","useEffect","Button","Card","CheckBox","axiox","COLORS","SIZES","moment","MAIN_URL","USER","StaffCommentScreen","navigation","route","userId","userid","managerID","params","year","part","answer","setAnswer","loading","setLoading","loadingPage","setLoadingPage","postLoading","setPostLoading","answerForManger","setAnswerFormanager","allAnswer","setAllAnswer","questionWithAnswer","setQuestionWithAnswer","question","setQuestion","checked","setChecked","selectedColor","setSelectedColor","list","setList","checkIndex","setCheckIndex","position","getAnswerWithManagerId","getAllQuestionWithAnswer","get","then","res","data","catch","err","console","log","getAllQuestion","getAllAnswer","department","getAnswerWithManagerIdAndNumber","number","mapAnserToGroup","newArray","lastUserid","map","element","push","postAnswer","dataSend","post","alert","renderManagerCheck","renderItem","item","index","marginHorizontal","marginVertical","fontSize","fontWeight","paddingHorizontal","qt","borderRadius","borderColor","borderWidth","reveal","name","lastname","nickname","color","date","format","paddingVertical","renderComment","padding","left","right","top","bottom","alignItems","justifyContent","length","marginBottom","margin","alignSelf","marginTop","renderUserComment","backgroundColor","height","text","manager_id","paddingBottom","flex","styles","StyleSheet","create","checkboxContainer","flexDirection","checkbox","width","label"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, FlatList, StyleSheet, TouchableOpacity, ActivityIndicator } from 'react-native';\nimport { Button, Card } from 'react-native-paper';\nimport { CheckBox } from 'react-native-elements'\n\nimport axiox from 'axios';\nimport { COLORS, SIZES } from '../constants/theme';\n\nimport moment from 'moment';\nimport 'moment/locale/th';\nimport { MAIN_URL, USER } from '../constants/variables';\n\nconst StaffCommentScreen = ({ navigation, route }) => {\n\n    // let sheetID = route.params.sheetID;\n    let userId = USER.userid;\n    // console.log(userId)\n    let managerID = route.params.managerID;\n    let year = route.params.year;\n    let part = route.params.part;\n\n    const [answer, setAnswer] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [loadingPage, setLoadingPage] = useState(false);\n    const [postLoading, setPostLoading] = useState(false);\n    const [answerForManger, setAnswerFormanager] = useState([]);\n\n    const [allAnswer, setAllAnswer] = useState([]);\n    const [questionWithAnswer, setQuestionWithAnswer] = useState([]);\n    const [question, setQuestion] = useState([]);\n    // var checkArray = [];\n    const [checked, setChecked] = useState(false);\n    // const [itemSelected, setItemSeleced] = useState(0);\n    const [selectedColor, setSelectedColor] = useState('');\n    const [list, setList] = useState([]);\n    const [checkIndex, setCheckIndex] = useState(0);\n    // console.log(USER.position)\n\n    useEffect(() => {\n        // setLoading(true);\n        // console.log(USER.position)\n        USER.position === \"ผู้จัดการ\" ? getAnswerWithManagerId() : getAllQuestionWithAnswer()\n\n    }, []);\n\n    const getAllQuestionWithAnswer = () => {\n        setLoadingPage(true);\n        // console.log(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + managerID + '/' + userId)\n        // console.log(\"getAllQuestionWithAnswer\");\n        axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + managerID + '/' + userId)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n\n                setQuestionWithAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoadingPage(false);\n                // res.data.map(item => {\n                //     checkArray.push({\n                //         check: false\n                //     });\n                // console.log(checked)\n                // })\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoadingPage(false);\n\n            });\n    };\n\n    const getAllQuestion = () => {\n        setLoadingPage(true);\n        axiox.get(MAIN_URL + '/question/comment/' + year + '/' + part)\n            .then(res => {\n                // console.log(res.data);\n                // console.log(\"ALL DATA\", res.data);\n                setQuestion(res.data)\n\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoadingPage(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoadingPage(false);\n\n            });\n    }\n\n    const getAllAnswer = () => {\n        setLoading(true);\n        // console.log(\"getAll\")\n        axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/department/' + USER.department)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                // console.log(\"ALL DATA\", res.data);\n                setAllAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    };\n\n    const getAnswerWithManagerIdAndNumber = ({ number }) => {\n        setLoading(true);\n\n        // console.log(\"get\", userId)\n        axiox.get(MAIN_URL + '/answer/comment/manager/' + year + '/' + part + '/' + userId + '/' + number)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n                setAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const getAnswerWithManagerId = () => {\n        setLoading(true);\n\n        // console.log(\"get\", userId)\n        axiox.get(MAIN_URL + '/answer/comment/manager/' + year + '/' + part + '/' + userId)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n                mapAnserToGroup({ data: res.data })\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const mapAnserToGroup = (data) => {\n        var newArray = [];\n        var lastUserid = '';\n        data.map(element => {\n            if(lastUserid != ''){\n                if(element.userid === lastUserid){\n\n                    newArray.push()\n                }\n            }\n         \n        })\n    }\n\n    const postAnswer = ({ dataSend, number }) => {\n        setLoading(true);\n        axiox.post(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + userId + '/' + number, dataSend)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                // console.log(res.data);\n                alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const renderManagerCheck = () => {\n        const renderItem = ({ item, index }) => {\n            // console.log(item)\n            return (\n                <View style={{ marginHorizontal: 16, marginVertical: 8 }}>\n                    <Text style={{ fontSize: 15, fontWeight: 'bold', paddingHorizontal: 8 }}>{item.qt}</Text>\n                    <View style={{ marginVertical: 8, borderRadius: 5, borderColor: 'gray', borderWidth: .3 }}>\n                        {item.reveal === 0 ?\n                            <Text style={{ paddingHorizontal: 8, fontSize: 12, fontWeight: 'bold' }}>{item.name} {item.lastname} ({item.nickname}) [{item.department}] <Text style={{ fontSize: 12, color: 'gray' }}> - วันที่ {moment(item.date).format('ll')}</Text></Text>\n                            :\n                            <Text style={{ paddingHorizontal: 8, fontSize: 12, fontWeight: 'bold' }}>ไม่เปิดเผยชื่อ <Text style={{ fontSize: 12, color: 'gray' }}> - วันที่ {moment(item.date).format('ll')}</Text></Text>\n                        }\n\n                        <Text style={{ color: 'green', paddingHorizontal: 16, paddingVertical: 4 }}>{item.answer}</Text>\n                    </View>\n                </View>\n            )\n            // <View>\n            //     <TouchableOpacity\n            //         style={selectedColor === index ? { borderRadius: 10, backgroundColor: 'green', padding: 10, margin: 10, } : { borderRadius: 10, borderColor: 'gray', borderWidth: .3, backgroundColor: '#F8F8FF', padding: 10, margin: 10, }}\n            //         onPress={() => {\n            //             setAnswer([]);\n            //             setSelectedColor(index);\n            //             setCheckIndex(index);\n            //             // console.log(item.number)\n            //             getAnswerWithManagerIdAndNumber({ number: item.number });\n            //         }}\n            //     >\n            //         <Text style={selectedColor === index ? { color: 'white', fontSize: 16 } : { color: 'black', fontSize: 16 }}>{index + 1}.  {item.qt}\n\n            //             {/* {\n            //             item.reveal != 1 ?\n            //                 <Text style={{ fontSize: 14, color: 'blue' }}> {item.qt} {item.lastname} ({item.nickname}) ( แผนก/สาขา {item.department} )</Text>\n            //                 :\n            //                 <Text style={{ fontSize: 14, color: 'blue' }}> ไม่เปิดเผยชื่อ</Text>\n            //         } */}\n            //         </Text>\n            //     </TouchableOpacity>\n            //     {checkIndex === index ?\n            //         !loading ?\n            //             answer.length != 0 ?\n            //                 <View style={{ padding: 16, margin: 8, borderRadius: 10, borderWidth: .3, borderColor: 'gray' }}>\n            //                     <FlatList\n            //                         data={answer}\n            //                         extraData={answer}\n            //                         keyExtractor={(item, index) => `${index}`}\n            //                         renderItem={renderComment}\n            //                         ListHeaderComponent={\n            //                             <Text style={{ marginBottom: 16, alignSelf: 'center', fontSize: 14 }}>ความคิดเห็นทั้งหมด</Text>\n            //                         }\n            //                     />\n            //                 </View>\n            //                 :\n            //                 selectedColor != '' ?\n            //                     <View style={{ padding: 16, margin: 8, borderRadius: 10, borderWidth: .3, borderColor: 'gray' }}>\n            //                         <Text style={{ alignSelf: 'center' }}>ไม่มีความคิดเห็น</Text>\n            //                     </View>\n            //                     :\n            //                     null\n            //             :\n            //             <ActivityIndicator />\n\n            //         :\n            //         null\n            //     }\n            // </View>\n            // )\n        }\n\n        const renderComment = ({ item, index }) => {\n            return (\n                <View style={{ marginVertical: 8 }}>\n                    {item.reveal === 0 ?\n                        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>{item.name} {item.lastname} ({item.nickname}) [{item.department}] <Text style={{ fontSize: 12, color: 'gray' }}> - วันที่ {moment(item.date).format('ll')}</Text></Text>\n                        :\n                        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>ไม่เปิดเผยชื่อ <Text style={{ fontSize: 12, color: 'gray' }}> - วันที่ {moment(item.date).format('ll')}</Text></Text>\n                    }\n                    <View style={{ marginVertical: 8, borderRadius: 5, borderColor: 'gray', borderWidth: .3 }}>\n                        <Text style={{ color: 'green', padding: 8 }}>{item.answer}</Text>\n                    </View>\n                </View>\n            );\n        };\n\n        return (\n            loadingPage ?\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                answerForManger.length != 0 ?\n                    <View style={{ marginBottom: 18 }}>\n                        <FlatList\n                            data={answerForManger}\n                            extraData={answerForManger}\n                            keyExtractor={(item, index) => `${index}`}\n                            renderItem={renderItem}\n                            ListHeaderComponent={\n                                <View style={{ margin: 16 }}>\n                                    <Text style={{ alignSelf: 'center', fontSize: 14 }}>ความคิดเห็นทั้งหมด</Text>\n                                </View>\n\n                            }\n                        />\n                    </View>\n                    :\n                    <Text style={{ fontSize: 16, alignSelf: 'center', marginTop: 50 }}>ไม่มีข้อมูล</Text>\n        )\n    }\n\n    const renderUserComment = () => {\n        const renderItem = ({ item, index }) => {\n            return (\n                <View style={{ padding: 8, margin: 15, backgroundColor: 'white', borderColor: 'gray', borderWidth: .3 }}>\n                    <Text style={{ fontSize: 16 }}>{item.number}. {item.qt}</Text>\n                    {/* <Text style={{ color: 'red' }}>*ผู้จัดการของแผนกคุณเท่านั้นที่จะเห็นคำตอบ แต่จะไม่รู้ว่าใครเป็นคนตอบ</Text> */}\n\n                    <TextInput\n                        style={{ backgroundColor: 'white', marginTop: 20, borderWidth: 1, padding: 10, borderRadius: 5, marginVertical: 8, height: 150 }}\n                        // textContentType='telephoneNumber'\n                        placeholder=\"คำตอบ\"\n                        placeholderTextColor=\"gray\"\n                        multiline\n                        numberOfLines={6}\n                        color='blue'\n                        fontSize={16}\n                        onChangeText={text => {\n                            answer[index] = text;\n                        }}\n                        defaultValue={item.answer}\n                    />\n\n                    <Button\n                        style={{\n                            backgroundColor: 'green',\n                            borderRadius: 10,\n                            marginVertical: 8\n                        }}\n                        mode=\"Contained\"\n                        onPress={() => {\n\n                            const dataSend = {\n                                manager_id: managerID,\n                                reveal: checked,\n                                answer: answer[index],\n                                date: moment().format('yyyy-MM-DD'),\n                                department: USER.department\n                            }\n                            console.log(dataSend)\n                            console.log(\"year\", year)\n                            console.log(\"part\", part)\n                            console.log(\"number\", item.number)\n                            console.log(\"userid\", USER.userid)\n                            postAnswer({ dataSend, number: item.number });\n                        }}\n                    >\n                        <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบ</Text>\n                    </Button>\n                </View>\n            )\n        }\n\n        return (\n            loadingPage ?\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                questionWithAnswer.length != 0 ?\n                    <FlatList\n                        data={questionWithAnswer}\n                        extraData={questionWithAnswer}\n                        keyExtractor={(item, index) => `${index}`}\n                        renderItem={renderItem}\n                        ListHeaderComponent={\n                            <View style={{ margin: 16, backgroundColor: 'white', paddingBottom: 16 }}>\n                                <Text style={{ fontSize: 16, margin: 16 }}>* ก่อนตอบคำถาม ท่านต้องการเปิดเผยชื่อให้ผู้จัดการทราบหรือไม่</Text>\n                                <CheckBox\n                                    title='ไม่เปิดเผยชื่อ'\n                                    checked={checked}\n                                    onPress={() => {\n                                        setChecked(!checked)\n                                        // console.log(checked);\n                                    }}\n                                />\n                            </View>\n                        }\n                    />\n                    :\n                    <Text style={{ fontSize: 16, alignSelf: 'center', marginTop: 50 }}>ไม่มีข้อมูล</Text>\n        )\n    }\n\n    return (\n        <View style={{ flex: 1, backgroundColor: 'white' }}>\n\n            {USER.position === 'ผู้จัดการ' ?\n                renderManagerCheck(navigation)\n                :\n                renderUserComment(navigation)\n            }\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    checkboxContainer: {\n        backgroundColor: 'white',\n        borderColor: 'gray',\n        borderWidth: 3,\n        flexDirection: \"row\",\n        marginBottom: 20,\n    },\n    checkbox: {\n\n        width: 20,\n        height: 20,\n        alignSelf: \"center\",\n    },\n    label: {\n        margin: 8,\n    },\n})\n\nexport default StaffCommentScreen;"]},"metadata":{},"sourceType":"module"}