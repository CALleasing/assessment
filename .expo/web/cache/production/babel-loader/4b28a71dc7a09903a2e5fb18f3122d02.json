{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import FlatList from\"react-native-web/dist/exports/FlatList\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import{Button,Card}from'react-native-paper';import{CheckBox}from'react-native-elements';import axiox from'axios';import{COLORS,SIZES}from\"../constants/theme\";import moment from'moment';import'moment/locale/th';import{MAIN_URL,USER}from\"../constants/variables\";var StaffCommentScreen=function StaffCommentScreen(_ref){var navigation=_ref.navigation,route=_ref.route;var userId=USER.userid;var managerID=route.params.managerID;var year=route.params.year;var part=route.params.part;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),answer=_useState2[0],setAnswer=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loadingPage=_useState6[0],setLoadingPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),postLoading=_useState8[0],setPostLoading=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),answerForManger=_useState10[0],setAnswerFormanager=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),allAnswer=_useState12[0],setAllAnswer=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),questionWithAnswer=_useState14[0],setQuestionWithAnswer=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),question=_useState16[0],setQuestion=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),checked=_useState18[0],setChecked=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),selectedColor=_useState20[0],setSelectedColor=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),list=_useState22[0],setList=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),checkIndex=_useState24[0],setCheckIndex=_useState24[1];useEffect(function(){USER.position===\"ผู้จัดการ\"?getAnswerWithManagerId():getAllQuestionWithAnswer();},[]);var getAllQuestionWithAnswer=function getAllQuestionWithAnswer(){setLoadingPage(true);axiox.get(MAIN_URL+'/answer/comment/user/'+year+'/'+part+'/'+managerID+'/'+userId).then(function(res){setQuestionWithAnswer(res.data);setLoadingPage(false);}).catch(function(err){console.log(err);setLoadingPage(false);});};var getAllQuestion=function getAllQuestion(){setLoadingPage(true);axiox.get(MAIN_URL+'/question/comment/'+year+'/'+part).then(function(res){setQuestion(res.data);setLoadingPage(false);}).catch(function(err){console.log(err);setLoadingPage(false);});};var getAllAnswer=function getAllAnswer(){setLoading(true);axiox.get(MAIN_URL+'/answer/comment/user/'+year+'/'+part+'/department/'+USER.department).then(function(res){setAllAnswer(res.data);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);});};var getAnswerWithManagerIdAndNumber=function getAnswerWithManagerIdAndNumber(_ref2){var number=_ref2.number;setLoading(true);axiox.get(MAIN_URL+'/answer/comment/manager/'+year+'/'+part+'/'+userId+'/'+number).then(function(res){console.log(res.data);setAnswer(res.data);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);});};var getAnswerWithManagerId=function getAnswerWithManagerId(){setLoadingPage(true);axiox.get(MAIN_URL+'/answer/comment/manager/'+year+'/'+part+'/'+userId).then(function(res){var data=res.data;mapAnserToGroup(data);setLoadingPage(false);}).catch(function(err){console.log(err);setLoadingPage(false);});};var mapAnserToGroup=function mapAnserToGroup(data){var allAnswerGroup=[];var answerGroup=[];var lastUserid='';var userid='';var name='';var lastname='';var nickname='';for(var i=0;i<data.length;i++){if(i===0){lastUserid=data[i].userid;}if(data[i].userid===lastUserid){userid=data[i].userid;name=data[i].name;lastname=data[i].lastname;nickname=data[i].nickname;if(data.length-1===i){console.log(data.length-1);console.log(i);var obj={userid:userid,name:name,lastname:lastname,nickname:nickname,all_answer:answerGroup};answerGroup.push(data[i]);allAnswerGroup.push(obj);setAnswerFormanager(allAnswerGroup);console.log(answerForManger);}else{answerGroup.push(data[i]);}}else{var obj={userid:userid,name:name,lastname:lastname,nickname:nickname,all_answer:answerGroup};allAnswerGroup.push(obj);answerGroup=[];lastUserid=data[i].userid;answerGroup.push(data[i]);}}};var postAnswer=function postAnswer(_ref3){var dataSend=_ref3.dataSend,number=_ref3.number;setLoading(true);axiox.post(MAIN_URL+'/answer/comment/user/'+year+'/'+part+'/'+userId+'/'+number,dataSend).then(function(res){alert(\"บันทึกข้อมูลสำเร็จ\");setLoading(false);}).catch(function(err){console.log(err);alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");setLoading(false);});};var renderManagerCheck=function renderManagerCheck(){var renderUserWithAllAnswer=function renderUserWithAllAnswer(_ref4){var item=_ref4.item,index=_ref4.index;return React.createElement(View,{style:{marginBottom:14}},React.createElement(Text,{style:{fontWeight:'bold'}},item.number,\". \",item.qt),React.createElement(Text,{style:{color:'green',padding:4,paddingHorizontal:16}},item.answer));};var renderItem=function renderItem(_ref5){var item=_ref5.item,index=_ref5.index;return React.createElement(View,{style:{padding:8,marginHorizontal:16,marginVertical:8,borderRadius:5,borderColor:'black',borderWidth:.5}},item.all_answer[0].reveal===0?React.createElement(Text,{style:{fontSize:15,fontWeight:'bold',paddingHorizontal:8,color:'blue'}},item.name,\" \",item.lastname,\" (\",item.nickname,\") [\",item.all_answer[0].department,\"]\"):React.createElement(Text,{style:{paddingHorizontal:8,fontSize:15,fontWeight:'bold',color:'blue'}},\"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D \"),React.createElement(View,{style:{padding:8,marginVertical:8,borderRadius:5,borderColor:'gray',borderWidth:.2}},React.createElement(FlatList,{data:item.all_answer,extraData:item.all_answer,keyExtractor:function keyExtractor(item,index){return\"\"+index;},renderItem:renderUserWithAllAnswer,scrollEnabled:false}),React.createElement(Text,{style:{color:'green',paddingHorizontal:16,paddingVertical:4}},item.answer)));};var renderComment=function renderComment(_ref6){var item=_ref6.item,index=_ref6.index;return React.createElement(View,{style:{marginVertical:8}},item.reveal===0?React.createElement(Text,{style:{fontSize:15,fontWeight:'bold'}},item.name,\" \",item.lastname,\" (\",item.nickname,\") [\",item.department,\"] \",React.createElement(Text,{style:{fontSize:12,color:'gray'}},\" - \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \",moment(item.date).format('ll'))):React.createElement(Text,{style:{fontSize:15,fontWeight:'bold'}},\"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D \",React.createElement(Text,{style:{fontSize:12,color:'gray'}},\" - \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \",moment(item.date).format('ll'))),React.createElement(View,{style:{marginVertical:8,borderRadius:5,borderColor:'gray',borderWidth:.3}},React.createElement(Text,{style:{color:'green',padding:8}},item.answer)));};return loadingPage?React.createElement(ActivityIndicator,{style:{position:'absolute',left:0,right:0,top:0,bottom:0,alignItems:'center',justifyContent:'center'},size:\"large\",color:\"#0275d8\"}):answerForManger.length!=0?React.createElement(View,{style:{marginBottom:18}},React.createElement(FlatList,{data:answerForManger,extraData:answerForManger,keyExtractor:function keyExtractor(item,index){return\"\"+index;},renderItem:renderItem,ListHeaderComponent:React.createElement(View,{style:{margin:16}},React.createElement(Text,{style:{alignSelf:'center',fontSize:14}},\"\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\")),showsVerticalScrollIndicator:false})):React.createElement(Text,{style:{fontSize:16,alignSelf:'center',marginTop:50}},\"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\");};var renderUserComment=function renderUserComment(){var renderItem=function renderItem(_ref7){var item=_ref7.item,index=_ref7.index;return React.createElement(View,{style:{padding:8,margin:15,backgroundColor:'white',borderColor:'gray',borderWidth:.3}},React.createElement(Text,{style:{fontSize:16}},item.number,\". \",item.qt),React.createElement(TextInput,{style:{backgroundColor:'white',marginTop:20,borderWidth:1,padding:10,borderRadius:5,marginVertical:8,height:150},placeholder:\"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){answer[index]=text;},defaultValue:item.answer}),React.createElement(Button,{style:{backgroundColor:'green',borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){var dataSend={manager_id:managerID,reveal:checked,answer:answer[index],date:moment().format('yyyy-MM-DD'),department:USER.department};console.log(dataSend);console.log(\"year\",year);console.log(\"part\",part);console.log(\"number\",item.number);console.log(\"userid\",USER.userid);postAnswer({dataSend:dataSend,number:item.number});}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\")));};return loadingPage?React.createElement(ActivityIndicator,{style:{position:'absolute',left:0,right:0,top:0,bottom:0,alignItems:'center',justifyContent:'center'},size:\"large\",color:\"#0275d8\"}):questionWithAnswer.length!=0?React.createElement(FlatList,{data:questionWithAnswer,extraData:questionWithAnswer,keyExtractor:function keyExtractor(item,index){return\"\"+index;},renderItem:renderItem,ListHeaderComponent:React.createElement(View,{style:{margin:16,backgroundColor:'white',paddingBottom:16}},React.createElement(Text,{style:{fontSize:16,margin:16}},\"* \\u0E01\\u0E48\\u0E2D\\u0E19\\u0E15\\u0E2D\\u0E1A\\u0E04\\u0E33\\u0E16\\u0E32\\u0E21 \\u0E17\\u0E48\\u0E32\\u0E19\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E43\\u0E2B\\u0E49\\u0E1C\\u0E39\\u0E49\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E17\\u0E23\\u0E32\\u0E1A\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E44\\u0E21\\u0E48\"),React.createElement(CheckBox,{title:\"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E40\\u0E1C\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\",checked:checked,onPress:function onPress(){setChecked(!checked);}}))}):React.createElement(Text,{style:{fontSize:16,alignSelf:'center',marginTop:50}},\"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\");};return React.createElement(View,{style:{flex:1,backgroundColor:'white'}},USER.position==='ผู้จัดการ'?renderManagerCheck(navigation):renderUserComment(navigation));};var styles=StyleSheet.create({checkboxContainer:{backgroundColor:'white',borderColor:'gray',borderWidth:3,flexDirection:\"row\",marginBottom:20},checkbox:{width:20,height:20,alignSelf:\"center\"},label:{margin:8}});export default StaffCommentScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/StaffCommentScreen.js"],"names":["React","useState","useEffect","Button","Card","CheckBox","axiox","COLORS","SIZES","moment","MAIN_URL","USER","StaffCommentScreen","navigation","route","userId","userid","managerID","params","year","part","answer","setAnswer","loading","setLoading","loadingPage","setLoadingPage","postLoading","setPostLoading","answerForManger","setAnswerFormanager","allAnswer","setAllAnswer","questionWithAnswer","setQuestionWithAnswer","question","setQuestion","checked","setChecked","selectedColor","setSelectedColor","list","setList","checkIndex","setCheckIndex","position","getAnswerWithManagerId","getAllQuestionWithAnswer","get","then","res","data","catch","err","console","log","getAllQuestion","getAllAnswer","department","getAnswerWithManagerIdAndNumber","number","mapAnserToGroup","allAnswerGroup","answerGroup","lastUserid","name","lastname","nickname","i","length","obj","all_answer","push","postAnswer","dataSend","post","alert","renderManagerCheck","renderUserWithAllAnswer","item","index","marginBottom","fontWeight","qt","color","padding","paddingHorizontal","renderItem","marginHorizontal","marginVertical","borderRadius","borderColor","borderWidth","reveal","fontSize","paddingVertical","renderComment","date","format","left","right","top","bottom","alignItems","justifyContent","margin","alignSelf","marginTop","renderUserComment","backgroundColor","height","text","manager_id","paddingBottom","flex","styles","StyleSheet","create","checkboxContainer","flexDirection","checkbox","width","label"],"mappings":"iEAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,C,mcAEA,OAASC,MAAT,CAAiBC,IAAjB,KAA6B,oBAA7B,CACA,OAASC,QAAT,KAAyB,uBAAzB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,KAAjB,0BAEA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAO,kBAAP,CACA,OAASC,QAAT,CAAmBC,IAAnB,8BAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,MAA2B,IAAxBC,CAAAA,UAAwB,MAAxBA,UAAwB,CAAZC,KAAY,MAAZA,KAAY,CAGlD,GAAIC,CAAAA,MAAM,CAAGJ,IAAI,CAACK,MAAlB,CAEA,GAAIC,CAAAA,SAAS,CAAGH,KAAK,CAACI,MAAN,CAAaD,SAA7B,CACA,GAAIE,CAAAA,IAAI,CAAGL,KAAK,CAACI,MAAN,CAAaC,IAAxB,CACA,GAAIC,CAAAA,IAAI,CAAGN,KAAK,CAACI,MAAN,CAAaE,IAAxB,CAEA,cAA4BnB,QAAQ,CAAC,EAAD,CAApC,wCAAOoB,MAAP,eAAeC,SAAf,eACA,eAA8BrB,QAAQ,CAAC,KAAD,CAAtC,yCAAOsB,OAAP,eAAgBC,UAAhB,eACA,eAAsCvB,QAAQ,CAAC,KAAD,CAA9C,yCAAOwB,WAAP,eAAoBC,cAApB,eACA,eAAsCzB,QAAQ,CAAC,KAAD,CAA9C,yCAAO0B,WAAP,eAAoBC,cAApB,eACA,eAA+C3B,QAAQ,CAAC,EAAD,CAAvD,0CAAO4B,eAAP,gBAAwBC,mBAAxB,gBAEA,gBAAkC7B,QAAQ,CAAC,EAAD,CAA1C,2CAAO8B,SAAP,gBAAkBC,YAAlB,gBACA,gBAAoD/B,QAAQ,CAAC,EAAD,CAA5D,2CAAOgC,kBAAP,gBAA2BC,qBAA3B,gBACA,gBAAgCjC,QAAQ,CAAC,EAAD,CAAxC,2CAAOkC,QAAP,gBAAiBC,WAAjB,gBAEA,gBAA8BnC,QAAQ,CAAC,KAAD,CAAtC,2CAAOoC,OAAP,gBAAgBC,UAAhB,gBAEA,gBAA0CrC,QAAQ,CAAC,EAAD,CAAlD,2CAAOsC,aAAP,gBAAsBC,gBAAtB,gBACA,gBAAwBvC,QAAQ,CAAC,EAAD,CAAhC,2CAAOwC,IAAP,gBAAaC,OAAb,gBACA,gBAAoCzC,QAAQ,CAAC,CAAD,CAA5C,2CAAO0C,UAAP,gBAAmBC,aAAnB,gBAGA1C,SAAS,CAAC,UAAM,CAGZS,IAAI,CAACkC,QAAL,GAAkB,WAAlB,CAAgCC,sBAAsB,EAAtD,CAA2DC,wBAAwB,EAAnF,CAEH,CALQ,CAKN,EALM,CAAT,CAOA,GAAMA,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,EAAM,CACnCrB,cAAc,CAAC,IAAD,CAAd,CAGApB,KAAK,CAAC0C,GAAN,CAAUtC,QAAQ,CAAG,uBAAX,CAAqCS,IAArC,CAA4C,GAA5C,CAAkDC,IAAlD,CAAyD,GAAzD,CAA+DH,SAA/D,CAA2E,GAA3E,CAAiFF,MAA3F,EAEKkC,IAFL,CAEU,SAAAC,GAAG,CAAI,CAEThB,qBAAqB,CAACgB,GAAG,CAACC,IAAL,CAArB,CAEAzB,cAAc,CAAC,KAAD,CAAd,CAOH,CAbL,EAcK0B,KAdL,CAcW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAEA3B,cAAc,CAAC,KAAD,CAAd,CAEH,CAnBL,EAoBH,CAxBD,CA0BA,GAAM8B,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB9B,cAAc,CAAC,IAAD,CAAd,CACApB,KAAK,CAAC0C,GAAN,CAAUtC,QAAQ,CAAG,oBAAX,CAAkCS,IAAlC,CAAyC,GAAzC,CAA+CC,IAAzD,EACK6B,IADL,CACU,SAAAC,GAAG,CAAI,CAGTd,WAAW,CAACc,GAAG,CAACC,IAAL,CAAX,CAGAzB,cAAc,CAAC,KAAD,CAAd,CACH,CARL,EASK0B,KATL,CASW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAEA3B,cAAc,CAAC,KAAD,CAAd,CAEH,CAdL,EAeH,CAjBD,CAmBA,GAAM+B,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBjC,UAAU,CAAC,IAAD,CAAV,CAEAlB,KAAK,CAAC0C,GAAN,CAAUtC,QAAQ,CAAG,uBAAX,CAAqCS,IAArC,CAA4C,GAA5C,CAAkDC,IAAlD,CAAyD,cAAzD,CAA0ET,IAAI,CAAC+C,UAAzF,EAEKT,IAFL,CAEU,SAAAC,GAAG,CAAI,CAETlB,YAAY,CAACkB,GAAG,CAACC,IAAL,CAAZ,CAEA3B,UAAU,CAAC,KAAD,CAAV,CACH,CAPL,EAQK4B,KARL,CAQW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAEA7B,UAAU,CAAC,KAAD,CAAV,CAEH,CAbL,EAcH,CAjBD,CAmBA,GAAMmC,CAAAA,+BAA+B,CAAG,QAAlCA,CAAAA,+BAAkC,OAAgB,IAAbC,CAAAA,MAAa,OAAbA,MAAa,CACpDpC,UAAU,CAAC,IAAD,CAAV,CAGAlB,KAAK,CAAC0C,GAAN,CAAUtC,QAAQ,CAAG,0BAAX,CAAwCS,IAAxC,CAA+C,GAA/C,CAAqDC,IAArD,CAA4D,GAA5D,CAAkEL,MAAlE,CAA2E,GAA3E,CAAiF6C,MAA3F,EAEKX,IAFL,CAEU,SAAAC,GAAG,CAAI,CACTI,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB,EACA7B,SAAS,CAAC4B,GAAG,CAACC,IAAL,CAAT,CAEA3B,UAAU,CAAC,KAAD,CAAV,CACH,CAPL,EAQK4B,KARL,CAQW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAEA7B,UAAU,CAAC,KAAD,CAAV,CAEH,CAbL,EAcH,CAlBD,CAoBA,GAAMsB,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,EAAM,CACjCpB,cAAc,CAAC,IAAD,CAAd,CAGApB,KAAK,CAAC0C,GAAN,CAAUtC,QAAQ,CAAG,0BAAX,CAAwCS,IAAxC,CAA+C,GAA/C,CAAqDC,IAArD,CAA4D,GAA5D,CAAkEL,MAA5E,EAEKkC,IAFL,CAEU,SAAAC,GAAG,CAAI,CAET,GAAMC,CAAAA,IAAI,CAAGD,GAAG,CAACC,IAAjB,CACAU,eAAe,CAACV,IAAD,CAAf,CAEAzB,cAAc,CAAC,KAAD,CAAd,CACH,CARL,EASK0B,KATL,CASW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAEA3B,cAAc,CAAC,KAAD,CAAd,CAEH,CAdL,EAeH,CAnBD,CAqBA,GAAMmC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACV,IAAD,CAAU,CAC9B,GAAIW,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIC,CAAAA,WAAW,CAAG,EAAlB,CACA,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CAEA,GAAIhD,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIiD,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CAEA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGjB,IAAI,CAACkB,MAAzB,CAAiCD,CAAC,EAAlC,CAAsC,CAClC,GAAIA,CAAC,GAAK,CAAV,CAAa,CACTJ,UAAU,CAAGb,IAAI,CAACiB,CAAD,CAAJ,CAAQpD,MAArB,CACH,CACD,GAAImC,IAAI,CAACiB,CAAD,CAAJ,CAAQpD,MAAR,GAAmBgD,UAAvB,CAAmC,CAC/BhD,MAAM,CAAGmC,IAAI,CAACiB,CAAD,CAAJ,CAAQpD,MAAjB,CACAiD,IAAI,CAAGd,IAAI,CAACiB,CAAD,CAAJ,CAAQH,IAAf,CACAC,QAAQ,CAAGf,IAAI,CAACiB,CAAD,CAAJ,CAAQF,QAAnB,CACAC,QAAQ,CAAGhB,IAAI,CAACiB,CAAD,CAAJ,CAAQD,QAAnB,CAEA,GAAIhB,IAAI,CAACkB,MAAL,CAAc,CAAd,GAAoBD,CAAxB,CAA2B,CACvBd,OAAO,CAACC,GAAR,CAAYJ,IAAI,CAACkB,MAAL,CAAc,CAA1B,EACAf,OAAO,CAACC,GAAR,CAAYa,CAAZ,EACA,GAAIE,CAAAA,GAAG,CAAG,CACNtD,MAAM,CAAEA,MADF,CAENiD,IAAI,CAAEA,IAFA,CAGNC,QAAQ,CAAEA,QAHJ,CAINC,QAAQ,CAAEA,QAJJ,CAKNI,UAAU,CAAER,WALN,CAAV,CAQAA,WAAW,CAACS,IAAZ,CAAiBrB,IAAI,CAACiB,CAAD,CAArB,EAEAN,cAAc,CAACU,IAAf,CAAoBF,GAApB,EAEAxC,mBAAmB,CAACgC,cAAD,CAAnB,CACAR,OAAO,CAACC,GAAR,CAAY1B,eAAZ,EACH,CAjBD,IAkBK,CACDkC,WAAW,CAACS,IAAZ,CAAiBrB,IAAI,CAACiB,CAAD,CAArB,EACH,CAEJ,CA5BD,IA4BO,CACH,GAAIE,CAAAA,GAAG,CAAG,CACNtD,MAAM,CAAEA,MADF,CAENiD,IAAI,CAAEA,IAFA,CAGNC,QAAQ,CAAEA,QAHJ,CAINC,QAAQ,CAAEA,QAJJ,CAKNI,UAAU,CAAER,WALN,CAAV,CAUAD,cAAc,CAACU,IAAf,CAAoBF,GAApB,EAEAP,WAAW,CAAG,EAAd,CACAC,UAAU,CAAGb,IAAI,CAACiB,CAAD,CAAJ,CAAQpD,MAArB,CAEA+C,WAAW,CAACS,IAAZ,CAAiBrB,IAAI,CAACiB,CAAD,CAArB,EACH,CACJ,CAEJ,CA9DD,CAgEA,GAAMK,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,OAA0B,IAAvBC,CAAAA,QAAuB,OAAvBA,QAAuB,CAAbd,MAAa,OAAbA,MAAa,CACzCpC,UAAU,CAAC,IAAD,CAAV,CACAlB,KAAK,CAACqE,IAAN,CAAWjE,QAAQ,CAAG,uBAAX,CAAqCS,IAArC,CAA4C,GAA5C,CAAkDC,IAAlD,CAAyD,GAAzD,CAA+DL,MAA/D,CAAwE,GAAxE,CAA8E6C,MAAzF,CAAiGc,QAAjG,EAEKzB,IAFL,CAEU,SAAAC,GAAG,CAAI,CAET0B,KAAK,CAAC,oBAAD,CAAL,CACApD,UAAU,CAAC,KAAD,CAAV,CACH,CANL,EAOK4B,KAPL,CAOW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAuB,KAAK,CAAC,kCAAD,CAAL,CACApD,UAAU,CAAC,KAAD,CAAV,CAEH,CAZL,EAaH,CAfD,CAiBA,GAAMqD,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC7B,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,OAAqB,IAAlBC,CAAAA,IAAkB,OAAlBA,IAAkB,CAAZC,KAAY,OAAZA,KAAY,CACjD,MACI,qBAAC,IAAD,EAAM,KAAK,CAAE,CAAEC,YAAY,CAAE,EAAhB,CAAb,EACI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAd,CAAb,EAAsCH,IAAI,CAACnB,MAA3C,MAAqDmB,IAAI,CAACI,EAA1D,CADJ,CAEI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAkBC,OAAO,CAAE,CAA3B,CAA8BC,iBAAiB,CAAE,EAAjD,CAAb,EAAqEP,IAAI,CAAC1D,MAA1E,CAFJ,CADJ,CAMH,CAPD,CASA,GAAMkE,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,OAAqB,IAAlBR,CAAAA,IAAkB,OAAlBA,IAAkB,CAAZC,KAAY,OAAZA,KAAY,CAEpC,MACI,qBAAC,IAAD,EAAM,KAAK,CAAE,CAAEK,OAAO,CAAE,CAAX,CAAcG,gBAAgB,CAAE,EAAhC,CAAoCC,cAAc,CAAE,CAApD,CAAuDC,YAAY,CAAE,CAArE,CAAwEC,WAAW,CAAE,OAArF,CAA8FC,WAAW,CAAE,EAA3G,CAAb,EACKb,IAAI,CAACR,UAAL,CAAgB,CAAhB,EAAmBsB,MAAnB,GAA8B,CAA9B,CACG,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEC,QAAQ,CAAE,EAAZ,CAAgBZ,UAAU,CAAE,MAA5B,CAAoCI,iBAAiB,CAAE,CAAvD,CAA0DF,KAAK,CAAE,MAAjE,CAAb,EAAyFL,IAAI,CAACd,IAA9F,KAAqGc,IAAI,CAACb,QAA1G,MAAsHa,IAAI,CAACZ,QAA3H,OAAwIY,IAAI,CAACR,UAAL,CAAgB,CAAhB,EAAmBb,UAA3J,KADH,CAGG,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAE4B,iBAAiB,CAAE,CAArB,CAAwBQ,QAAQ,CAAE,EAAlC,CAAsCZ,UAAU,CAAE,MAAlD,CAA0DE,KAAK,CAAE,MAAjE,CAAb,0FAJR,CAMI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEC,OAAO,CAAE,CAAX,CAAcI,cAAc,CAAE,CAA9B,CAAiCC,YAAY,CAAE,CAA/C,CAAkDC,WAAW,CAAE,MAA/D,CAAuEC,WAAW,CAAE,EAApF,CAAb,EAEI,oBAAC,QAAD,EACI,IAAI,CAAEb,IAAI,CAACR,UADf,CAEI,SAAS,CAAEQ,IAAI,CAACR,UAFpB,CAGI,YAAY,CAAE,sBAACQ,IAAD,CAAOC,KAAP,WAAoBA,KAApB,EAHlB,CAII,UAAU,CAAEF,uBAJhB,CAKI,aAAa,CAAE,KALnB,EAFJ,CAUI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEM,KAAK,CAAE,OAAT,CAAkBE,iBAAiB,CAAE,EAArC,CAAyCS,eAAe,CAAE,CAA1D,CAAb,EAA6EhB,IAAI,CAAC1D,MAAlF,CAVJ,CANJ,CADJ,CAuEH,CAzED,CA2EA,GAAM2E,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,OAAqB,IAAlBjB,CAAAA,IAAkB,OAAlBA,IAAkB,CAAZC,KAAY,OAAZA,KAAY,CACvC,MACI,qBAAC,IAAD,EAAM,KAAK,CAAE,CAAES,cAAc,CAAE,CAAlB,CAAb,EACKV,IAAI,CAACc,MAAL,GAAgB,CAAhB,CACG,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEC,QAAQ,CAAE,EAAZ,CAAgBZ,UAAU,CAAE,MAA5B,CAAb,EAAoDH,IAAI,CAACd,IAAzD,KAAgEc,IAAI,CAACb,QAArE,MAAiFa,IAAI,CAACZ,QAAtF,OAAmGY,IAAI,CAACrB,UAAxG,MAAqH,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEoC,QAAQ,CAAE,EAAZ,CAAgBV,KAAK,CAAE,MAAvB,CAAb,6CAAyD3E,MAAM,CAACsE,IAAI,CAACkB,IAAN,CAAN,CAAkBC,MAAlB,CAAyB,IAAzB,CAAzD,CAArH,CADH,CAGG,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEJ,QAAQ,CAAE,EAAZ,CAAgBZ,UAAU,CAAE,MAA5B,CAAb,0FAAkE,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEY,QAAQ,CAAE,EAAZ,CAAgBV,KAAK,CAAE,MAAvB,CAAb,6CAAyD3E,MAAM,CAACsE,IAAI,CAACkB,IAAN,CAAN,CAAkBC,MAAlB,CAAyB,IAAzB,CAAzD,CAAlE,CAJR,CAMI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAET,cAAc,CAAE,CAAlB,CAAqBC,YAAY,CAAE,CAAnC,CAAsCC,WAAW,CAAE,MAAnD,CAA2DC,WAAW,CAAE,EAAxE,CAAb,EACI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAER,KAAK,CAAE,OAAT,CAAkBC,OAAO,CAAE,CAA3B,CAAb,EAA8CN,IAAI,CAAC1D,MAAnD,CADJ,CANJ,CADJ,CAYH,CAbD,CAeA,MACII,CAAAA,WAAW,CACP,oBAAC,iBAAD,EAAmB,KAAK,CAAE,CAEtBoB,QAAQ,CAAE,UAFY,CAGtBsD,IAAI,CAAE,CAHgB,CAItBC,KAAK,CAAE,CAJe,CAKtBC,GAAG,CAAE,CALiB,CAMtBC,MAAM,CAAE,CANc,CAOtBC,UAAU,CAAE,QAPU,CAQtBC,cAAc,CAAE,QARM,CAA1B,CASG,IAAI,CAAC,OATR,CASgB,KAAK,CAAC,SATtB,EADO,CAYP3E,eAAe,CAACwC,MAAhB,EAA0B,CAA1B,CACI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEY,YAAY,CAAE,EAAhB,CAAb,EACI,oBAAC,QAAD,EACI,IAAI,CAAEpD,eADV,CAEI,SAAS,CAAEA,eAFf,CAGI,YAAY,CAAE,sBAACkD,IAAD,CAAOC,KAAP,WAAoBA,KAApB,EAHlB,CAII,UAAU,CAAEO,UAJhB,CAKI,mBAAmB,CACf,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEkB,MAAM,CAAE,EAAV,CAAb,EACI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAAuBZ,QAAQ,CAAE,EAAjC,CAAb,iHADJ,CANR,CAWI,4BAA4B,CAAE,KAXlC,EADJ,CADJ,CAiBI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEA,QAAQ,CAAE,EAAZ,CAAgBY,SAAS,CAAE,QAA3B,CAAqCC,SAAS,CAAE,EAAhD,CAAb,uEA9BZ,CAiCH,CArID,CAuIA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC5B,GAAMrB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,OAAqB,IAAlBR,CAAAA,IAAkB,OAAlBA,IAAkB,CAAZC,KAAY,OAAZA,KAAY,CACpC,MACI,qBAAC,IAAD,EAAM,KAAK,CAAE,CAAEK,OAAO,CAAE,CAAX,CAAcoB,MAAM,CAAE,EAAtB,CAA0BI,eAAe,CAAE,OAA3C,CAAoDlB,WAAW,CAAE,MAAjE,CAAyEC,WAAW,CAAE,EAAtF,CAAb,EACI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEE,QAAQ,CAAE,EAAZ,CAAb,EAAgCf,IAAI,CAACnB,MAArC,MAA+CmB,IAAI,CAACI,EAApD,CADJ,CAII,oBAAC,SAAD,EACI,KAAK,CAAE,CAAE0B,eAAe,CAAE,OAAnB,CAA4BF,SAAS,CAAE,EAAvC,CAA2Cf,WAAW,CAAE,CAAxD,CAA2DP,OAAO,CAAE,EAApE,CAAwEK,YAAY,CAAE,CAAtF,CAAyFD,cAAc,CAAE,CAAzG,CAA4GqB,MAAM,CAAE,GAApH,CADX,CAGI,WAAW,CAAC,gCAHhB,CAII,oBAAoB,CAAC,MAJzB,CAKI,SAAS,KALb,CAMI,aAAa,CAAE,CANnB,CAOI,KAAK,CAAC,MAPV,CAQI,QAAQ,CAAE,EARd,CASI,YAAY,CAAE,sBAAAC,IAAI,CAAI,CAClB1F,MAAM,CAAC2D,KAAD,CAAN,CAAgB+B,IAAhB,CACH,CAXL,CAYI,YAAY,CAAEhC,IAAI,CAAC1D,MAZvB,EAJJ,CAmBI,oBAAC,MAAD,EACI,KAAK,CAAE,CACHwF,eAAe,CAAE,OADd,CAEHnB,YAAY,CAAE,EAFX,CAGHD,cAAc,CAAE,CAHb,CADX,CAMI,IAAI,CAAC,WANT,CAOI,OAAO,CAAE,kBAAM,CAEX,GAAMf,CAAAA,QAAQ,CAAG,CACbsC,UAAU,CAAE/F,SADC,CAEb4E,MAAM,CAAExD,OAFK,CAGbhB,MAAM,CAAEA,MAAM,CAAC2D,KAAD,CAHD,CAIbiB,IAAI,CAAExF,MAAM,GAAGyF,MAAT,CAAgB,YAAhB,CAJO,CAKbxC,UAAU,CAAE/C,IAAI,CAAC+C,UALJ,CAAjB,CAOAJ,OAAO,CAACC,GAAR,CAAYmB,QAAZ,EACApB,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAoBpC,IAApB,EACAmC,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAoBnC,IAApB,EACAkC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBwB,IAAI,CAACnB,MAA3B,EACAN,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsB5C,IAAI,CAACK,MAA3B,EACAyD,UAAU,CAAC,CAAEC,QAAQ,CAARA,QAAF,CAAYd,MAAM,CAAEmB,IAAI,CAACnB,MAAzB,CAAD,CAAV,CACH,CAtBL,EAwBI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAE8C,SAAS,CAAE,QAAb,CAAuBtB,KAAK,CAAE,OAA9B,CAAb,qDAxBJ,CAnBJ,CADJ,CAgDH,CAjDD,CAmDA,MACI3D,CAAAA,WAAW,CACP,oBAAC,iBAAD,EAAmB,KAAK,CAAE,CAEtBoB,QAAQ,CAAE,UAFY,CAGtBsD,IAAI,CAAE,CAHgB,CAItBC,KAAK,CAAE,CAJe,CAKtBC,GAAG,CAAE,CALiB,CAMtBC,MAAM,CAAE,CANc,CAOtBC,UAAU,CAAE,QAPU,CAQtBC,cAAc,CAAE,QARM,CAA1B,CASG,IAAI,CAAC,OATR,CASgB,KAAK,CAAC,SATtB,EADO,CAYPvE,kBAAkB,CAACoC,MAAnB,EAA6B,CAA7B,CACI,oBAAC,QAAD,EACI,IAAI,CAAEpC,kBADV,CAEI,SAAS,CAAEA,kBAFf,CAGI,YAAY,CAAE,sBAAC8C,IAAD,CAAOC,KAAP,WAAoBA,KAApB,EAHlB,CAII,UAAU,CAAEO,UAJhB,CAKI,mBAAmB,CACf,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEkB,MAAM,CAAE,EAAV,CAAcI,eAAe,CAAE,OAA/B,CAAwCI,aAAa,CAAE,EAAvD,CAAb,EACI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEnB,QAAQ,CAAE,EAAZ,CAAgBW,MAAM,CAAE,EAAxB,CAAb,8VADJ,CAEI,oBAAC,QAAD,EACI,KAAK,CAAC,sFADV,CAEI,OAAO,CAAEpE,OAFb,CAGI,OAAO,CAAE,kBAAM,CACXC,UAAU,CAAC,CAACD,OAAF,CAAV,CAEH,CANL,EAFJ,CANR,EADJ,CAqBI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAEyD,QAAQ,CAAE,EAAZ,CAAgBY,SAAS,CAAE,QAA3B,CAAqCC,SAAS,CAAE,EAAhD,CAAb,uEAlCZ,CAoCH,CAxFD,CA0FA,MACI,qBAAC,IAAD,EAAM,KAAK,CAAE,CAAEO,IAAI,CAAE,CAAR,CAAWL,eAAe,CAAE,OAA5B,CAAb,EAEKlG,IAAI,CAACkC,QAAL,GAAkB,WAAlB,CACGgC,kBAAkB,CAAChE,UAAD,CADrB,CAGG+F,iBAAiB,CAAC/F,UAAD,CALzB,CADJ,CAUH,CAtcD,CAwcA,GAAMsG,CAAAA,MAAM,CAAGC,UAAU,CAACC,MAAX,CAAkB,CAC7BC,iBAAiB,CAAE,CACfT,eAAe,CAAE,OADF,CAEflB,WAAW,CAAE,MAFE,CAGfC,WAAW,CAAE,CAHE,CAIf2B,aAAa,CAAE,KAJA,CAKftC,YAAY,CAAE,EALC,CADU,CAQ7BuC,QAAQ,CAAE,CAENC,KAAK,CAAE,EAFD,CAGNX,MAAM,CAAE,EAHF,CAINJ,SAAS,CAAE,QAJL,CARmB,CAc7BgB,KAAK,CAAE,CACHjB,MAAM,CAAE,CADL,CAdsB,CAAlB,CAAf,CAmBA,cAAe7F,CAAAA,kBAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, FlatList, StyleSheet, TouchableOpacity, ActivityIndicator } from 'react-native';\nimport { Button, Card } from 'react-native-paper';\nimport { CheckBox } from 'react-native-elements'\n\nimport axiox from 'axios';\nimport { COLORS, SIZES } from '../constants/theme';\n\nimport moment from 'moment';\nimport 'moment/locale/th';\nimport { MAIN_URL, USER } from '../constants/variables';\n\nconst StaffCommentScreen = ({ navigation, route }) => {\n\n    // let sheetID = route.params.sheetID;\n    let userId = USER.userid;\n    // console.log(userId)\n    let managerID = route.params.managerID;\n    let year = route.params.year;\n    let part = route.params.part;\n\n    const [answer, setAnswer] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [loadingPage, setLoadingPage] = useState(false);\n    const [postLoading, setPostLoading] = useState(false);\n    const [answerForManger, setAnswerFormanager] = useState([]);\n\n    const [allAnswer, setAllAnswer] = useState([]);\n    const [questionWithAnswer, setQuestionWithAnswer] = useState([]);\n    const [question, setQuestion] = useState([]);\n    // var checkArray = [];\n    const [checked, setChecked] = useState(false);\n    // const [itemSelected, setItemSeleced] = useState(0);\n    const [selectedColor, setSelectedColor] = useState('');\n    const [list, setList] = useState([]);\n    const [checkIndex, setCheckIndex] = useState(0);\n    // console.log(USER.position)\n\n    useEffect(() => {\n        // setLoading(true);\n        // console.log(USER.position)\n        USER.position === \"ผู้จัดการ\" ? getAnswerWithManagerId() : getAllQuestionWithAnswer()\n\n    }, []);\n\n    const getAllQuestionWithAnswer = () => {\n        setLoadingPage(true);\n        // console.log(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + managerID + '/' + userId)\n        // console.log(\"getAllQuestionWithAnswer\");\n        axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + managerID + '/' + userId)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n\n                setQuestionWithAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoadingPage(false);\n                // res.data.map(item => {\n                //     checkArray.push({\n                //         check: false\n                //     });\n                // console.log(checked)\n                // })\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoadingPage(false);\n\n            });\n    };\n\n    const getAllQuestion = () => {\n        setLoadingPage(true);\n        axiox.get(MAIN_URL + '/question/comment/' + year + '/' + part)\n            .then(res => {\n                // console.log(res.data);\n                // console.log(\"ALL DATA\", res.data);\n                setQuestion(res.data)\n\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoadingPage(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoadingPage(false);\n\n            });\n    }\n\n    const getAllAnswer = () => {\n        setLoading(true);\n        // console.log(\"getAll\")\n        axiox.get(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/department/' + USER.department)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                // console.log(\"ALL DATA\", res.data);\n                setAllAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    };\n\n    const getAnswerWithManagerIdAndNumber = ({ number }) => {\n        setLoading(true);\n\n        // console.log(\"get\", userId)\n        axiox.get(MAIN_URL + '/answer/comment/manager/' + year + '/' + part + '/' + userId + '/' + number)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n                setAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const getAnswerWithManagerId = () => {\n        setLoadingPage(true);\n\n        // console.log(\"get\", userId)\n        axiox.get(MAIN_URL + '/answer/comment/manager/' + year + '/' + part + '/' + userId)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                // console.log(res.data);\n                const data = res.data;\n                mapAnserToGroup(data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoadingPage(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoadingPage(false);\n\n            });\n    }\n\n    const mapAnserToGroup = (data) => {\n        var allAnswerGroup = [];\n        var answerGroup = [];\n        var lastUserid = '';\n        // console.log(data)\n        var userid = '';\n        var name = '';\n        var lastname = '';\n        var nickname = '';\n\n        for (var i = 0; i < data.length; i++) {\n            if (i === 0) {\n                lastUserid = data[i].userid;\n            }\n            if (data[i].userid === lastUserid) {\n                userid = data[i].userid;\n                name = data[i].name;\n                lastname = data[i].lastname;\n                nickname = data[i].nickname;\n\n                if (data.length - 1 === i) {\n                    console.log(data.length - 1);\n                    console.log(i)\n                    var obj = {\n                        userid: userid,\n                        name: name,\n                        lastname: lastname,\n                        nickname: nickname,\n                        all_answer: answerGroup\n                    }\n                    // console.log(obj)\n                    answerGroup.push(data[i]);\n\n                    allAnswerGroup.push(obj);\n\n                    setAnswerFormanager(allAnswerGroup);\n                    console.log(answerForManger)\n                }\n                else {\n                    answerGroup.push(data[i]);\n                }\n\n            } else {\n                var obj = {\n                    userid: userid,\n                    name: name,\n                    lastname: lastname,\n                    nickname: nickname,\n                    all_answer: answerGroup\n                }\n\n                // console.log(obj)\n\n                allAnswerGroup.push(obj);\n                // console.log(answerForManger);\n                answerGroup = [];\n                lastUserid = data[i].userid;\n\n                answerGroup.push(data[i]);\n            }\n        }\n        // console.log(answerForManger);\n    }\n\n    const postAnswer = ({ dataSend, number }) => {\n        setLoading(true);\n        axiox.post(MAIN_URL + '/answer/comment/user/' + year + '/' + part + '/' + userId + '/' + number, dataSend)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                // console.log(res.data);\n                alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const renderManagerCheck = () => {\n        const renderUserWithAllAnswer = ({ item, index }) => {\n            return (\n                <View style={{ marginBottom: 14 }}>\n                    <Text style={{ fontWeight: 'bold' }}>{item.number}. {item.qt}</Text>\n                    <Text style={{ color: 'green', padding: 4, paddingHorizontal: 16 }}>{item.answer}</Text>\n                </View>\n            )\n        }\n\n        const renderItem = ({ item, index }) => {\n            // console.log(item.date);\n            return (\n                <View style={{ padding: 8, marginHorizontal: 16, marginVertical: 8, borderRadius: 5, borderColor: 'black', borderWidth: .5 }}>\n                    {item.all_answer[0].reveal === 0 ?\n                        <Text style={{ fontSize: 15, fontWeight: 'bold', paddingHorizontal: 8, color: 'blue' }}>{item.name} {item.lastname} ({item.nickname}) [{item.all_answer[0].department}]</Text>\n                        :\n                        <Text style={{ paddingHorizontal: 8, fontSize: 15, fontWeight: 'bold', color: 'blue' }}>ไม่เปิดเผยชื่อ </Text>\n                    }\n                    <View style={{ padding: 8, marginVertical: 8, borderRadius: 5, borderColor: 'gray', borderWidth: .2 }}>\n\n                        <FlatList\n                            data={item.all_answer}\n                            extraData={item.all_answer}\n                            keyExtractor={(item, index) => `${index}`}\n                            renderItem={renderUserWithAllAnswer}\n                            scrollEnabled={false}\n                        />\n\n                        <Text style={{ color: 'green', paddingHorizontal: 16, paddingVertical: 4 }}>{item.answer}</Text>\n                    </View>\n                </View>\n            )\n            // <View>\n            //     <TouchableOpacity\n            //         style={selectedColor === index ? { borderRadius: 10, backgroundColor: 'green', padding: 10, margin: 10, } : { borderRadius: 10, borderColor: 'gray', borderWidth: .3, backgroundColor: '#F8F8FF', padding: 10, margin: 10, }}\n            //         onPress={() => {\n            //             setAnswer([]);\n            //             setSelectedColor(index);\n            //             setCheckIndex(index);\n            //             // console.log(item.number)\n            //             getAnswerWithManagerIdAndNumber({ number: item.number });\n            //         }}\n            //     >\n            //         <Text style={selectedColor === index ? { color: 'white', fontSize: 16 } : { color: 'black', fontSize: 16 }}>{index + 1}.  {item.qt}\n\n            //             {/* {\n            //             item.reveal != 1 ?\n            //                 <Text style={{ fontSize: 14, color: 'blue' }}> {item.qt} {item.lastname} ({item.nickname}) ( แผนก/สาขา {item.department} )</Text>\n            //                 :\n            //                 <Text style={{ fontSize: 14, color: 'blue' }}> ไม่เปิดเผยชื่อ</Text>\n            //         } */}\n            //         </Text>\n            //     </TouchableOpacity>\n            //     {checkIndex === index ?\n            //         !loading ?\n            //             answer.length != 0 ?\n            //                 <View style={{ padding: 16, margin: 8, borderRadius: 10, borderWidth: .3, borderColor: 'gray' }}>\n            //                     <FlatList\n            //                         data={answer}\n            //                         extraData={answer}\n            //                         keyExtractor={(item, index) => `${index}`}\n            //                         renderItem={renderComment}\n            //                         ListHeaderComponent={\n            //                             <Text style={{ marginBottom: 16, alignSelf: 'center', fontSize: 14 }}>ความคิดเห็นทั้งหมด</Text>\n            //                         }\n            //                     />\n            //                 </View>\n            //                 :\n            //                 selectedColor != '' ?\n            //                     <View style={{ padding: 16, margin: 8, borderRadius: 10, borderWidth: .3, borderColor: 'gray' }}>\n            //                         <Text style={{ alignSelf: 'center' }}>ไม่มีความคิดเห็น</Text>\n            //                     </View>\n            //                     :\n            //                     null\n            //             :\n            //             <ActivityIndicator />\n\n            //         :\n            //         null\n            //     }\n            // </View>\n            // )\n        }\n\n        const renderComment = ({ item, index }) => {\n            return (\n                <View style={{ marginVertical: 8 }}>\n                    {item.reveal === 0 ?\n                        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>{item.name} {item.lastname} ({item.nickname}) [{item.department}] <Text style={{ fontSize: 12, color: 'gray' }}> - วันที่ {moment(item.date).format('ll')}</Text></Text>\n                        :\n                        <Text style={{ fontSize: 15, fontWeight: 'bold' }}>ไม่เปิดเผยชื่อ <Text style={{ fontSize: 12, color: 'gray' }}> - วันที่ {moment(item.date).format('ll')}</Text></Text>\n                    }\n                    <View style={{ marginVertical: 8, borderRadius: 5, borderColor: 'gray', borderWidth: .3 }}>\n                        <Text style={{ color: 'green', padding: 8 }}>{item.answer}</Text>\n                    </View>\n                </View>\n            );\n        };\n\n        return (\n            loadingPage ?\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                answerForManger.length != 0 ?\n                    <View style={{ marginBottom: 18 }}>\n                        <FlatList\n                            data={answerForManger}\n                            extraData={answerForManger}\n                            keyExtractor={(item, index) => `${index}`}\n                            renderItem={renderItem}\n                            ListHeaderComponent={\n                                <View style={{ margin: 16 }}>\n                                    <Text style={{ alignSelf: 'center', fontSize: 14 }}>ความคิดเห็นทั้งหมด</Text>\n                                </View>\n\n                            }\n                            showsVerticalScrollIndicator={false}\n                        />\n                    </View>\n                    :\n                    <Text style={{ fontSize: 16, alignSelf: 'center', marginTop: 50 }}>ไม่มีข้อมูล</Text>\n            // null\n        )\n    }\n\n    const renderUserComment = () => {\n        const renderItem = ({ item, index }) => {\n            return (\n                <View style={{ padding: 8, margin: 15, backgroundColor: 'white', borderColor: 'gray', borderWidth: .3 }}>\n                    <Text style={{ fontSize: 16 }}>{item.number}. {item.qt}</Text>\n                    {/* <Text style={{ color: 'red' }}>*ผู้จัดการของแผนกคุณเท่านั้นที่จะเห็นคำตอบ แต่จะไม่รู้ว่าใครเป็นคนตอบ</Text> */}\n\n                    <TextInput\n                        style={{ backgroundColor: 'white', marginTop: 20, borderWidth: 1, padding: 10, borderRadius: 5, marginVertical: 8, height: 150 }}\n                        // textContentType='telephoneNumber'\n                        placeholder=\"คำตอบ\"\n                        placeholderTextColor=\"gray\"\n                        multiline\n                        numberOfLines={6}\n                        color='blue'\n                        fontSize={16}\n                        onChangeText={text => {\n                            answer[index] = text;\n                        }}\n                        defaultValue={item.answer}\n                    />\n\n                    <Button\n                        style={{\n                            backgroundColor: 'green',\n                            borderRadius: 10,\n                            marginVertical: 8\n                        }}\n                        mode=\"Contained\"\n                        onPress={() => {\n\n                            const dataSend = {\n                                manager_id: managerID,\n                                reveal: checked,\n                                answer: answer[index],\n                                date: moment().format('yyyy-MM-DD'),\n                                department: USER.department\n                            }\n                            console.log(dataSend)\n                            console.log(\"year\", year)\n                            console.log(\"part\", part)\n                            console.log(\"number\", item.number)\n                            console.log(\"userid\", USER.userid)\n                            postAnswer({ dataSend, number: item.number });\n                        }}\n                    >\n                        <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบ</Text>\n                    </Button>\n                </View>\n            )\n        }\n\n        return (\n            loadingPage ?\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                questionWithAnswer.length != 0 ?\n                    <FlatList\n                        data={questionWithAnswer}\n                        extraData={questionWithAnswer}\n                        keyExtractor={(item, index) => `${index}`}\n                        renderItem={renderItem}\n                        ListHeaderComponent={\n                            <View style={{ margin: 16, backgroundColor: 'white', paddingBottom: 16 }}>\n                                <Text style={{ fontSize: 16, margin: 16 }}>* ก่อนตอบคำถาม ท่านต้องการเปิดเผยชื่อให้ผู้จัดการทราบหรือไม่</Text>\n                                <CheckBox\n                                    title='ไม่เปิดเผยชื่อ'\n                                    checked={checked}\n                                    onPress={() => {\n                                        setChecked(!checked)\n                                        // console.log(checked);\n                                    }}\n                                />\n                            </View>\n                        }\n                    />\n                    :\n                    <Text style={{ fontSize: 16, alignSelf: 'center', marginTop: 50 }}>ไม่มีข้อมูล</Text>\n        )\n    }\n\n    return (\n        <View style={{ flex: 1, backgroundColor: 'white' }}>\n\n            {USER.position === 'ผู้จัดการ' ?\n                renderManagerCheck(navigation)\n                :\n                renderUserComment(navigation)\n            }\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    checkboxContainer: {\n        backgroundColor: 'white',\n        borderColor: 'gray',\n        borderWidth: 3,\n        flexDirection: \"row\",\n        marginBottom: 20,\n    },\n    checkbox: {\n\n        width: 20,\n        height: 20,\n        alignSelf: \"center\",\n    },\n    label: {\n        margin: 8,\n    },\n})\n\nexport default StaffCommentScreen;"]},"metadata":{},"sourceType":"module"}