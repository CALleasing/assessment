{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Platform from\"react-native-web/dist/exports/Platform\";import{Button,Avatar}from'react-native-paper';import*as Animatable from'react-native-animatable';import AsyncStorage from'@react-native-async-storage/async-storage';import{AuthContext}from\"../components/context\";import axiox from'axios';import Icon from\"@expo/vector-icons/FontAwesome\";import{COLORS,SIZES}from\"../constants/theme\";import{USER}from\"../constants/variables\";var LoginScreen=function LoginScreen(_ref){var navigation=_ref.navigation;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),textError=_useState2[0],setTextError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState({username:'',password:'',check_textInputChange:false,secureTextEntry:true}),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var login=function login(){var object={userid:data.username,password:data.password};axiox.post('https://program-api.herokuapp.com/login',object).then(function(res){console.log(res.data);setIsLoading(false);loginSaveState(res.data);USER.userid=res.data.userid;USER.position=res.data.position;USER.department=res.data.department;USER.name=res.data.name;USER.lastname=res.data.lastname;USER.nickname=res.data.nickname;USER.phone=res.data.phone;loginHandle(res.data.userid,res.data.position,res.data.department);}).catch(function(err){setTextError(\"User ID หรือ Password ไม่ถูกต้อง\");console.log(err);setIsLoading(false);});};var loginSaveState=function loginSaveState(userData){var jsonAllValue;return _regeneratorRuntime.async(function loginSaveState$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;jsonAllValue=JSON.stringify(userData);console.log(jsonAllValue);_context.next=5;return _regeneratorRuntime.awrap(AsyncStorage.setItem('user_login',jsonAllValue));case 5:_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},null,null,[[0,7]],Promise);};var checkLoginState=function checkLoginState(){var jsonValue,userInfo;return _regeneratorRuntime.async(function checkLoginState$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem('user_login'));case 3:jsonValue=_context2.sent;if(jsonValue!==null){userInfo=JSON.parse(jsonValue);console.log(userInfo);USER.userid=userInfo.userid;USER.position=userInfo.position;USER.department=userInfo.department;USER.name=userInfo.name;USER.lastname=userInfo.lastname;USER.nickname=userInfo.nickname;USER.phone=userInfo.phone;loginHandle(userInfo.userid,userInfo.position,userInfo.department);}else{}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},null,null,[[0,7]],Promise);};useEffect(function(){checkLoginState();},[]);var _React$useContext=React.useContext(AuthContext),signIn=_React$useContext.signIn;var textInputChange=function textInputChange(val){if(val.length!=0){setData(_objectSpread(_objectSpread({},data),{},{username:val,check_textInputChange:true}));}else{setData(_objectSpread(_objectSpread({},data),{},{username:val,check_textInputChange:false}));}};var handlePasswordChange=function handlePasswordChange(val){setData(_objectSpread(_objectSpread({},data),{},{password:val}));};var updateSecureTextEntry=function updateSecureTextEntry(val){setData(_objectSpread(_objectSpread({},data),{},{secureTextEntry:!data.secureTextEntry}));};var loginHandle=function loginHandle(username,position,department){signIn(username,position,department);};return React.createElement(View,{style:styles.containerMobile},React.createElement(View,{style:styles.header},React.createElement(Text,{style:styles.text_header},\"\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\")),React.createElement(Animatable.View,{style:styles.footer,animation:\"fadeInUpBig\"},React.createElement(Text,{style:styles.text_footer},\"User ID\"),React.createElement(View,{style:styles.action},React.createElement(Icon,{name:\"user\",color:COLORS.primary,size:20}),React.createElement(TextInput,{placeholder:\"User ID ...\",style:styles.text_input,onChangeText:function onChangeText(val){return textInputChange(val);}})),React.createElement(Text,{style:styles.text_footer},\"Password\"),React.createElement(View,{style:styles.action},React.createElement(Icon,{name:\"lock\",color:COLORS.primary,size:20}),React.createElement(TextInput,{placeholder:\"Password ...\",style:styles.text_input,onChangeText:function onChangeText(val){return handlePasswordChange(val);}})),React.createElement(Text,{style:{alignSelf:'center',color:'red',marginTop:26}},textError),React.createElement(Button,{style:{borderRadius:10,marginTop:16,backgroundColor:COLORS.primary},mode:\"contained\",onPress:function onPress(){setIsLoading(true);login();}},React.createElement(Text,{style:{fontSize:18}},\"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\")),isLoading?React.createElement(ActivityIndicator,{style:{marginTop:20,alignItems:'center',justifyContent:'center'},size:\"large\",color:\"#0275d8\"}):null));};var styles=StyleSheet.create({containerMobile:{flex:1,backgroundColor:COLORS.primary},footer:{flex:4,backgroundColor:'white',borderTopLeftRadius:30,borderTopRightRadius:30,paddingHorizontal:20,paddingVertical:30},header:{flex:1,justifyContent:'flex-end',paddingHorizontal:20,paddingBottom:50},logo:{alignItems:'center',justifyContent:'center'},text_header:{alignSelf:'center',justifyContent:'center',color:'white',fontWeight:'bold',fontSize:24},action:{flexDirection:'row',margin:10,borderBottomWidth:1,borderBottomColor:'#f2f2f2',paddingBottom:5},text_input:{flex:1,paddingLeft:10,color:'#008080'},text_footer:{color:COLORS.primary,fontSize:18}});export default LoginScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/LoginScreen.js"],"names":["React","useState","useEffect","Button","Avatar","Animatable","AsyncStorage","AuthContext","axiox","Icon","COLORS","SIZES","USER","LoginScreen","navigation","textError","setTextError","isLoading","setIsLoading","username","password","check_textInputChange","secureTextEntry","data","setData","login","object","userid","post","then","res","console","log","loginSaveState","position","department","name","lastname","nickname","phone","loginHandle","catch","err","userData","jsonAllValue","JSON","stringify","setItem","checkLoginState","getItem","jsonValue","userInfo","parse","useContext","signIn","textInputChange","val","length","handlePasswordChange","updateSecureTextEntry","styles","containerMobile","header","text_header","footer","text_footer","action","primary","text_input","alignSelf","color","marginTop","borderRadius","backgroundColor","fontSize","alignItems","justifyContent","StyleSheet","create","flex","borderTopLeftRadius","borderTopRightRadius","paddingHorizontal","paddingVertical","paddingBottom","logo","fontWeight","flexDirection","margin","borderBottomWidth","borderBottomColor","paddingLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, SafeAreaView, ScrollView, ActivityIndicator, StyleSheet, Platform } from 'react-native';\nimport { Button, Avatar } from 'react-native-paper';\nimport * as Animatable from 'react-native-animatable';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { AuthContext } from '../components/context';\nimport axiox from 'axios';\n\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport { COLORS, SIZES } from '../constants/theme';\nimport { USER } from '../constants/variables';\n\nconst LoginScreen = ({ navigation }) => {\n\n    const [textError, setTextError] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n    // const userInfo;\n\n    const [data, setData] = useState({\n        username: '',\n        password: '',\n        check_textInputChange: false,\n        secureTextEntry: true\n    });\n\n    const login = () => {\n        const object = {\n            userid: data.username,\n            password: data.password\n        }\n\n        axiox.post('https://program-api.herokuapp.com/login', object)\n            .then(res => {\n                console.log(res.data);\n                setIsLoading(false);\n                // setUserInfo(res.data);\n                loginSaveState(res.data);\n\n                USER.userid = res.data.userid;\n                USER.position = res.data.position;\n                USER.department = res.data.department;\n                USER.name = res.data.name;\n                USER.lastname = res.data.lastname;\n                USER.nickname = res.data.nickname;\n                USER.phone = res.data.phone;\n\n                loginHandle(res.data.userid, res.data.position, res.data.department);\n                \n            })\n            .catch(err => {\n                // showDialog();\n                // setTextQueue(\"การจองล้มเหลว \\nเนื่องจากคิวเต็ม\");\n                // setStatus(\"จองคิวล้มเหลว\");\n                setTextError(\"User ID หรือ Password ไม่ถูกต้อง\")\n                console.log(err)\n                setIsLoading(false);\n            });\n\n    }\n\n    const loginSaveState = async (userData) => {\n        try {\n          \n            const jsonAllValue = JSON.stringify(userData);\n            console.log(jsonAllValue);\n            await AsyncStorage.setItem('user_login', jsonAllValue);\n\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    const checkLoginState = async () => {\n        try {\n            const jsonValue = await AsyncStorage.getItem('user_login');\n            // var allData = [];\n            if (jsonValue !== null) {\n               \n                const userInfo = JSON.parse(jsonValue); \n\n                console.log(userInfo);\n\n                USER.userid = userInfo.userid;\n                USER.position = userInfo.position;\n                USER.department = userInfo.department;\n                USER.name = userInfo.name;\n                USER.lastname = userInfo.lastname;\n                USER.nickname = userInfo.nickname;\n                USER.phone = userInfo.phone;\n\n                loginHandle(userInfo.userid, userInfo.position, userInfo.department)\n                // allData.push(newValue);\n            }\n            else {\n                // allData.push(newValue);\n            }\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n\n    useEffect(() => {\n        // setTimeout(() => {\n            checkLoginState();\n        //  }, 2000);\n    \n    }, []);\n\n    const { signIn } = React.useContext(AuthContext);\n\n    const textInputChange = (val) => {\n        if (val.length != 0) {\n            setData({\n                ...data,\n                username: val,\n                check_textInputChange: true\n            });\n        } else {\n            setData({\n                ...data,\n                username: val,\n                check_textInputChange: false\n            });\n        }\n    }\n\n    const handlePasswordChange = (val) => {\n        setData({\n            ...data,\n            password: val,\n        });\n    }\n\n    const updateSecureTextEntry = (val) => {\n        setData({\n            ...data,\n            secureTextEntry: !data.secureTextEntry\n        });\n    }\n\n    const loginHandle = (username, position, department) => {\n        signIn(username, position, department);\n        // console.log(username, password);\n    }\n\n    return (\n        <View style={styles.containerMobile}>\n            <View style={styles.header}>\n\n                <Text style={styles.text_header}>แบบประเมินพนักงาน</Text>\n            </View>\n            {/* <Text> CAL</Text> */}\n            <Animatable.View style={styles.footer}\n                animation='fadeInUpBig'>\n                <Text style={styles.text_footer}>User ID</Text>\n                <View style={styles.action}>\n                    <Icon name='user'\n                        color={COLORS.primary}\n                        size={20} />\n                    <TextInput placeholder=\"User ID ...\"\n                        style={styles.text_input}\n                        onChangeText={(val) => textInputChange(val)} />\n                </View>\n\n                <Text style={styles.text_footer}>Password</Text>\n                <View style={styles.action}>\n                    <Icon name='lock'\n                        color={COLORS.primary}\n                        size={20} />\n                    <TextInput placeholder=\"Password ...\"\n                        style={styles.text_input}\n                        onChangeText={(val) => handlePasswordChange(val)} />\n                </View>\n\n                <Text style={{ alignSelf: 'center', color: 'red', marginTop: 26 }}>{textError}</Text>\n\n                <Button\n                    style={{ borderRadius: 10, marginTop: 16, backgroundColor: COLORS.primary }}\n                    // icon=\"camera\"\n                    mode=\"contained\"\n                    onPress={() => {\n                        setIsLoading(true);\n                        login();\n                    }}>\n                    <Text style={{ fontSize: 18 }}>เข้าสู่ระบบ</Text>\n                </Button>\n\n                {isLoading ?\n\n                    <ActivityIndicator style={{\n                        marginTop: 20,\n                        // position: 'absolute',\n                        // left: 0,\n                        // right: 0,\n                        // top: 0,\n                        // bottom: 0,\n                        alignItems: 'center',\n                        justifyContent: 'center'\n                    }} size=\"large\" color=\"#0275d8\" />\n\n                    :\n\n                    null\n                }\n\n\n            </Animatable.View>\n\n        </View>\n\n    );\n}\n\nconst styles = StyleSheet.create({\n    containerMobile: {\n        // justifyContent: 'center',\n        flex: 1,\n        backgroundColor: COLORS.primary\n    },\n    // containerWeb: {\n    //     alignSelf: 'center',\n    //     justifyContent: 'center',\n    //     width: SIZES.width/1.3,\n    //     flex: 1,\n    //     backgroundColor: COLORS.primary\n    // },\n    footer: {\n        flex: 4,\n        // justifyContent: 'center',\n        backgroundColor: 'white',\n        borderTopLeftRadius: 30,\n        borderTopRightRadius: 30,\n        paddingHorizontal: 20,\n        paddingVertical: 30\n    },\n    header: {\n        flex: 1,\n        justifyContent: 'flex-end',\n        paddingHorizontal: 20,\n        paddingBottom: 50,\n    },\n    logo: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        // marginTop: 50\n    },\n    text_header: {\n        alignSelf: 'center',\n        justifyContent: 'center',\n        color: 'white',\n        fontWeight: 'bold',\n        fontSize: 24\n    },\n    action: {\n        flexDirection: 'row',\n        margin: 10,\n        borderBottomWidth: 1,\n        borderBottomColor: '#f2f2f2',\n        paddingBottom: 5\n    },\n    text_input: {\n        flex: 1,\n        paddingLeft: 10,\n        color: '#008080'\n    },\n    text_footer: {\n        color: COLORS.primary,\n        fontSize: 18,\n    },\n})\n\nexport default LoginScreen;"]},"metadata":{},"sourceType":"module"}