{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import FlatList from\"react-native-web/dist/exports/FlatList\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import{Button,Card}from'react-native-paper';import Dialog from\"react-native-dialog\";import axiox from'axios';import{COLORS}from\"../constants/theme\";import Icon from\"@expo/vector-icons/FontAwesome\";import{Video,Audio}from'expo-av';import{LOGIN}from\"../constants/variables\";import moment from'moment';var QuestionnaireScreen=function QuestionnaireScreen(_ref){var navigation=_ref.navigation,route=_ref.route;var userId=LOGIN.userid;var year=route.params.year;var part=route.params.part;var answer;var video=React.useRef(null);var play=function play(){return video.current&&video.current.playAsync();};var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),status=_React$useState2[0],setStatus=_React$useState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVideo=_useState2[0],setIsVideo=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),questionAllStaffList=_useState4[0],setQuestionAllStaffList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),dialogConfirmAns=_useState8[0],setDialogConfirmAns=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),questionNumber=_useState10[0],setQuestionNumber=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),answerText=_useState12[0],setAnswerText=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),videoURLText=_useState14[0],setVideoURLText=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isEditVideo=_useState16[0],setIsEditVideo=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isAnswerError=_useState18[0],setAnserError=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),textInputValue=_useState20[0],setTextInputValue=_useState20[1];var allAnswers=[];var getQuestionnaireAllStaff=function getQuestionnaireAllStaff(){axiox.get('https://program-api.herokuapp.com/'+year+'/'+part+'/officer/'+userId).then(function(res){var data=res.data;console.log(data);setQuestionAllStaffList(data);{setLoading(false);}}).catch(function(err){console.log(err);});};var postAnswer=function postAnswer(){console.log(answer);axiox.post('https://program-api.herokuapp.com/'+year+'/'+part+'/'+answer.number+'/Answer/officer/'+userId,answer).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);});};var updateAnswer=function updateAnswer(){console.log(answer);axiox.put('https://program-api.herokuapp.com/'+year+'/'+part+'/'+answer.number+'/Answer/officer/'+userId,answer).then(function(res){console.log(\"response: \",res);}).catch(function(err){console.error(err);});};useEffect(function(){setLoading(true);getQuestionnaireAllStaff();},[]);var renderQuestionnaireAllStaff=function renderQuestionnaireAllStaff(_ref2){var navigation=_ref2.navigation;var renderItem=function renderItem(_ref3){var item=_ref3.item,index=_ref3.index;allAnswers[index]=item.answer;console.log(allAnswers);return React.createElement(View,{style:{margin:8,borderWidth:1,borderRadius:5,elevation:5,padding:8,backgroundColor:'#fff'}},React.createElement(Text,{style:{fontSize:16,fontWeight:'bold'}},item.number,\". \",item.qt),item.answer===undefined?React.createElement(View,null,React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginVertical:8,height:100},placeholder:\"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){setAnswerText(text);}}),React.createElement(Button,{style:{backgroundColor:'gray',borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){setDialogConfirmAns(true);if(answerText!=\"\"){var answerObject={userid:LOGIN.userid,videoURL:item.videoURL,answer:answerText,number:item.number,qt:item.qt,date:moment().format('yyyy-MM-DD'),year:year};setAnserError(false);setAnswerText(\"\");answer=answerObject;item.answer=answerText;postAnswer();}else{setAnserError(true);}}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\"))):React.createElement(View,null,React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginVertical:8,height:100},placeholder:\"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"green\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){setAnswerText(text);},defaultValue:allAnswers[index]}),React.createElement(Button,{style:{backgroundColor:'green',borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){setDialogConfirmAns(true);if(answerText!=\"\"){var answerObject={userid:LOGIN.userid,videoURL:item.videoURL,answer:answerText,number:item.number,qt:item.qt,date:moment().format('yyyy-MM-DD'),year:year};setAnserError(false);answer=answerObject;item.answer=answerText;updateAnswer();setAnswerText(\"\");}else{setAnserError(true);}}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\\u0E2D\\u0E35\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\"))));};if(isLoading===false&&questionAllStaffList.length===0){return React.createElement(View,{style:{alignItems:'center',marginTop:48}},React.createElement(Text,{style:{fontSize:24,color:'red',justifyContent:'center'}},\"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\"));}else{return React.createElement(FlatList,{data:questionAllStaffList,extraData:questionAllStaffList,keyExtractor:function keyExtractor(item){return\"\"+item;},renderItem:renderItem,ListHeaderComponent:function ListHeaderComponent(){return React.createElement(View,{style:{backgroundColor:'#D3D3D3'}},React.createElement(View,{style:{padding:8,backgroundColor:COLORS.primary,width:'100%'}},React.createElement(Text,{style:{alignSelf:'center',color:'white',fontSize:20}},\"\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19 \\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\\u0E17\\u0E38\\u0E01\\u0E23\\u0E30\\u0E14\\u0E31\\u0E1A\")),React.createElement(Text,{style:{marginVertical:4,alignSelf:'center',color:'red'}},\"*** \\u0E01\\u0E14\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\\u0E17\\u0E38\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E01\\u0E48\\u0E2D\\u0E19\\u0E08\\u0E30\\u0E17\\u0E33\\u0E02\\u0E49\\u0E2D\\u0E43\\u0E2B\\u0E21\\u0E48 ***\"));},stickyHeaderIndices:[0]});}};return React.createElement(SafeAreaView,{style:{flex:1}},renderQuestionnaireAllStaff({navigation:navigation}),questionAllStaffList.length!=0&&(questionAllStaffList[0].videoURL===undefined||questionAllStaffList[0].videoURL===\"\")?React.createElement(View,{style:{margin:16}},React.createElement(Button,{style:{backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){setIsEditVideo(true);}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\"))):questionAllStaffList.length!=0&&questionAllStaffList[0].videoURL!=\"\"?React.createElement(View,{style:{margin:16,flexDirection:'row',justifyContent:'center'}},React.createElement(Button,{style:{flex:1,backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8,marginRight:4},mode:\"Contained\",onPress:function onPress(){navigation.navigate('VideoWebView',{videoURL:questionAllStaffList[0].videoURL});}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E14\\u0E39\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\")),React.createElement(Button,{style:{flex:1,backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8,marginLeft:4},mode:\"Contained\",onPress:function onPress(){setIsEditVideo(true);}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\"))):null,React.createElement(Dialog.Container,{visible:dialogConfirmAns},React.createElement(Dialog.Title,{style:{fontSize:20,fontWeight:'bold'}},\"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\"),React.createElement(Dialog.Description,{style:{fontSize:18,padding:16}},\"\\u0E2B\\u0E32\\u0E01\\u0E17\\u0E33\\u0E01\\u0E32\\u0E23\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E43\\u0E2B\\u0E49\\u0E04\\u0E25\\u0E34\\u0E01\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2D\\u0E35\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\"),React.createElement(Dialog.Button,{label:\"\\u0E15\\u0E01\\u0E25\\u0E07\",onPress:function onPress(){setDialogConfirmAns(false);}})),React.createElement(Dialog.Container,{visible:isEditVideo},React.createElement(Dialog.Title,{style:{fontSize:20,fontWeight:'bold'}},\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\"),React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginHorizontal:16},placeholder:\":url\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){questionAllStaffList[0].videoURL=text;}}),React.createElement(Dialog.Button,{label:\"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",onPress:function onPress(){setIsEditVideo(false);}}),React.createElement(Dialog.Button,{label:\"\\u0E15\\u0E01\\u0E25\\u0E07\",onPress:function onPress(){var currentObject={userid:questionAllStaffList[0].userid,year:questionAllStaffList[0].year,number:questionAllStaffList[0].number,qt:questionAllStaffList[0].qt,answer:questionAllStaffList[0].answer,videoURL:questionAllStaffList[0].videoURL,date:moment(questionAllStaffList[0].date).format('yyyy-MM-DD')};console.log(currentObject);{questionAllStaffList[0].videoURL===undefined?axiox.post('https://program-api.herokuapp.com/'+year+'/'+part+'/1/Answer/officer/'+userId,currentObject).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);}):axiox.put('https://program-api.herokuapp.com/'+year+'/'+part+'/1/Answer/officer/'+userId,currentObject).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);});}setIsEditVideo(false);}})),isLoading?React.createElement(ActivityIndicator,{style:{position:'absolute',left:0,right:0,top:0,bottom:0,alignItems:'center',justifyContent:'center'},size:\"large\",color:\"#0275d8\"}):null);};var styles=StyleSheet.create({button_confirm:{}});export default QuestionnaireScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/QuestionnaireAllStaffScreen.js"],"names":["React","useState","useEffect","Button","Card","Dialog","axiox","COLORS","Icon","Video","Audio","LOGIN","moment","QuestionnaireScreen","navigation","route","userId","userid","year","params","part","answer","video","useRef","play","current","playAsync","status","setStatus","isVideo","setIsVideo","questionAllStaffList","setQuestionAllStaffList","isLoading","setLoading","dialogConfirmAns","setDialogConfirmAns","questionNumber","setQuestionNumber","answerText","setAnswerText","videoURLText","setVideoURLText","isEditVideo","setIsEditVideo","isAnswerError","setAnserError","textInputValue","setTextInputValue","allAnswers","getQuestionnaireAllStaff","get","then","res","data","console","log","catch","err","postAnswer","post","number","updateAnswer","put","error","renderQuestionnaireAllStaff","renderItem","item","index","margin","borderWidth","borderRadius","elevation","padding","backgroundColor","fontSize","fontWeight","qt","undefined","marginVertical","height","text","answerObject","videoURL","date","format","alignSelf","color","length","alignItems","marginTop","justifyContent","primary","width","flex","flexDirection","marginRight","navigate","marginLeft","marginHorizontal","currentObject","position","left","right","top","bottom","styles","StyleSheet","create","button_confirm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, SafeAreaView, FlatList, StyleSheet, ActivityIndicator, ScrollView } from 'react-native';\nimport { Button, Card } from 'react-native-paper';\n// import { FlatList } from 'react-native-gesture-handler';\nimport Dialog from \"react-native-dialog\";\nimport axiox from 'axios';\nimport { COLORS } from '../constants/theme';\n\nimport Icon from 'react-native-vector-icons/FontAwesome';\n\nimport { Video, Audio } from 'expo-av';\nimport { LOGIN } from '../constants/variables';\nimport moment from 'moment';\nconst QuestionnaireScreen = ({ navigation, route }) => {\n\n    let userId = LOGIN.userid;\n    // console.log(userId);\n    let year = route.params.year;\n    let part = route.params.part;\n\n    var answer;\n\n    const video = React.useRef(null);\n    const play = () => video.current && video.current.playAsync()\n    const [status, setStatus] = React.useState({});\n    const [isVideo, setIsVideo] = useState(false);\n\n    const [questionAllStaffList, setQuestionAllStaffList] = useState([]);\n\n    const [isLoading, setLoading] = useState(false);\n    const [dialogConfirmAns, setDialogConfirmAns] = useState(false);\n    // const [dialogURL, setDialogURL] = useState(false);\n\n    const [questionNumber, setQuestionNumber] = useState(\"\");\n    // Answer\n    const [answerText, setAnswerText] = useState(\"\");\n    // Video URL\n    const [videoURLText, setVideoURLText] = useState(\"\");\n    const [isEditVideo, setIsEditVideo] = useState(false);\n    const [isAnswerError, setAnserError] = useState(false);\n\n    // const [answer, setAnswer] = useState({});\n    const [textInputValue, setTextInputValue] = useState([]);\n\n    var allAnswers = [];\n\n    const getQuestionnaireAllStaff = () => {\n        axiox.get('https://program-api.herokuapp.com/' + year + '/' + part + '/officer/' + userId)\n            .then(res => {\n                const data = res.data;\n                console.log(data);\n                setQuestionAllStaffList(data);\n                { setLoading(false) }\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    };\n\n    const postAnswer = () => {\n        console.log(answer);\n        axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/officer/' + userId, answer)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n\n            })\n            .catch(err => {\n                console.log(err)\n            });\n    }\n\n    const updateAnswer = () => {\n        console.log(answer);\n        axiox\n            .put('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(\"response: \", res)\n                // do something about response\n            })\n            .catch(err => {\n                console.error(err)\n            })\n    }\n\n    useEffect(() => {\n        setLoading(true);\n        getQuestionnaireAllStaff();\n    }, []);\n\n    const renderQuestionnaireAllStaff = ({ navigation }) => {\n\n        const renderItem = ({ item, index }) => {\n            // const textInfo = \"บันทึกคำตอบแล้ว\\nเมื่อทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง\"\n            // console.log(index);\n            allAnswers[index] = item.answer;\n\n            // textInputValue[index] = item.answer\n            console.log(allAnswers);\n            return (\n                <View style={{\n                    margin: 8,\n                    borderWidth: 1,\n                    // borderColor: 'gray',\n                    borderRadius: 5,\n                    elevation: 5,\n                    padding: 8,\n                    backgroundColor: '#fff'\n                    // borderColor: COLORS.primary\n                    // \n                }} >\n                    <Text style={{\n                        fontSize: 16,\n                        fontWeight: 'bold',\n\n                    }}>{item.number}. {item.qt}</Text>\n\n                    {item.answer === undefined ?\n                        <View>\n                            <TextInput\n                                style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                // textContentType='telephoneNumber'\n                                placeholder=\"คำตอบ\"\n                                placeholderTextColor=\"gray\"\n                                multiline\n                                numberOfLines={6}\n                                color='blue'\n                                fontSize={16}\n                                onChangeText={text => {\n                                    // setAnserError(false);\n                                    setAnswerText(text);\n                                }}\n                            />\n                            <Button\n                                style={{\n                                    backgroundColor: 'gray',\n                                    borderRadius: 10,\n                                    marginVertical: 8\n                                }}\n                                mode=\"Contained\"\n                                onPress={() => {\n                                    // dialogConfirmAnswer({ index });\n                                    setDialogConfirmAns(true);\n\n                                    if (answerText != \"\") {\n                                        var answerObject = {\n                                            userid: LOGIN.userid,\n                                            videoURL: item.videoURL,\n                                            answer: answerText,\n                                            number: item.number,\n                                            qt: item.qt,\n                                            date: moment().format('yyyy-MM-DD'),\n                                            year: year\n                                        };\n                                        // setDialogAnswer(false);\n                                        setAnserError(false);\n                                        setAnswerText(\"\");\n                                        // setVideoURLText(\"\");\n                                        answer = answerObject;\n                                        item.answer = answerText;\n                                        // allAnswers[index] = item.answer\n                                        // console.log(answer);\n                                        postAnswer();\n                                    }\n\n                                    else {\n                                        setAnserError(true);\n                                    }\n\n                                    // console.log(questionAllStaffList);\n\n                                }}>\n                                <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบ</Text>\n\n                            </Button>\n                        </View>\n\n                        :\n\n                        <View>\n                            <TextInput\n                                style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                // textContentType='telephoneNumber'\n                                placeholder=\"คำตอบ\"\n                                placeholderTextColor=\"green\"\n                                multiline\n                                numberOfLines={6}\n                                color='blue'\n                                fontSize={16}\n                                onChangeText={text => {\n                                    setAnswerText(text);\n                                }}\n                                defaultValue={allAnswers[index]}\n                            />\n                            <Button\n                                style={{\n                                    backgroundColor: 'green',\n                                    borderRadius: 10,\n                                    marginVertical: 8\n                                }}\n                                mode=\"Contained\"\n                                onPress={() => {\n\n                                    setDialogConfirmAns(true);\n\n                                    if (answerText != \"\") {\n                                        var answerObject = {\n                                            userid: LOGIN.userid,\n                                            videoURL: item.videoURL,\n                                            answer: answerText,\n                                            number: item.number,\n                                            qt: item.qt,\n                                            date: moment().format('yyyy-MM-DD'),\n                                            year: year\n                                        };\n                                        // setDialogAnswer(false);\n                                        setAnserError(false);\n                                        // \n                                        // setVideoURLText(\"\");\n                                        answer = answerObject;\n                                        item.answer = answerText;\n                                        updateAnswer();\n                                        setAnswerText(\"\");\n\n                                        // setDialogConfirmAns(false);\n                                        // setAnswer({});\n                                    }\n                                    else {\n                                        setAnserError(true);\n                                    }\n\n                                    // console.log(questionAllStaffList);\n\n                                }}>\n                                <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบอีกครั้ง</Text>\n\n                            </Button>\n                        </View>\n\n                    }\n                </View>\n\n            );\n        }\n\n        if (isLoading === false && questionAllStaffList.length === 0) {\n            return (\n                <View style={{\n                    alignItems: 'center',\n                    marginTop: 48\n                }}>\n                    <Text style={{\n                        fontSize: 24,\n                        color: 'red',\n                        justifyContent: 'center',\n                    }}>ไม่พบแบบประเมิน</Text>\n                </View>\n            );\n        } else {\n            return (\n\n                <FlatList\n                    data={questionAllStaffList}\n                    extraData={questionAllStaffList}\n                    keyExtractor={(item) => `${item}`}\n\n                    renderItem={renderItem}\n                    ListHeaderComponent={() => {\n                        return (\n                            <View style={{ backgroundColor: '#D3D3D3' }}>\n                                <View style={{ padding: 8, backgroundColor: COLORS.primary, width: '100%' }}>\n                                    <Text style={{ alignSelf: 'center', color: 'white', fontSize: 20 }}>\n                                        แบบประเมิน พนักงานทุกระดับ\n                                    </Text>\n                                </View>\n                                <Text style={{ marginVertical: 4, alignSelf: 'center', color: 'red' }}>*** กดส่งคำตอบทุกครั้งก่อนจะทำข้อใหม่ ***</Text>\n                            </View>\n\n                        );\n                    }}\n                    stickyHeaderIndices={[0]}\n                />\n            );\n        }\n\n    }\n\n    // QuestionnaireScreen\n\n    return (\n        <SafeAreaView style={{ flex: 1 }}>\n\n            {renderQuestionnaireAllStaff({ navigation })}\n\n            {questionAllStaffList.length != 0 && (questionAllStaffList[0].videoURL === undefined || questionAllStaffList[0].videoURL === \"\") ?\n\n                <View style={{ margin: 16 }}>\n                    <Button style={{\n                        backgroundColor: COLORS.primary,\n                        borderRadius: 10,\n                        marginVertical: 8\n                    }}\n                        mode=\"Contained\"\n                        onPress={() => { setIsEditVideo(true) }}>\n                        <Text style={{ alignSelf: 'center', color: 'white' }}>เพิ่มลิ้งค์วิดีโอ</Text>\n                    </Button>\n                </View>\n\n                :\n                questionAllStaffList.length != 0 && questionAllStaffList[0].videoURL != \"\" ?\n                    <View style={{ margin: 16, flexDirection: 'row', justifyContent: 'center' }}>\n                        <Button style={{\n                            flex: 1,\n                            backgroundColor: COLORS.primary,\n                            borderRadius: 10,\n                            marginVertical: 8,\n                            marginRight: 4\n\n                        }}\n                            mode=\"Contained\"\n                            onPress={() => {\n                                // console.log(questionAllStaffList[0].videoURL);\n                                navigation.navigate('VideoWebView', { videoURL: questionAllStaffList[0].videoURL })\n\n                            }}>\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>ดูวิดีโอ</Text>\n                        </Button>\n\n                        <Button style={{\n                            flex: 1,\n                            backgroundColor: COLORS.primary,\n                            borderRadius: 10,\n                            marginVertical: 8,\n                            marginLeft: 4\n                        }}\n                            mode=\"Contained\"\n                            onPress={() => { setIsEditVideo(true) }}>\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>แก้ไขลิ้งค์</Text>\n                        </Button>\n                    </View>\n                    :\n                    null\n            }\n\n            <Dialog.Container visible={dialogConfirmAns}>\n                <Dialog.Title style={{ fontSize: 20, fontWeight: 'bold' }}>บันทึกข้อมูลสำเร็จ</Dialog.Title>\n                <Dialog.Description style={{ fontSize: 18, padding: 16 }}>หากทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง</Dialog.Description>\n\n                <Dialog.Button\n                    label=\"ตกลง\"\n                    onPress={() => {\n                        setDialogConfirmAns(false);\n                    }} />\n\n            </Dialog.Container>\n\n            {/* Upload Video */}\n            <Dialog.Container visible={isEditVideo}>\n                <Dialog.Title style={{ fontSize: 20, fontWeight: 'bold' }}>เพิ่มลิ้งค์วิดีโอ</Dialog.Title>\n                {/* <Dialog.Description style={{ fontSize: 18, padding: 16 }}>หากทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง</Dialog.Description> */}\n                <TextInput\n                    style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginHorizontal: 16 }}\n                    // textContentType='telephoneNumber'\n                    placeholder=\":url\"\n                    placeholderTextColor=\"gray\"\n                    multiline\n                    numberOfLines={6}\n                    color='blue'\n                    fontSize={16}\n                    onChangeText={text => {\n                        // setAnserError(false);\n                        // setVideoLink(text)\n                        questionAllStaffList[0].videoURL = text\n                    }}\n                />\n                <Dialog.Button\n                    label=\"ยกเลิก\"\n                    onPress={() => {\n                        setIsEditVideo(false);\n                    }} />\n\n                <Dialog.Button\n                    label=\"ตกลง\"\n                    onPress={() => {\n                        const currentObject = {\n                            userid: questionAllStaffList[0].userid,\n                            year: questionAllStaffList[0].year,\n                            number: questionAllStaffList[0].number,\n                            qt: questionAllStaffList[0].qt,\n                            answer: questionAllStaffList[0].answer,\n                            videoURL: questionAllStaffList[0].videoURL,\n                            date: moment(questionAllStaffList[0].date).format('yyyy-MM-DD'),\n\n                        }\n                        console.log(currentObject);\n                        {\n                            questionAllStaffList[0].videoURL === undefined ?\n                                axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/officer/' + userId, currentObject)\n                                    .then(res => {\n                                        console.log(res.data);\n                                    })\n                                    .catch(err => {\n                                        console.log(err)\n                                    })\n                                :\n                                axiox.put('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/officer/' + userId, currentObject)\n                                    .then(res => {\n                                        // storeData(res.data)\n                                        console.log(res.data);\n\n                                    })\n                                    .catch(err => {\n                                        console.log(err)\n                                    });\n                        }\n                        setIsEditVideo(false);\n                    }} />\n\n\n            </Dialog.Container>\n\n\n            {isLoading ?\n\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n\n                :\n\n                null\n\n            }\n\n        </SafeAreaView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    button_confirm: {\n\n    }\n})\n\nexport default QuestionnaireScreen;"]},"metadata":{},"sourceType":"module"}