{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import FlatList from\"react-native-web/dist/exports/FlatList\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import{Button,Card}from'react-native-paper';import Icon from\"@expo/vector-icons/FontAwesome\";import{WebView}from'react-native-webview';import{Video,Audio}from'expo-av';import Dialog from\"react-native-dialog\";import axiox from'axios';import{COLORS}from\"../constants/theme\";import moment from'moment';import'moment/locale/th';import{LOGIN}from\"../constants/variables\";var QuestionnaireManagerScreen=function QuestionnaireManagerScreen(_ref){var navigation=_ref.navigation,route=_ref.route;var userId=LOGIN.userid;var year=route.params.year;var part=route.params.part;var answer;var video=React.useRef(null);var play=function play(){return video.current&&video.current.playAsync();};var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),status=_React$useState2[0],setStatus=_React$useState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVideo=_useState2[0],setIsVideo=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),managerList=_useState4[0],setManagerList=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),questionNumber=_useState6[0],setQuestionNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),answerText=_useState8[0],setAnswerText=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isAnswerError=_useState10[0],setAnserError=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isEditVideo=_useState12[0],setIsEditVideo=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),videoLink=_useState14[0],setVideoLink=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isLoading=_useState16[0],setLoading=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),dialogConfirmAns=_useState18[0],setDialogConfirmAns=_useState18[1];var allAnswers=[];var getQuestionnaireManager=function getQuestionnaireManager(){axiox.get('https://program-api.herokuapp.com/'+year+'/'+part+'/manager/'+userId).then(function(res){var data=res.data;console.log(data);setManagerList(data);{setLoading(false);}}).catch(function(err){console.log(err);});};var postAnswer=function postAnswer(){console.log(answer);axiox.post('https://program-api.herokuapp.com/'+year+'/'+part+'/'+answer.number+'/Answer/manager/'+userId,answer).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);});};var updateAnswer=function updateAnswer(){console.log(answer);axiox.put('https://program-api.herokuapp.com/'+year+'/'+part+'/'+answer.number+'/Answer/manager/'+userId,answer).then(function(res){console.log(\"response: \",res);}).catch(function(err){console.error(err);});};useEffect(function(){setLoading(true);getQuestionnaireManager();},[]);var renderQuestionnaireManager=function renderQuestionnaireManager(_ref2){var navigation=_ref2.navigation;var renderItem=function renderItem(_ref3){var item=_ref3.item,index=_ref3.index;allAnswers[index]=item.answer;return React.createElement(View,{style:{margin:8,borderWidth:1,borderRadius:5,elevation:5,padding:8,backgroundColor:'#fff'}},React.createElement(Text,{style:{fontSize:16,fontWeight:'bold'}},item.number,\". \",item.qt),item.answer===undefined?React.createElement(View,null,React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginVertical:8,height:100},placeholder:\"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){setAnswerText(text);}}),React.createElement(Button,{style:{backgroundColor:'gray',borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){setDialogConfirmAns(true);setQuestionNumber(item.number);if(answerText!=\"\"){var answerObject={user_id:LOGIN.userid,date:moment().format('yyyy-MM-DD'),answer:answerText,number:item.number,qt:item.qt,year:year};setAnserError(false);setAnswerText(\"\");answer=answerObject;item.answer=answerText;postAnswer();}else{setAnserError(true);}}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\"))):React.createElement(View,null,React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginVertical:8,height:100},placeholder:\"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){setAnswerText(text);},defaultValue:allAnswers[index]}),React.createElement(Button,{style:{backgroundColor:'green',borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){setDialogConfirmAns(true);setQuestionNumber(item.number);if(answerText!=\"\"){var answerObject={user_id:LOGIN.userid,date:moment().format('yyyy-MM-DD'),answer:answerText,number:item.number,qt:item.qt,year:year};setAnserError(false);answer=answerObject;item.answer=answerText;updateAnswer();setAnswerText(\"\");}else{setAnserError(true);}}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\\u0E2D\\u0E35\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\"))));};if(isLoading===false&&managerList.length===0){return React.createElement(View,{style:{alignItems:'center',marginTop:48}},React.createElement(Text,{style:{fontSize:24,color:'red',justifyContent:'center'}},\"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\"));}else{return React.createElement(FlatList,{data:managerList,extraData:managerList,keyExtractor:function keyExtractor(item){return\"\"+item;},renderItem:renderItem,ListHeaderComponent:function ListHeaderComponent(){return React.createElement(View,{style:{backgroundColor:'#D3D3D3'}},React.createElement(View,{style:{padding:8,backgroundColor:COLORS.primary,width:'100%'}},React.createElement(Text,{style:{alignSelf:'center',color:'white',fontSize:20}},\"\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19 \\u0E1C\\u0E39\\u0E49\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E16\\u0E32\\u0E21\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\")),React.createElement(Text,{style:{marginVertical:4,alignSelf:'center',color:'red',fontSize:14}},\"*** \\u0E01\\u0E14\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\\u0E17\\u0E38\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E01\\u0E48\\u0E2D\\u0E19\\u0E08\\u0E30\\u0E17\\u0E33\\u0E02\\u0E49\\u0E2D\\u0E43\\u0E2B\\u0E21\\u0E48 ***\"));},stickyHeaderIndices:[0]});}};return React.createElement(SafeAreaView,{style:{flex:1}},renderQuestionnaireManager({navigation:navigation}),managerList.length!=0&&(managerList[0].videoURL===undefined||managerList[0].videoURL===\"\")?React.createElement(View,{style:{margin:16}},React.createElement(Button,{style:{backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){setIsEditVideo(true);}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\"))):managerList.length!=0&&managerList[0].videoURL!=\"\"?React.createElement(View,{style:{margin:16,flexDirection:'row',justifyContent:'center'}},React.createElement(Button,{style:{flex:1,backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8,marginRight:4},mode:\"Contained\",onPress:function onPress(){navigation.navigate('VideoWebView',{videoURL:managerList[0].videoURL});}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E14\\u0E39\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\")),React.createElement(Button,{style:{flex:1,backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8,marginLeft:4},mode:\"Contained\",onPress:function onPress(){setIsEditVideo(true);}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\"))):null,React.createElement(Dialog.Container,{visible:dialogConfirmAns},React.createElement(Dialog.Title,{style:{fontSize:20,fontWeight:'bold'}},\"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\"),React.createElement(Dialog.Description,{style:{fontSize:18,padding:16}},\"\\u0E2B\\u0E32\\u0E01\\u0E17\\u0E33\\u0E01\\u0E32\\u0E23\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E43\\u0E2B\\u0E49\\u0E04\\u0E25\\u0E34\\u0E01\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2D\\u0E35\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\"),React.createElement(Dialog.Button,{label:\"\\u0E15\\u0E01\\u0E25\\u0E07\",onPress:function onPress(){setDialogConfirmAns(false);}})),isLoading?React.createElement(ActivityIndicator,{style:{position:'absolute',left:0,right:0,top:0,bottom:0,alignItems:'center',justifyContent:'center'},size:\"large\",color:\"#0275d8\"}):null,React.createElement(Dialog.Container,{visible:isEditVideo},React.createElement(Dialog.Title,{style:{fontSize:20,fontWeight:'bold'}},\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\"),React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginHorizontal:16},placeholder:\":url\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){managerList[0].videoURL=text;}}),React.createElement(Dialog.Button,{label:\"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",onPress:function onPress(){setIsEditVideo(false);}}),React.createElement(Dialog.Button,{label:\"\\u0E15\\u0E01\\u0E25\\u0E07\",onPress:function onPress(){var currentObject={userid:managerList[0].userid,year:managerList[0].year,number:managerList[0].number,qt:managerList[0].qt,answer:managerList[0].answer,videoURL:managerList[0].videoURL,date:moment(managerList[0].date).format('yyyy-MM-DD')};console.log(currentObject);{managerList[0].videoURL===undefined?axiox.post('https://program-api.herokuapp.com/'+year+'/'+part+'/1/Answer/manager/'+userId,currentObject).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);}):axiox.put('https://program-api.herokuapp.com/'+year+'/'+part+'/1/Answer/manager/'+userId,currentObject).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);});}setIsEditVideo(false);}})));};var styles=StyleSheet.create({container:{position:'absolute',top:0,left:0,right:0,bottom:0,justifyContent:'center',alignItems:'center'},video:{alignSelf:'center',width:320,height:200},buttons:{backgroundColor:'green',flexDirection:'row',justifyContent:'center',alignItems:'center'}});export default QuestionnaireManagerScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/QuestionnaireManagerScreen.js"],"names":["React","useState","useEffect","Button","Card","Icon","WebView","Video","Audio","Dialog","axiox","COLORS","moment","LOGIN","QuestionnaireManagerScreen","navigation","route","userId","userid","year","params","part","answer","video","useRef","play","current","playAsync","status","setStatus","isVideo","setIsVideo","managerList","setManagerList","questionNumber","setQuestionNumber","answerText","setAnswerText","isAnswerError","setAnserError","isEditVideo","setIsEditVideo","videoLink","setVideoLink","isLoading","setLoading","dialogConfirmAns","setDialogConfirmAns","allAnswers","getQuestionnaireManager","get","then","res","data","console","log","catch","err","postAnswer","post","number","updateAnswer","put","error","renderQuestionnaireManager","renderItem","item","index","margin","borderWidth","borderRadius","elevation","padding","backgroundColor","fontSize","fontWeight","qt","undefined","marginVertical","height","text","answerObject","user_id","date","format","alignSelf","color","length","alignItems","marginTop","justifyContent","primary","width","flex","videoURL","flexDirection","marginRight","navigate","marginLeft","position","left","right","top","bottom","marginHorizontal","currentObject","styles","StyleSheet","create","container","buttons"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, SafeAreaView, FlatList, StyleSheet, ActivityIndicator, ScrollView } from 'react-native';\nimport { Button, Card } from 'react-native-paper';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport { WebView } from 'react-native-webview';\nimport { Video, Audio } from 'expo-av';\n\nimport Dialog from \"react-native-dialog\";\nimport axiox from 'axios';\nimport { COLORS } from '../constants/theme';\n\nimport moment from 'moment';\nimport 'moment/locale/th';\n\nimport { LOGIN } from '../constants/variables';\n\nconst QuestionnaireManagerScreen = ({ navigation, route }) => {\n\n    let userId = LOGIN.userid;\n    let year = route.params.year;\n    let part = route.params.part;\n\n    var answer;\n\n    const video = React.useRef(null);\n    const play = () => video.current && video.current.playAsync()\n    const [status, setStatus] = React.useState({});\n    const [isVideo, setIsVideo] = useState(false);\n\n    const [managerList, setManagerList] = useState([]);\n    const [questionNumber, setQuestionNumber] = useState(0);\n\n    // Answer\n    const [answerText, setAnswerText] = useState(\"\");\n    const [isAnswerError, setAnserError] = useState(false);\n\n    // VideoURL\n    const [isEditVideo, setIsEditVideo] = useState(false);\n    const [videoLink, setVideoLink] = useState(\"\");\n\n    const [isLoading, setLoading] = useState(false);\n    const [dialogConfirmAns, setDialogConfirmAns] = useState(false);\n\n    var allAnswers = [];\n\n    const getQuestionnaireManager = () => {\n        axiox.get('https://program-api.herokuapp.com/' + year + '/' + part + '/manager/' + userId)\n            .then(res => {\n                const data = res.data;\n                console.log(data);\n                setManagerList(data);\n                { setLoading(false) }\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    };\n\n    const postAnswer = () => {\n        console.log(answer);\n        axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/manager/' + userId, answer)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n\n            })\n            .catch(err => {\n                console.log(err)\n            });\n    }\n\n    const updateAnswer = () => {\n        console.log(answer);\n        axiox\n            .put('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/manager/' + userId, answer)\n            .then(res => {\n                console.log(\"response: \", res)\n                // do something about response\n            })\n            .catch(err => {\n                console.error(err)\n            })\n    }\n\n\n    useEffect(() => {\n        setLoading(true);\n        getQuestionnaireManager();\n\n    }, []);\n\n    // Manager API\n\n    const renderQuestionnaireManager = ({ navigation }) => {\n\n        const renderItem = ({ item, index }) => {\n            // const textInfo = \"บันทึกคำตอบแล้ว\\nเมื่อทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง\"\n\n            allAnswers[index] = item.answer;\n\n            return (\n                <View style={{\n                    margin: 8,\n                    borderWidth: 1,\n                    // borderColor: 'gray',\n                    borderRadius: 5,\n                    elevation: 5,\n                    padding: 8,\n                    backgroundColor: '#fff'\n                    // borderColor: COLORS.primary\n                    // \n                }} >\n                    <Text style={{\n                        fontSize: 16,\n                        fontWeight: 'bold',\n\n                    }}>{item.number}. {item.qt}</Text>\n\n                    {item.answer === undefined ?\n                        <View>\n                            <TextInput\n                                style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                // textContentType='telephoneNumber'\n                                placeholder=\"คำตอบ\"\n                                placeholderTextColor=\"gray\"\n                                multiline\n                                numberOfLines={6}\n                                color='blue'\n                                fontSize={16}\n                                onChangeText={text => {\n                                    // setAnserError(false);\n                                    setAnswerText(text)\n                                }}\n                            />\n                            <Button\n                                style={{\n                                    backgroundColor: 'gray',\n                                    borderRadius: 10,\n                                    marginVertical: 8\n                                }}\n                                mode=\"Contained\"\n                                onPress={() => {\n                                    // dialogConfirmAnswer({ index });\n                                    setDialogConfirmAns(true);\n\n                                    setQuestionNumber(item.number);\n                                    if (answerText != \"\") {\n                                        var answerObject = {\n                                            user_id: LOGIN.userid,\n                                            date: moment().format('yyyy-MM-DD'),\n                                            // video_url: videoURLText,\n                                            answer: answerText,\n                                            number: item.number,\n                                            qt: item.qt,\n                                            year: year\n                                        };\n\n                                        setAnserError(false);\n                                        setAnswerText(\"\");\n                                        // setVideoURLText(\"\");\n                                        answer = answerObject;\n                                        item.answer = answerText;\n                                        // setDialogConfirmAns(false);\n                                        postAnswer();\n                                    }\n                                    else {\n                                        setAnserError(true);\n                                    }\n\n                                    // console.log(questionAllStaffList);\n\n                                }}>\n                                <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบ</Text>\n\n                            </Button>\n                        </View>\n\n                        :\n\n                        <View>\n                            <TextInput\n                                style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                // textContentType='telephoneNumber'\n                                placeholder=\"คำตอบ\"\n                                placeholderTextColor=\"gray\"\n                                multiline\n                                numberOfLines={6}\n                                color='blue'\n                                fontSize={16}\n                                // text=\"dfsdfsdf\"\n                                onChangeText={text => {\n                                    // setAnserError(false);\n                                    setAnswerText(text);\n                                }}\n                                defaultValue={allAnswers[index]}\n                            />\n\n                            <Button\n                                style={{\n                                    backgroundColor: 'green',\n                                    borderRadius: 10,\n                                    marginVertical: 8\n                                }}\n                                mode=\"Contained\"\n                                onPress={() => {\n                                    // dialogConfirmAnswer({ index });\n                                    setDialogConfirmAns(true);\n\n                                    setQuestionNumber(item.number);\n                                    if (answerText != \"\") {\n                                        var answerObject = {\n                                            user_id: LOGIN.userid,\n                                            date: moment().format('yyyy-MM-DD'),\n                                            // video_url: videoURLText,\n                                            answer: answerText,\n                                            number: item.number,\n                                            qt: item.qt,\n                                            year: year\n                                        };\n                                        // setDialogAnswer(false);\n                                        setAnserError(false);\n                                       \n                                        answer = answerObject;\n                                        item.answer = answerText;\n                                        updateAnswer();\n                                        setAnswerText(\"\");\n\n                                        // setDialogConfirmAns(false);\n                                        // setAnswer({});\n                                    }\n                                    else {\n                                        setAnserError(true);\n                                    }\n\n                                    // console.log(questionAllStaffList);\n\n                                }}>\n                                <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบอีกครั้ง</Text>\n\n                            </Button>\n                        </View>\n                    }\n\n                </View>\n\n            );\n        }\n\n        if (isLoading === false && managerList.length === 0) {\n            return (\n                <View style={{\n                    alignItems: 'center',\n                    marginTop: 48\n                }}>\n                    <Text style={{\n                        fontSize: 24,\n                        color: 'red',\n                        justifyContent: 'center',\n                    }}>ไม่พบแบบประเมิน</Text>\n                </View>\n            );\n\n        } else {\n\n            return (\n                <FlatList\n                    data={managerList}\n                    extraData={managerList}\n                    keyExtractor={(item) => `${item}`}\n                    renderItem={renderItem}\n                    ListHeaderComponent={() => {\n                        return (\n                            <View style={{ backgroundColor: '#D3D3D3' }}>\n                                <View style={{ padding: 8, backgroundColor: COLORS.primary, width: '100%' }}>\n                                    <Text style={{ alignSelf: 'center', color: 'white', fontSize: 20 }}>\n                                        แบบประเมิน ผู้จัดการถามพนักงาน\n                                    </Text>\n                                </View>\n                                <Text style={{ marginVertical: 4, alignSelf: 'center', color: 'red', fontSize: 14 }}>*** กดส่งคำตอบทุกครั้งก่อนจะทำข้อใหม่ ***</Text>\n                                {/* <Text style={{ marginBottom: 4, alignSelf: 'center', color: 'red', fontSize: 14 }}>เมื่อครบทุกข้อให้คลิก ส่งคำตอบ</Text> */}\n                            </View>\n\n                        );\n                    }}\n                    stickyHeaderIndices={[0]}\n\n                />\n\n            );\n        }\n    }\n\n    return (\n        <SafeAreaView style={{ flex: 1, }}>\n\n            {renderQuestionnaireManager({ navigation })}\n\n            {managerList.length != 0 && (managerList[0].videoURL === undefined || managerList[0].videoURL === \"\") ?\n\n                <View style={{ margin: 16 }}>\n                    <Button style={{\n                        backgroundColor: COLORS.primary,\n                        borderRadius: 10,\n                        marginVertical: 8\n                    }}\n                        mode=\"Contained\"\n                        onPress={() => { setIsEditVideo(true) }}>\n                        <Text style={{ alignSelf: 'center', color: 'white' }}>เพิ่มลิ้งค์วิดีโอ</Text>\n                    </Button>\n                </View>\n\n                :\n                managerList.length != 0 && managerList[0].videoURL != \"\" ?\n                    <View style={{ margin: 16, flexDirection: 'row', justifyContent: 'center' }}>\n                        <Button style={{\n                            flex: 1,\n                            backgroundColor: COLORS.primary,\n                            borderRadius: 10,\n                            marginVertical: 8,\n                            marginRight: 4\n\n                        }}\n                            mode=\"Contained\"\n                            onPress={() => {\n                                // console.log(questionManagerList[0].videoURL);\n                                navigation.navigate('VideoWebView', { videoURL: managerList[0].videoURL })\n\n                            }}>\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>ดูวิดีโอ</Text>\n                        </Button>\n\n                        <Button style={{\n                            flex: 1,\n                            backgroundColor: COLORS.primary,\n                            borderRadius: 10,\n                            marginVertical: 8,\n                            marginLeft: 4\n                        }}\n                            mode=\"Contained\"\n                            onPress={() => { setIsEditVideo(true) }}>\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>แก้ไขลิ้งค์</Text>\n                        </Button>\n                    </View>\n                    :\n                    null\n            }\n\n            {/* Dialog Confirm Answer */}\n            <Dialog.Container visible={dialogConfirmAns}>\n                <Dialog.Title style={{ fontSize: 20, fontWeight: 'bold' }}>บันทึกข้อมูลสำเร็จ</Dialog.Title>\n                <Dialog.Description style={{ fontSize: 18, padding: 16 }}>หากทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง</Dialog.Description>\n\n                <Dialog.Button\n                    label=\"ตกลง\"\n                    onPress={() => {\n\n                        setDialogConfirmAns(false);\n                    }} />\n\n            </Dialog.Container>\n\n            {/* Loading */}\n            {isLoading ?\n\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                null\n            }\n\n             {/* Upload Video */}\n             <Dialog.Container visible={isEditVideo}>\n                <Dialog.Title style={{ fontSize: 20, fontWeight: 'bold' }}>เพิ่มลิ้งค์วิดีโอ</Dialog.Title>\n                {/* <Dialog.Description style={{ fontSize: 18, padding: 16 }}>หากทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง</Dialog.Description> */}\n                <TextInput\n                    style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginHorizontal: 16 }}\n                    // textContentType='telephoneNumber'\n                    placeholder=\":url\"\n                    placeholderTextColor=\"gray\"\n                    multiline\n                    numberOfLines={6}\n                    color='blue'\n                    fontSize={16}\n                    onChangeText={text => {\n                        // setAnserError(false);\n                        // setVideoLink(text)\n                        managerList[0].videoURL = text\n                    }}\n                />\n                <Dialog.Button\n                    label=\"ยกเลิก\"\n                    onPress={() => {\n                        setIsEditVideo(false);\n                    }} />\n\n                <Dialog.Button\n                    label=\"ตกลง\"\n                    onPress={() => {\n                        const currentObject = {\n                            userid: managerList[0].userid,\n                            year: managerList[0].year,\n                            number: managerList[0].number,\n                            qt: managerList[0].qt,\n                            answer: managerList[0].answer,\n                            videoURL: managerList[0].videoURL,\n                            date: moment(managerList[0].date).format('yyyy-MM-DD'),\n\n                        }\n                        console.log(currentObject);\n                        {\n                            managerList[0].videoURL === undefined ?\n                                axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject)\n                                    .then(res => {\n                                        console.log(res.data);\n                                    })\n                                    .catch(err => {\n                                        console.log(err)\n                                    })\n                                :\n                                axiox.put('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject)\n                                    .then(res => {\n                                        // storeData(res.data)\n                                        console.log(res.data);\n\n                                    })\n                                    .catch(err => {\n                                        console.log(err)\n                                    });\n                        }\n                        setIsEditVideo(false);\n                    }} />\n\n\n            </Dialog.Container>\n\n        </SafeAreaView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        // backgroundColor: 'black',\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    video: {\n        alignSelf: 'center',\n        width: 320,\n        height: 200,\n    },\n    buttons: {\n        backgroundColor: 'green',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n})\n\nexport default QuestionnaireManagerScreen;"]},"metadata":{},"sourceType":"module"}