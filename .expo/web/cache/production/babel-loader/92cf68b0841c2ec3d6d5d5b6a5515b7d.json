{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Platform from\"react-native-web/dist/exports/Platform\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import{Button,Card}from'react-native-paper';import Icon from\"@expo/vector-icons/FontAwesome\";import{WebView}from'react-native-webview';import{Video,Audio}from'expo-av';import axiox from'axios';import{COLORS,SIZES}from\"../constants/theme\";import moment from'moment';import'moment/locale/th';import{USER}from\"../constants/variables\";import AwesomeAlert from'react-native-awesome-alerts';var ManagerQuestionnaireScreen=function ManagerQuestionnaireScreen(_ref){var navigation=_ref.navigation,route=_ref.route;var sheetID=route.params.sheetID;var userId=route.params.userId;var year=route.params.year;var part=route.params.part;var answer={};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),managerList=_useState2[0],setManagerList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),managerAnswer=_useState4[0],setManagerAnswer=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAnswerError=_useState6[0],setAnserError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isEditVideo=_useState8[0],setIsEditVideo=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),dialogConfirmAns=_useState12[0],setDialogConfirmAns=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),titleTextLog=_useState14[0],setTitleTextLog=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),bodyTextLog=_useState16[0],setBodyTextLog=_useState16[1];var managerAnswerList=[];var getManagerAssessmentList=function getManagerAssessmentList(){axiox.get('https://program-api.herokuapp.com/'+year+'/'+part+'/manager/'+userId).then(function(res){setManagerList(res.data);setLoading(false);}).catch(function(err){console.log(err);});};var postAnswer=function postAnswer(){setLoading(true);axiox.post('https://program-api.herokuapp.com/'+year+'/'+part+'/'+answer.number+'/Answer/manager/'+userId,answer).then(function(res){console.log(res.data);alert(\"บันทึกข้อมูลสำเร็จ\");setLoading(false);}).catch(function(err){console.log(err);alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");setLoading(false);});};var updateAnswer=function updateAnswer(){setLoading(true);console.log(answer);axiox.put('https://program-api.herokuapp.com/'+year+'/'+part+'/'+answer.number+'/Answer/manager/'+userId,answer).then(function(res){console.log(\"response: \",res);alert(\"บันทึกข้อมูลสำเร็จ\");setLoading(false);}).catch(function(err){console.error(err);alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");setLoading(false);});};useEffect(function(){setLoading(true);getManagerAssessmentList();},[]);var renderQuestionnaireManager=function renderQuestionnaireManager(_ref2){var navigation=_ref2.navigation;var renderItem=function renderItem(_ref3){var item=_ref3.item,index=_ref3.index;managerAnswerList[index]=item.answer;return React.createElement(View,{style:{margin:8,borderWidth:1,borderRadius:5,elevation:5,padding:8,backgroundColor:'#fff'}},React.createElement(Text,{style:{fontSize:16,fontWeight:'bold'}},item.number,\". \",item.qt),sheetID===1?item.answer===undefined?React.createElement(View,null,React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginVertical:8,height:100},placeholder:\"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){managerAnswer[index]=text;}}),React.createElement(Button,{style:{backgroundColor:'gray',borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){console.log(managerAnswer);if(managerAnswer[index]!=undefined){var answerObject={user_id:USER.userid,date:moment().format('yyyy-MM-DD'),answer:managerAnswer[index],number:item.number,qt:item.qt,year:year};answer=answerObject;postAnswer();item.answer=managerAnswer[index];}else{alert(\"ข้อมูลไม่ได้ถูกแก้ไข กรุณาแก้ไขข้อมูลก่อนบันทึก\");}}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\"))):React.createElement(View,null,React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginVertical:8,height:100},placeholder:\"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){managerAnswer[index]=text;},defaultValue:managerAnswerList[index]}),React.createElement(Button,{style:{backgroundColor:'green',borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){console.log(managerAnswer);if(managerAnswer[index]!=undefined){var answerObject={user_id:USER.userid,date:moment().format('yyyy-MM-DD'),answer:managerAnswer[index],number:item.number,qt:item.qt,year:year};answer=answerObject;updateAnswer();item.answer=managerAnswer[index];}else{alert(\"ข้อมูลไม่ได้ถูกแก้ไข กรุณาแก้ไขข้อมูลก่อนบันทึก\");}}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\\u0E2D\\u0E35\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\"))):React.createElement(View,null,React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginVertical:8,height:100},placeholder:\"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,value:item.answer})));};if(isLoading===false&&managerList.length===0){return React.createElement(View,{style:{alignItems:'center',marginTop:48}},React.createElement(Text,{style:{fontSize:24,color:'red',justifyContent:'center'}},\"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\"));}else{return React.createElement(FlatList,{data:managerList,extraData:managerList,keyExtractor:function keyExtractor(item,index){return\"\"+index;},renderItem:renderItem,ListHeaderComponent:function ListHeaderComponent(){return React.createElement(View,{style:{backgroundColor:'#D3D3D3'}},React.createElement(View,{style:{padding:8,backgroundColor:COLORS.primary,width:'100%'}},React.createElement(Text,{style:{alignSelf:'center',color:'white',fontSize:20}},\"\\u0E41\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19 \\u0E1C\\u0E39\\u0E49\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E16\\u0E32\\u0E21\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\")),React.createElement(Text,{style:{marginVertical:4,alignSelf:'center',color:'red',fontSize:14}},\"*** \\u0E01\\u0E14\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\\u0E17\\u0E38\\u0E01\\u0E04\\u0E23\\u0E31\\u0E49\\u0E07\\u0E01\\u0E48\\u0E2D\\u0E19\\u0E08\\u0E30\\u0E17\\u0E33\\u0E02\\u0E49\\u0E2D\\u0E43\\u0E2B\\u0E21\\u0E48 ***\"));},stickyHeaderIndices:[0]});}};var renderCustomViewInput=function renderCustomViewInput(){return React.createElement(TextInput,{style:{borderWidth:1,borderRadius:5,padding:10,marginHorizontal:16,width:SIZES.width/2},placeholder:\":url\",placeholderTextColor:\"gray\",multiline:true,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){managerList[0].videoURL=text;}});};return React.createElement(SafeAreaView,{style:{flex:1}},renderQuestionnaireManager({navigation:navigation}),sheetID===1?managerList.length!=0&&(managerList[0].videoURL===undefined||managerList[0].videoURL===\"\")?React.createElement(View,{style:{margin:16}},React.createElement(Button,{style:{backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){setIsEditVideo(true);}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\"))):managerList.length!=0&&managerList[0].videoURL!=\"\"?React.createElement(View,{style:{margin:16,flexDirection:'row',justifyContent:'center'}},React.createElement(Button,{style:{flex:1,backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8,marginRight:4},mode:\"Contained\",onPress:function onPress(){{Platform.OS===\"web\"?window.open(managerList[0].videoURL):navigation.navigate('VideoWebView',{videoURL:managerList[0].videoURL});}}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E14\\u0E39\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\")),React.createElement(Button,{style:{flex:1,backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8,marginLeft:4},mode:\"Contained\",onPress:function onPress(){setIsEditVideo(true);}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\"))):null:React.createElement(View,{style:{margin:16,flexDirection:'row',justifyContent:'center'}},React.createElement(Button,{style:{flex:1,backgroundColor:COLORS.primary,borderRadius:10,marginVertical:8,marginRight:4},mode:\"Contained\",onPress:function onPress(){navigation.navigate('VideoWebView',{videoURL:managerList[0].videoURL});}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E14\\u0E39\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\"))),React.createElement(AwesomeAlert,{show:isEditVideo,title:\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E25\\u0E34\\u0E49\\u0E07\\u0E04\\u0E4C\\u0E27\\u0E34\\u0E14\\u0E35\\u0E42\\u0E2D\",closeOnTouchOutside:false,confirmText:\"\\u0E15\\u0E01\\u0E25\\u0E07\",showConfirmButton:true,showCancelButton:true,customView:renderCustomViewInput(),confirmButtonColor:COLORS.primary,cancelText:\"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\",onCancelPressed:function onCancelPressed(){setIsEditVideo(false);},onConfirmPressed:function onConfirmPressed(){setIsEditVideo(false);var currentObject={userid:managerList[0].userid,year:managerList[0].year,number:managerList[0].number,qt:managerList[0].qt,answer:managerList[0].answer,videoURL:managerList[0].videoURL,date:moment(managerList[0].date).format('yyyy-MM-DD')};console.log(currentObject);{managerList[0].videoURL===undefined?axiox.post('https://program-api.herokuapp.com/'+year+'/'+part+'/1/Answer/manager/'+userId,currentObject).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);}):axiox.put('https://program-api.herokuapp.com/'+year+'/'+part+'/1/Answer/manager/'+userId,currentObject).then(function(res){console.log(res.data);}).catch(function(err){console.log(err);});}setIsEditVideo(false);}}),isLoading?React.createElement(ActivityIndicator,{style:{position:'absolute',left:0,right:0,top:0,bottom:0,alignItems:'center',justifyContent:'center'},size:\"large\",color:\"#0275d8\"}):null);};export default ManagerQuestionnaireScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/ManagerQuestionnaireScreen.js"],"names":["React","useState","useEffect","Button","Card","Icon","WebView","Video","Audio","axiox","COLORS","SIZES","moment","USER","AwesomeAlert","ManagerQuestionnaireScreen","navigation","route","sheetID","params","userId","year","part","answer","managerList","setManagerList","managerAnswer","setManagerAnswer","isAnswerError","setAnserError","isEditVideo","setIsEditVideo","isLoading","setLoading","dialogConfirmAns","setDialogConfirmAns","titleTextLog","setTitleTextLog","bodyTextLog","setBodyTextLog","managerAnswerList","getManagerAssessmentList","get","then","res","data","catch","err","console","log","postAnswer","post","number","alert","updateAnswer","put","error","renderQuestionnaireManager","renderItem","item","index","margin","borderWidth","borderRadius","elevation","padding","backgroundColor","fontSize","fontWeight","qt","undefined","marginVertical","height","text","answerObject","user_id","userid","date","format","alignSelf","color","length","alignItems","marginTop","justifyContent","primary","width","renderCustomViewInput","marginHorizontal","videoURL","flex","flexDirection","marginRight","Platform","OS","window","open","navigate","marginLeft","currentObject","position","left","right","top","bottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, SafeAreaView, FlatList, Platform, ActivityIndicator, ScrollView } from 'react-native';\nimport { Button, Card } from 'react-native-paper';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport { WebView } from 'react-native-webview';\nimport { Video, Audio } from 'expo-av';\n\n// import Dialog from \"react-native-dialog\";\nimport axiox from 'axios';\nimport { COLORS, SIZES } from '../constants/theme';\n\nimport moment from 'moment';\nimport 'moment/locale/th';\n\nimport { USER } from '../constants/variables';\n\nimport AwesomeAlert from 'react-native-awesome-alerts';\n\nconst ManagerQuestionnaireScreen = ({ navigation, route }) => {\n\n    // console.log(route);\n\n    let sheetID = route.params.sheetID;\n    let userId = route.params.userId;\n    let year = route.params.year;\n    let part = route.params.part;\n\n    // console.log(userId);\n\n    var answer = {};\n\n    const [managerList, setManagerList] = useState([]);\n\n    // Answer\n    const [managerAnswer, setManagerAnswer] = useState([]);\n    const [isAnswerError, setAnserError] = useState(false);\n\n    // VideoURL\n    const [isEditVideo, setIsEditVideo] = useState(false);\n\n    const [isLoading, setLoading] = useState(false);\n    const [dialogConfirmAns, setDialogConfirmAns] = useState(false);\n\n    const [titleTextLog, setTitleTextLog] = useState(\"\");\n    const [bodyTextLog, setBodyTextLog] = useState(\"\");\n\n    var managerAnswerList = [];\n\n    const getManagerAssessmentList = () => {\n        axiox.get('https://program-api.herokuapp.com/' + year + '/' + part + '/manager/' + userId)\n            .then(res => {\n                setManagerList(res.data);\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    };\n\n    const postAnswer = () => {\n        setLoading(true);\n        \n        axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/manager/' + userId, answer)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n                alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const updateAnswer = () => {\n        setLoading(true);\n        console.log(answer);\n        axiox\n            .put('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.number + '/Answer/manager/' + userId, answer)\n            .then(res => {\n                console.log(\"response: \", res)\n                alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.error(err)\n                alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n            })\n    }\n\n\n    useEffect(() => {\n        setLoading(true);\n        getManagerAssessmentList();\n\n    }, []);\n\n    // Manager API\n\n    const renderQuestionnaireManager = ({ navigation }) => {\n\n        const renderItem = ({ item, index }) => {\n            // const textInfo = \"บันทึกคำตอบแล้ว\\nเมื่อทำการแก้ไขให้คลิกยืนยันข้อมูลอีกครั้ง\"\n\n            managerAnswerList[index] = item.answer;\n\n            return (\n                <View style={{\n                    margin: 8,\n                    borderWidth: 1,\n                    // borderColor: 'gray',\n                    borderRadius: 5,\n                    elevation: 5,\n                    padding: 8,\n                    backgroundColor: '#fff'\n                    // borderColor: COLORS.primary\n                    // \n                }} >\n                    <Text style={{\n                        fontSize: 16,\n                        fontWeight: 'bold',\n\n                    }}>{item.number}. {item.qt}</Text>\n\n                    {sheetID === 1 ?\n                        item.answer === undefined ?\n                            <View>\n                                <TextInput\n                                    style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                    // textContentType='telephoneNumber'\n                                    placeholder=\"คำตอบ\"\n                                    placeholderTextColor=\"gray\"\n                                    multiline\n                                    numberOfLines={6}\n                                    color='blue'\n                                    fontSize={16}\n                                    onChangeText={text => {\n                                        // setAnserError(false);\n                                        managerAnswer[index] = text;\n                                    }}\n                                />\n                                <Button\n                                    style={{\n                                        backgroundColor: 'gray',\n                                        borderRadius: 10,\n                                        marginVertical: 8\n                                    }}\n                                    mode=\"Contained\"\n                                    onPress={() => {\n                                        // dialogConfirmAnswer({ index });\n                                        // setDialogConfirmAns(true);\n                                        console.log(managerAnswer)\n                                        // setQuestionNumber(item.number);\n                                        if (managerAnswer[index] != undefined) {\n                                            var answerObject = {\n                                                user_id: USER.userid,\n                                                date: moment().format('yyyy-MM-DD'),\n                                                // video_url: videoURLText,\n                                                answer: managerAnswer[index],\n                                                number: item.number,\n                                                qt: item.qt,\n                                                year: year\n                                            };\n\n                                            answer = answerObject;\n                                            postAnswer();\n                                            // setAnserError(false);\n                                            // setManagerAnswer(\"\");\n                                            // setVideoURLText(\"\");\n\n                                            item.answer = managerAnswer[index];\n                                            // setDialogConfirmAns(false);\n\n                                        }\n                                        else {\n                                            // setAnserError(true);\n                                            // setTitleTextLog(\"ข้อมูลไม่ได้ถูกแก้ไข\");\n                                            // setBodyTextLog(\"หากต้องการแก้ไขให้พิมพ์ข้อมูลก่อนบันทึก\")\n                                            // setDialogConfirmAns(true);\n                                            alert(\"ข้อมูลไม่ได้ถูกแก้ไข กรุณาแก้ไขข้อมูลก่อนบันทึก\");\n                                        }\n\n                                        // console.log(questionAllStaffList);\n\n                                    }}>\n                                    <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบ</Text>\n\n                                </Button>\n                            </View>\n\n                            :\n\n                            <View>\n                                <TextInput\n                                    style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                    // textContentType='telephoneNumber'\n                                    placeholder=\"คำตอบ\"\n                                    placeholderTextColor=\"gray\"\n                                    multiline\n                                    numberOfLines={6}\n                                    color='blue'\n                                    fontSize={16}\n                                    // text=\"dfsdfsdf\"\n                                    onChangeText={text => {\n                                        // setAnserError(false);\n                                        managerAnswer[index] = text;\n                                    }}\n                                    defaultValue={managerAnswerList[index]}\n                                />\n\n                                <Button\n                                    style={{\n                                        backgroundColor: 'green',\n                                        borderRadius: 10,\n                                        marginVertical: 8\n                                    }}\n                                    mode=\"Contained\"\n                                    onPress={() => {\n                                        // dialogConfirmAnswer({ index });\n                                        // setDialogConfirmAns(true);\n                                        console.log(managerAnswer)\n                                        // setQuestionNumber(item.number);\n                                        if (managerAnswer[index] != undefined) {\n                                            var answerObject = {\n                                                user_id: USER.userid,\n                                                date: moment().format('yyyy-MM-DD'),\n                                                // video_url: videoURLText,\n                                                answer: managerAnswer[index],\n                                                number: item.number,\n                                                qt: item.qt,\n                                                year: year\n                                            };\n                                            // setDialogAnswer(false);\n                                            // setAnserError(false);\n                                            answer = answerObject;\n                                            updateAnswer();\n\n                                            item.answer = managerAnswer[index];\n\n\n                                            // setDialogConfirmAns(false);\n                                            // setAnswer({});\n                                        }\n                                        else {\n                                            // setAnserError(true);\n                                            // setTitleTextLog(\"ข้อมูลไม่ได้ถูกแก้ไข\");\n                                            // setBodyTextLog(\"หากต้องการแก้ไขให้พิมพ์ข้อมูลก่อนบันทึก\")\n                                            // setDialogConfirmAns(true);\n                                            alert(\"ข้อมูลไม่ได้ถูกแก้ไข กรุณาแก้ไขข้อมูลก่อนบันทึก\");\n                                        }\n\n                                        // console.log(questionAllStaffList);\n\n                                    }}>\n                                    <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบอีกครั้ง</Text>\n\n                                </Button>\n                            </View>\n                        :\n\n                        <View>\n                            <TextInput\n                                style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginVertical: 8, height: 100 }}\n                                placeholder=\"ไม่มีคำตอบ\"\n                                placeholderTextColor=\"gray\"\n                                multiline\n                                numberOfLines={6}\n                                color='blue'\n                                fontSize={16}\n                                value={item.answer}\n                            />\n\n                        </View>\n                    }\n\n                </View>\n\n            );\n        }\n\n        if (isLoading === false && managerList.length === 0) {\n            return (\n                <View style={{\n                    alignItems: 'center',\n                    marginTop: 48\n                }}>\n                    <Text style={{\n                        fontSize: 24,\n                        color: 'red',\n                        justifyContent: 'center',\n                    }}>ไม่พบแบบประเมิน</Text>\n                </View>\n            );\n\n        } else {\n\n            return (\n                <FlatList\n                    data={managerList}\n                    extraData={managerList}\n                    keyExtractor={(item, index) => `${index}`}\n                    renderItem={renderItem}\n                    ListHeaderComponent={() => {\n                        return (\n                            <View style={{ backgroundColor: '#D3D3D3' }}>\n                                <View style={{ padding: 8, backgroundColor: COLORS.primary, width: '100%' }}>\n                                    <Text style={{ alignSelf: 'center', color: 'white', fontSize: 20 }}>\n                                        แบบประเมิน ผู้จัดการถามพนักงาน\n                                    </Text>\n                                </View>\n                                <Text style={{ marginVertical: 4, alignSelf: 'center', color: 'red', fontSize: 14 }}>*** กดส่งคำตอบทุกครั้งก่อนจะทำข้อใหม่ ***</Text>\n                                {/* <Text style={{ marginBottom: 4, alignSelf: 'center', color: 'red', fontSize: 14 }}>เมื่อครบทุกข้อให้คลิก ส่งคำตอบ</Text> */}\n                            </View>\n\n                        );\n                    }}\n                    stickyHeaderIndices={[0]}\n\n                />\n\n            );\n        }\n    }\n\n    const renderCustomViewInput = () => (\n        <TextInput\n            style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginHorizontal: 16, width: SIZES.width / 2 }}\n            // textContentType='telephoneNumber'\n            placeholder=\":url\"\n            placeholderTextColor=\"gray\"\n            multiline\n            // numberOfLines={6}\n            color='blue'\n            fontSize={16}\n            onChangeText={text => {\n                // setAnserError(false);\n                // setVideoLink(text)\n                managerList[0].videoURL = text\n            }}\n        />\n    )\n\n    return (\n        <SafeAreaView style={{ flex: 1, }}>\n\n            {renderQuestionnaireManager({ navigation })}\n\n            {sheetID === 1 ?\n                managerList.length != 0 && (managerList[0].videoURL === undefined || managerList[0].videoURL === \"\") ?\n\n                    <View style={{ margin: 16 }}>\n                        <Button style={{\n                            backgroundColor: COLORS.primary,\n                            borderRadius: 10,\n                            marginVertical: 8\n                        }}\n                            mode=\"Contained\"\n                            onPress={() => { setIsEditVideo(true) }}>\n                            <Text style={{ alignSelf: 'center', color: 'white' }}>เพิ่มลิ้งค์วิดีโอ</Text>\n                        </Button>\n                    </View>\n\n                    :\n                    managerList.length != 0 && managerList[0].videoURL != \"\" ?\n                        <View style={{ margin: 16, flexDirection: 'row', justifyContent: 'center' }}>\n                            <Button style={{\n                                flex: 1,\n                                backgroundColor: COLORS.primary,\n                                borderRadius: 10,\n                                marginVertical: 8,\n                                marginRight: 4\n\n                            }}\n                                mode=\"Contained\"\n                                onPress={() => {\n                                    // console.log(questionManagerList[0].videoURL);\n                                    {\n                                        Platform.OS === \"web\" ?\n                                            window.open(managerList[0].videoURL) :\n                                            navigation.navigate('VideoWebView', { videoURL: managerList[0].videoURL })\n                                        // navigation.navigate('VideoWebView', { videoURL: managerList[0].videoURL })\n                                    }\n                                }}>\n                                <Text style={{ alignSelf: 'center', color: 'white' }}>ดูวิดีโอ</Text>\n                            </Button>\n\n                            <Button style={{\n                                flex: 1,\n                                backgroundColor: COLORS.primary,\n                                borderRadius: 10,\n                                marginVertical: 8,\n                                marginLeft: 4\n                            }}\n                                mode=\"Contained\"\n                                onPress={() => { setIsEditVideo(true) }}>\n                                <Text style={{ alignSelf: 'center', color: 'white' }}>แก้ไขลิ้งค์</Text>\n                            </Button>\n                        </View>\n                        :\n                        null\n\n                :\n\n                <View style={{ margin: 16, flexDirection: 'row', justifyContent: 'center' }}>\n                    <Button style={{\n                        flex: 1,\n                        backgroundColor: COLORS.primary,\n                        borderRadius: 10,\n                        marginVertical: 8,\n                        marginRight: 4\n\n                    }}\n                        mode=\"Contained\"\n                        onPress={() => {\n                            // console.log(questionManagerList[0].videoURL);\n                            navigation.navigate('VideoWebView', { videoURL: managerList[0].videoURL })\n\n                        }}>\n                        <Text style={{ alignSelf: 'center', color: 'white' }}>ดูวิดีโอ</Text>\n                    </Button>\n\n                </View>\n            }\n{/* \n            <AwesomeAlert\n                show={dialogConfirmAns}\n                title={titleTextLog}\n                message={bodyTextLog}\n                closeOnTouchOutside={false}\n                confirmText=\"ตกลง\"\n                showConfirmButton={true}\n                confirmButtonColor={COLORS.primary}\n                onConfirmPressed={() => {\n                    setDialogConfirmAns(false);\n                }}\n            /> */}\n\n            {/* <Dialog.Container visible={dialogConfirmAns}>\n                <Dialog.Title style={{ fontSize: 20, fontWeight: 'bold' }}>{titleTextLog}</Dialog.Title>\n                <Dialog.Description style={{ fontSize: 18, padding: 16 }}>{bodyTextLog}</Dialog.Description>\n\n                <Dialog.Button\n                    label=\"ตกลง\"\n                    onPress={() => {\n\n                        setDialogConfirmAns(false);\n                    }} />\n\n            </Dialog.Container> */}\n\n            <AwesomeAlert\n                show={isEditVideo}\n                title=\"เพิ่มลิ้งค์วิดีโอ\"\n                // message=\"เพิ่มลิ้งวิดีโอ\"\n                closeOnTouchOutside={false}\n                confirmText=\"ตกลง\"\n                showConfirmButton={true}\n                showCancelButton={true}\n                customView={renderCustomViewInput()}\n                confirmButtonColor={COLORS.primary}\n                cancelText=\"ยกเลิก\"\n                onCancelPressed={() => {\n                    setIsEditVideo(false);\n                    // this.hideAlert();\n                }}\n                onConfirmPressed={() => {\n                    setIsEditVideo(false);\n                    const currentObject = {\n                        userid: managerList[0].userid,\n                        year: managerList[0].year,\n                        number: managerList[0].number,\n                        qt: managerList[0].qt,\n                        answer: managerList[0].answer,\n                        videoURL: managerList[0].videoURL,\n                        date: moment(managerList[0].date).format('yyyy-MM-DD'),\n\n                    }\n                    console.log(currentObject);\n                    {\n                        managerList[0].videoURL === undefined ?\n                            axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject)\n                                .then(res => {\n                                    console.log(res.data);\n                                })\n                                .catch(err => {\n                                    console.log(err)\n                                })\n                            :\n                            axiox.put('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject)\n                                .then(res => {\n                                    // storeData(res.data)\n                                    console.log(res.data);\n\n                                })\n                                .catch(err => {\n                                    console.log(err)\n                                });\n                    }\n                    setIsEditVideo(false);\n                }}\n            >\n            </AwesomeAlert>\n\n            {/* <Dialog.Container visible={isEditVideo}>\n                <Dialog.Title style={{ fontSize: 20, fontWeight: 'bold' }}>เพิ่มลิ้งค์วิดีโอ</Dialog.Title>\n                <TextInput\n                    style={{ borderWidth: 1, borderRadius: 5, padding: 10, marginHorizontal: 16 }}\n                    // textContentType='telephoneNumber'\n                    placeholder=\":url\"\n                    placeholderTextColor=\"gray\"\n                    multiline\n                    numberOfLines={6}\n                    color='blue'\n                    fontSize={16}\n                    onChangeText={text => {\n                        // setAnserError(false);\n                        // setVideoLink(text)\n                        managerList[0].videoURL = text\n                    }}\n                />\n                <Dialog.Button\n                    label=\"ยกเลิก\"\n                    onPress={() => {\n                        setIsEditVideo(false);\n                    }} />\n\n                <Dialog.Button\n                    label=\"ตกลง\"\n                    onPress={() => {\n                        const currentObject = {\n                            userid: managerList[0].userid,\n                            year: managerList[0].year,\n                            number: managerList[0].number,\n                            qt: managerList[0].qt,\n                            answer: managerList[0].answer,\n                            videoURL: managerList[0].videoURL,\n                            date: moment(managerList[0].date).format('yyyy-MM-DD'),\n\n                        }\n                        console.log(currentObject);\n                        {\n                            managerList[0].videoURL === undefined ?\n                                axiox.post('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject)\n                                    .then(res => {\n                                        console.log(res.data);\n                                    })\n                                    .catch(err => {\n                                        console.log(err)\n                                    })\n                                :\n                                axiox.put('https://program-api.herokuapp.com/' + year + '/' + part + '/1/Answer/manager/' + userId, currentObject)\n                                    .then(res => {\n                                        // storeData(res.data)\n                                        console.log(res.data);\n\n                                    })\n                                    .catch(err => {\n                                        console.log(err)\n                                    });\n                        }\n                        setIsEditVideo(false);\n                    }} />\n\n\n            </Dialog.Container> */}\n\n            {isLoading ?\n\n                <ActivityIndicator style={{\n\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }} size=\"large\" color=\"#0275d8\" />\n                :\n                null\n            }\n\n        </SafeAreaView>\n    );\n}\n\nexport default ManagerQuestionnaireScreen;"]},"metadata":{},"sourceType":"module"}