{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{Button,Card}from'react-native-paper';import axiox from'axios';import{COLORS,SIZES}from\"../constants/theme\";import moment from'moment';import'moment/locale/th';import{MAIN_URL,USER}from\"../constants/variables\";var ManagerAssessmentScreen=function ManagerAssessmentScreen(_ref){var navigation=_ref.navigation,route=_ref.route;var userId=route.params.userId;var year=route.params.year;var part=route.params.part;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),answer=_useState2[0],setAnswer=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),allAnswer=_useState6[0],setAllAnswer=_useState6[1];useEffect(function(){setLoading(true);USER.position===\"ผู้จัดการ\"?getAllAnswer():getAnswer();},[]);var getAllAnswer=function getAllAnswer(){setLoading(true);console.log(\"getAll\");axiox.get(MAIN_URL+'/answer/manager_assessment/'+year+'/'+part+'/department/'+USER.department).then(function(res){console.log(res.data);setAllAnswer(res.data);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);});};var getAnswer=function getAnswer(){setLoading(true);console.log(\"get\");axiox.get(MAIN_URL+'/answer/manager_assessment/'+year+'/'+part+'/'+userId).then(function(res){console.log(res.data);setAnswer(res.data[0].answer);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);});};var postAnswer=function postAnswer(_ref2){var dataSend=_ref2.dataSend;setLoading(true);axiox.post(MAIN_URL+'/answer/manager_assessment/'+year+'/'+part+'/'+userId,dataSend).then(function(res){console.log(res.data);alert(\"บันทึกข้อมูลสำเร็จ\");setLoading(false);}).catch(function(err){console.log(err);alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");setLoading(false);});};var renderList=function renderList(){var renderItem=function renderItem(_ref3){var item=_ref3.item,index=_ref3.index;return React.createElement(View,{style:{backgroundColor:'white',padding:8,marginTop:18}},React.createElement(Text,{style:{fontSize:18}},\"\\u0E04\\u0E19\\u0E17\\u0E35\\u0E48 \",index+1,\" \",React.createElement(Text,{style:{fontSize:14,color:'blue'}},\"( \\u0E41\\u0E1C\\u0E19\\u0E01/\\u0E2A\\u0E32\\u0E02\\u0E32 \",item.department,\" )\")),React.createElement(View,{style:{margin:8,borderColor:'gray',borderWidth:0.5,borderRadius:5,padding:8}},React.createElement(Text,{style:{color:'darkgreen'}},item.answer)));};return React.createElement(FlatList,{data:allAnswer,extraData:allAnswer,keyExtractor:function keyExtractor(item,index){return\"\"+index;},renderItem:renderItem});};return React.createElement(View,{style:{flex:1}},USER.position==='ผู้จัดการ'?renderList(navigation):React.createElement(View,{style:{padding:20}},React.createElement(Text,{style:{color:'blue'}},\"*\\u0E43\\u0E2B\\u0E49\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E04\\u0E27\\u0E32\\u0E21\\u0E04\\u0E34\\u0E14\\u0E40\\u0E2B\\u0E47\\u0E19\\u0E40\\u0E0A\\u0E34\\u0E07\\u0E1A\\u0E27\\u0E01\\u0E14\\u0E49\\u0E27\\u0E22\\u0E16\\u0E49\\u0E2D\\u0E22\\u0E04\\u0E33\\u0E2A\\u0E38\\u0E20\\u0E32\\u0E1E \\u0E27\\u0E48\\u0E32\\u0E2D\\u0E22\\u0E32\\u0E01\\u0E08\\u0E30\\u0E1B\\u0E23\\u0E31\\u0E1A\\u0E40\\u0E1B\\u0E25\\u0E35\\u0E48\\u0E22\\u0E19\\u0E2D\\u0E30\\u0E44\\u0E23 \\u0E41\\u0E01\\u0E49\\u0E15\\u0E23\\u0E07\\u0E08\\u0E38\\u0E14\\u0E44\\u0E2B\\u0E19\"),React.createElement(Text,{style:{color:'red'}},\"*\\u0E1C\\u0E39\\u0E49\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E02\\u0E2D\\u0E07\\u0E41\\u0E1C\\u0E19\\u0E01\\u0E04\\u0E38\\u0E13\\u0E40\\u0E17\\u0E48\\u0E32\\u0E19\\u0E31\\u0E49\\u0E19\\u0E17\\u0E35\\u0E48\\u0E08\\u0E30\\u0E40\\u0E2B\\u0E47\\u0E19\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A \\u0E41\\u0E15\\u0E48\\u0E08\\u0E30\\u0E44\\u0E21\\u0E48\\u0E23\\u0E39\\u0E49\\u0E27\\u0E48\\u0E32\\u0E43\\u0E04\\u0E23\\u0E40\\u0E1B\\u0E47\\u0E19\\u0E04\\u0E19\\u0E15\\u0E2D\\u0E1A\"),React.createElement(TextInput,{style:{backgroundColor:'white',marginTop:20,borderWidth:1,padding:10,borderRadius:5,marginVertical:8,height:150},placeholder:\"\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\",placeholderTextColor:\"gray\",multiline:true,numberOfLines:6,color:\"blue\",fontSize:16,onChangeText:function onChangeText(text){setAnswer(text);},defaultValue:answer}),React.createElement(Button,{style:{backgroundColor:'green',borderRadius:10,marginVertical:8},mode:\"Contained\",onPress:function onPress(){var dataSend={answer:answer,date:moment().format('yyyy-MM-DD'),department:USER.department};postAnswer({dataSend:dataSend});}},React.createElement(Text,{style:{alignSelf:'center',color:'white'}},\"\\u0E2A\\u0E48\\u0E07\\u0E04\\u0E33\\u0E15\\u0E2D\\u0E1A\"))));};export default ManagerAssessmentScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/ManagerAssessmentScreen.js"],"names":["React","useState","useEffect","Button","Card","axiox","COLORS","SIZES","moment","MAIN_URL","USER","ManagerAssessmentScreen","navigation","route","userId","params","year","part","answer","setAnswer","loading","setLoading","allAnswer","setAllAnswer","position","getAllAnswer","getAnswer","console","log","get","department","then","res","data","catch","err","postAnswer","dataSend","post","alert","renderList","renderItem","item","index","backgroundColor","padding","marginTop","fontSize","color","margin","borderColor","borderWidth","borderRadius","flex","marginVertical","height","text","date","format","alignSelf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, FlatList, TouchableOpacity } from 'react-native';\nimport { Button, Card } from 'react-native-paper';\n\nimport axiox from 'axios';\nimport { COLORS, SIZES } from '../constants/theme';\n\nimport moment from 'moment';\nimport 'moment/locale/th';\nimport { MAIN_URL, USER } from '../constants/variables';\n\nconst ManagerAssessmentScreen = ({ navigation, route }) => {\n\n    // let sheetID = route.params.sheetID;\n    let userId = route.params.userId;\n    let year = route.params.year;\n    let part = route.params.part;\n\n    const [answer, setAnswer] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [allAnswer, setAllAnswer] = useState([]);\n\n    // console.log(USER.position)\n\n    useEffect(() => {\n        setLoading(true);\n        USER.position === \"ผู้จัดการ\" ? getAllAnswer() : getAnswer()\n\n    }, []);\n\n    const getAllAnswer = () => {\n        setLoading(true);\n        console.log(\"getAll\")\n        axiox.get(MAIN_URL + '/answer/manager_assessment/' + year + '/' + part + '/department/' + USER.department)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n                setAllAnswer(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const getAnswer = () => {\n        setLoading(true);\n        console.log(\"get\")\n        axiox.get(MAIN_URL + '/answer/manager_assessment/' + year + '/' + part + '/' + userId)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n                setAnswer(res.data[0].answer)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n\n    const postAnswer = ({ dataSend }) => {\n        setLoading(true);\n        axiox.post(MAIN_URL + '/answer/manager_assessment/' + year + '/' + part + '/' + userId, dataSend)\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(res.data);\n                alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    }\n\n    const renderList = () => {\n        const renderItem = ({ item, index }) => {\n\n            return (\n                <View style={{ backgroundColor: 'white', padding: 8, marginTop: 18, }}>\n                    <Text style={{ fontSize: 18 }}>คนที่ {index + 1} <Text style={{ fontSize: 14, color: 'blue' }}>( แผนก/สาขา {item.department} )</Text></Text>\n                    <View style={{ margin: 8, borderColor: 'gray', borderWidth: 0.5, borderRadius: 5, padding: 8 }}>\n                        <Text style={{ color: 'darkgreen'}}>{item.answer}</Text>\n                    </View>\n\n                </View>\n            )\n        }\n\n        return (\n            <FlatList\n                data={allAnswer}\n                extraData={allAnswer}\n                keyExtractor={(item, index) => `${index}`}\n                renderItem={renderItem}\n            />\n        )\n    }\n\n    return (\n        <View style={{ flex: 1,  }}>\n\n            {USER.position === 'ผู้จัดการ' ?\n\n                renderList(navigation)\n                :\n                <View style={{ padding: 20 }}>\n                    <Text style={{ color: 'blue' }}>*ให้พนักงานแสดงความคิดเห็นเชิงบวกด้วยถ้อยคำสุภาพ ว่าอยากจะปรับเปลี่ยนอะไร แก้ตรงจุดไหน</Text>\n                    <Text style={{ color: 'red' }}>*ผู้จัดการของแผนกคุณเท่านั้นที่จะเห็นคำตอบ แต่จะไม่รู้ว่าใครเป็นคนตอบ</Text>\n\n                    <TextInput\n                        style={{ backgroundColor: 'white', marginTop: 20, borderWidth: 1, padding: 10, borderRadius: 5, marginVertical: 8, height: 150 }}\n                        // textContentType='telephoneNumber'\n                        placeholder=\"คำตอบ\"\n                        placeholderTextColor=\"gray\"\n                        multiline\n                        numberOfLines={6}\n                        color='blue'\n                        fontSize={16}\n                        onChangeText={text => {\n                            setAnswer(text);\n                        }}\n                        defaultValue={answer}\n                    />\n\n                    <Button\n                        style={{\n                            backgroundColor: 'green',\n                            borderRadius: 10,\n                            marginVertical: 8\n                        }}\n                        mode=\"Contained\"\n                        onPress={() => {\n                            const dataSend = {\n                                answer: answer,\n                                date: moment().format('yyyy-MM-DD'),\n                                department: USER.department\n                            }\n                            postAnswer({ dataSend });\n                        }}\n                    >\n                        <Text style={{ alignSelf: 'center', color: 'white' }}>ส่งคำตอบ</Text>\n                    </Button>\n                </View>\n            }\n        </View>\n    );\n};\n\nexport default ManagerAssessmentScreen;"]},"metadata":{},"sourceType":"module"}