{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import Alert from\"react-native-web/dist/exports/Alert\";import Icon from\"@expo/vector-icons/FontAwesome\";import axiox from'axios';import{COLORS,SIZES}from\"../constants/theme\";import moment from'moment';import'moment/locale/th';import{MAIN_URL,USER}from\"../constants/variables\";var EmployeeStatusCommentScreen=function EmployeeStatusCommentScreen(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){getAllEmployeeAssessment();},[]);var getAllEmployeeAssessment=function getAllEmployeeAssessment(){setLoading(true);axiox.get(MAIN_URL+'/answer/assessment').then(function(res){console.log(\"ALL DATA\",res.data);setData(res.data);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);});};var deleteComment=function deleteComment(_ref){var userid=_ref.userid,answer=_ref.answer,manager_id=_ref.manager_id;setLoading(true);console.log(userid);axiox.delete(MAIN_URL+'/answer/assessment',{data:{userid:userid,answer:answer,manager_id:manager_id}}).then(function(res){getAllEmployeeAssessment();alert(\"ลบความคิดเห็นสำเร็จ\");setLoading(false);}).catch(function(err){console.log(err);alert(\"ล้มเหลว กรุณาลองใหม่\");setLoading(false);});};var renderItem=function renderItem(_ref2){var item=_ref2.item,index=_ref2.index;return React.createElement(View,{style:{padding:12,backgroundColor:'white'}},React.createElement(View,{style:{borderRadius:10,borderWidth:1,borderColor:'black',padding:8}},React.createElement(Text,{style:{color:'gray',marginBottom:4}},\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \",moment(item.date).format('ll')),React.createElement(Text,{style:{fontSize:16}},\"\\u0E04\\u0E27\\u0E32\\u0E21\\u0E40\\u0E2B\\u0E47\\u0E19\\u0E08\\u0E32\\u0E01 \",React.createElement(Text,{style:{fontWeight:'bold',color:'gray'}},item.manager_name,\" \",item.manager_lastname,\" [\",item.manager_nickname,\"]\")),React.createElement(Text,{style:{fontSize:16}},\"\\u0E2B\\u0E32\\u0E01\\u0E27\\u0E48\\u0E32 \",React.createElement(Text,{style:{fontWeight:'bold',color:'blue'}},item.name,\" \",item.lastname,\" (\",item.nickname,\") [\",item.department,\"]\"),\" \",React.createElement(Text,{style:{color:'red'}},\"\\u0E08\\u0E30\\u0E25\\u0E32\\u0E2D\\u0E2D\\u0E01\")),React.createElement(View,{style:{marginVertical:8,borderRadius:10,borderWidth:0.5,borderColor:'gray',padding:8}},React.createElement(Text,{style:{fontSize:16}},item.answer),React.createElement(Text,{style:{color:'green',fontSize:16}},\"\\u0E40\\u0E1E\\u0E23\\u0E32\\u0E30 \",item.reason)),USER.department==='MD'?React.createElement(TouchableOpacity,{style:{position:'absolute',right:5,top:5},onPress:function onPress(){Alert.alert(\"ลบความคิดเห็น\",\"คุณต้องการลบความคิดเห็นนี้หรือไม่\",[{text:\"ลบ\",onPress:function onPress(){deleteComment({userid:item.userid,answer:item.answer,manager_id:item.manager_id});},style:\"default\"},{text:\"ยกเลิก\",onPress:function onPress(){},style:\"cancle\"}]);}},React.createElement(Icon,{name:\"trash\",color:\"red\",size:20})):null));};return loading?React.createElement(ActivityIndicator,{style:{position:'absolute',left:0,right:0,top:0,bottom:0,alignItems:'center',justifyContent:'center'},size:\"large\",color:\"#0275d8\"}):React.createElement(FlatList,{data:data,extraData:data,keyExtractor:function keyExtractor(item,index){return\"\"+index;},renderItem:renderItem,ListHeaderComponent:React.createElement(Text,{style:{alignSelf:'center',marginVertical:16,fontSize:16,fontWeight:'bold'}},\"\\u0E04\\u0E27\\u0E32\\u0E21\\u0E40\\u0E2B\\u0E47\\u0E19\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\\u0E02\\u0E2D\\u0E07\\u0E1C\\u0E39\\u0E49\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\")});};export default EmployeeStatusCommentScreen;","map":{"version":3,"sources":["/Users/drift/Documents/ReactNative/cal-assessment/src/screens/EmployeeStatusCommentScreen.js"],"names":["React","useState","useEffect","Icon","axiox","COLORS","SIZES","moment","MAIN_URL","USER","EmployeeStatusCommentScreen","data","setData","loading","setLoading","getAllEmployeeAssessment","get","then","res","console","log","catch","err","deleteComment","userid","answer","manager_id","delete","alert","renderItem","item","index","padding","backgroundColor","borderRadius","borderWidth","borderColor","color","marginBottom","date","format","fontSize","fontWeight","manager_name","manager_lastname","manager_nickname","name","lastname","nickname","department","marginVertical","reason","position","right","top","Alert","text","onPress","style","left","bottom","alignItems","justifyContent","alignSelf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { View, Text, TextInput, FlatList, TouchableOpacity, ActivityIndicator, Alert } from 'react-native'\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport axiox from 'axios';\nimport { COLORS, SIZES } from '../constants/theme';\n\nimport moment from 'moment';\nimport 'moment/locale/th';\nimport { MAIN_URL, USER } from '../constants/variables';\n\nconst EmployeeStatusCommentScreen = () => {\n\n    const [data, setData] = useState([]);\n    const [loading, setLoading] = useState(false);\n    // const [dataDelete, setDataDelete] = useState({});\n\n    useEffect(() => {\n        getAllEmployeeAssessment();\n    }, []);\n\n    const getAllEmployeeAssessment = () => {\n        setLoading(true);\n        // console.log(\"getAll\")\n        axiox.get(MAIN_URL + '/answer/assessment')\n            // console.log('https://program-api.herokuapp.com/' + year + '/' + part + '/' + answer.questionNumber + '/Answer/officer/' + userId, answer)\n            .then(res => {\n                console.log(\"ALL DATA\", res.data);\n                setData(res.data)\n                // alert(\"บันทึกข้อมูลสำเร็จ\");\n                setLoading(false);\n            })\n            .catch(err => {\n                console.log(err)\n                // alert(\"บันทึกข้อมูลล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n\n            });\n    };\n\n    const deleteComment = ({ userid, answer, manager_id }) => {\n        setLoading(true);\n        console.log(userid)\n        axiox.delete(MAIN_URL + '/answer/assessment', { data: { userid, answer, manager_id } })\n            .then(res => {\n                // console.log(dataDelete);\n                getAllEmployeeAssessment();\n\n                alert(\"ลบความคิดเห็นสำเร็จ\");\n                setLoading(false);\n                // setNumber = '';\n                // setQuestion = '';\n            })\n            .catch(err => {\n                console.log(err);\n\n                alert(\"ล้มเหลว กรุณาลองใหม่\");\n                setLoading(false);\n            });\n    }\n\n    const renderItem = ({ item, index }) => {\n        return (\n            <View style={{ padding: 12, backgroundColor: 'white' }}>\n                <View style={{ borderRadius: 10, borderWidth: 1, borderColor: 'black', padding: 8 }}>\n                    <Text style={{ color: 'gray', marginBottom: 4 }}>\n                        วันที่ {moment(item.date).format('ll')}\n                    </Text>\n                    <Text style={{ fontSize: 16 }}>\n                        ความเห็นจาก <Text style={{fontWeight: 'bold', color: 'gray' }}>{item.manager_name} {item.manager_lastname} [{item.manager_nickname}]</Text>\n                    </Text>\n                    <Text style={{ fontSize: 16 }}>\n                        หากว่า <Text style={{fontWeight: 'bold', color: 'blue' }}>{item.name} {item.lastname} ({item.nickname}) [{item.department}]</Text> <Text style={{ color: 'red' }}>จะลาออก</Text>\n                    </Text>\n                    <View style={{ marginVertical: 8, borderRadius: 10, borderWidth: 0.5, borderColor: 'gray', padding: 8 }}>\n                        <Text style={{ fontSize: 16 }}>\n                            {item.answer}\n                        </Text>\n                        <Text style={{ color: 'green', fontSize: 16 }}>\n                            เพราะ {item.reason}\n                        </Text>\n                    </View>\n                    {\n                        USER.department === 'MD' ?\n                            <TouchableOpacity\n                                style={{ position: 'absolute', right: 5, top: 5 }}\n                                onPress={() => {\n\n                                    Alert.alert(\n                                        \"ลบความคิดเห็น\",\n                                        \"คุณต้องการลบความคิดเห็นนี้หรือไม่\",\n                                        [\n                                            {\n                                                text: \"ลบ\",\n                                                onPress: () => {\n                                                    // console.log(dataDelete)\n                                                    deleteComment({ userid: item.userid, answer: item.answer, manager_id: item.manager_id })\n                                                },\n                                                style: \"default\"\n                                            },\n                                            {\n                                                text: \"ยกเลิก\",\n                                                onPress: () => { },\n                                                style: \"cancle\"\n                                            }\n                                        ],\n                                    )\n\n                                }}>\n                                <Icon name='trash'\n                                    color='red'\n                                    size={20} />\n                            </TouchableOpacity>\n                            : null\n                    }\n\n                </View>\n            </View>\n        )\n    }\n\n    return (\n        loading ?\n            <ActivityIndicator style={{\n                position: 'absolute',\n                left: 0,\n                right: 0,\n                top: 0,\n                bottom: 0,\n                alignItems: 'center',\n                justifyContent: 'center'\n            }} size=\"large\" color=\"#0275d8\" />\n            :\n            <FlatList\n                data={data}\n                extraData={data}\n                keyExtractor={(item, index) => `${index}`}\n                renderItem={renderItem}\n                ListHeaderComponent={\n                    <Text style={{ alignSelf: 'center', marginVertical: 16, fontSize: 16, fontWeight: 'bold' }}>ความเห็นทั้งหมดของผู้จัดการ</Text>\n                }\n            // scrollEnabled={false}\n            />\n    )\n}\n\nexport default EmployeeStatusCommentScreen;"]},"metadata":{},"sourceType":"module"}